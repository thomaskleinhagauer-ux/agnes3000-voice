(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var np={exports:{}},lu={};var Cv;function jA(){if(Cv)return lu;Cv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:r,key:f,ref:o!==void 0?o:null,props:u}}return lu.Fragment=e,lu.jsx=n,lu.jsxs=n,lu}var Iv;function LA(){return Iv||(Iv=1,np.exports=jA()),np.exports}var b=LA(),sp={exports:{}},Ne={};var Mv;function UA(){if(Mv)return Ne;Mv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),M=Symbol.iterator;function L(O){return O===null||typeof O!="object"?null:(O=M&&O[M]||O["@@iterator"],typeof O=="function"?O:null)}var ne={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oe=Object.assign,se={};function fe(O,X,ae){this.props=O,this.context=X,this.refs=se,this.updater=ae||ne}fe.prototype.isReactComponent={},fe.prototype.setState=function(O,X){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,X,"setState")},fe.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ve(){}ve.prototype=fe.prototype;function ye(O,X,ae){this.props=O,this.context=X,this.refs=se,this.updater=ae||ne}var je=ye.prototype=new ve;je.constructor=ye,oe(je,fe.prototype),je.isPureReactComponent=!0;var ct=Array.isArray;function Ie(){}var R={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function C(O,X,ae){var le=ae.ref;return{$$typeof:i,type:O,key:X,ref:le!==void 0?le:null,props:ae}}function V(O,X){return C(O.type,X,O.props)}function D(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function P(O){var X={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ae){return X[ae]})}var x=/\/+/g;function ht(O,X){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):X.toString(36)}function Rt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Ie,Ie):(O.status="pending",O.then(function(X){O.status==="pending"&&(O.status="fulfilled",O.value=X)},function(X){O.status==="pending"&&(O.status="rejected",O.reason=X)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function K(O,X,ae,le,Se){var Me=typeof O;(Me==="undefined"||Me==="boolean")&&(O=null);var ze=!1;if(O===null)ze=!0;else switch(Me){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(O.$$typeof){case i:case e:ze=!0;break;case T:return ze=O._init,K(ze(O._payload),X,ae,le,Se)}}if(ze)return Se=Se(O),ze=le===""?"."+ht(O,0):le,ct(Se)?(ae="",ze!=null&&(ae=ze.replace(x,"$&/")+"/"),K(Se,X,ae,"",function(Nn){return Nn})):Se!=null&&(D(Se)&&(Se=V(Se,ae+(Se.key==null||O&&O.key===Se.key?"":(""+Se.key).replace(x,"$&/")+"/")+ze)),X.push(Se)),1;ze=0;var ft=le===""?".":le+":";if(ct(O))for(var dt=0;dt<O.length;dt++)le=O[dt],Me=ft+ht(le,dt),ze+=K(le,X,ae,Me,Se);else if(dt=L(O),typeof dt=="function")for(O=dt.call(O),dt=0;!(le=O.next()).done;)le=le.value,Me=ft+ht(le,dt++),ze+=K(le,X,ae,Me,Se);else if(Me==="object"){if(typeof O.then=="function")return K(Rt(O),X,ae,le,Se);throw X=String(O),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ze}function re(O,X,ae){if(O==null)return O;var le=[],Se=0;return K(O,le,"","",function(Me){return X.call(ae,Me,Se++)}),le}function me(O){if(O._status===-1){var X=O._result;X=X(),X.then(function(ae){(O._status===0||O._status===-1)&&(O._status=1,O._result=ae)},function(ae){(O._status===0||O._status===-1)&&(O._status=2,O._result=ae)}),O._status===-1&&(O._status=0,O._result=X)}if(O._status===1)return O._result.default;throw O._result}var Le=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Ue={map:re,forEach:function(O,X,ae){re(O,function(){X.apply(this,arguments)},ae)},count:function(O){var X=0;return re(O,function(){X++}),X},toArray:function(O){return re(O,function(X){return X})||[]},only:function(O){if(!D(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ne.Activity=S,Ne.Children=Ue,Ne.Component=fe,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=ye,Ne.StrictMode=r,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},Ne.cache=function(O){return function(){return O.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(O,X,ae){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var le=oe({},O.props),Se=O.key;if(X!=null)for(Me in X.key!==void 0&&(Se=""+X.key),X)!A.call(X,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&X.ref===void 0||(le[Me]=X[Me]);var Me=arguments.length-2;if(Me===1)le.children=ae;else if(1<Me){for(var ze=Array(Me),ft=0;ft<Me;ft++)ze[ft]=arguments[ft+2];le.children=ze}return C(O.type,Se,le)},Ne.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Ne.createElement=function(O,X,ae){var le,Se={},Me=null;if(X!=null)for(le in X.key!==void 0&&(Me=""+X.key),X)A.call(X,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Se[le]=X[le]);var ze=arguments.length-2;if(ze===1)Se.children=ae;else if(1<ze){for(var ft=Array(ze),dt=0;dt<ze;dt++)ft[dt]=arguments[dt+2];Se.children=ft}if(O&&O.defaultProps)for(le in ze=O.defaultProps,ze)Se[le]===void 0&&(Se[le]=ze[le]);return C(O,Me,Se)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(O){return{$$typeof:m,render:O}},Ne.isValidElement=D,Ne.lazy=function(O){return{$$typeof:T,_payload:{_status:-1,_result:O},_init:me}},Ne.memo=function(O,X){return{$$typeof:y,type:O,compare:X===void 0?null:X}},Ne.startTransition=function(O){var X=R.T,ae={};R.T=ae;try{var le=O(),Se=R.S;Se!==null&&Se(ae,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Ie,Le)}catch(Me){Le(Me)}finally{X!==null&&ae.types!==null&&(X.types=ae.types),R.T=X}},Ne.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ne.use=function(O){return R.H.use(O)},Ne.useActionState=function(O,X,ae){return R.H.useActionState(O,X,ae)},Ne.useCallback=function(O,X){return R.H.useCallback(O,X)},Ne.useContext=function(O){return R.H.useContext(O)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(O,X){return R.H.useDeferredValue(O,X)},Ne.useEffect=function(O,X){return R.H.useEffect(O,X)},Ne.useEffectEvent=function(O){return R.H.useEffectEvent(O)},Ne.useId=function(){return R.H.useId()},Ne.useImperativeHandle=function(O,X,ae){return R.H.useImperativeHandle(O,X,ae)},Ne.useInsertionEffect=function(O,X){return R.H.useInsertionEffect(O,X)},Ne.useLayoutEffect=function(O,X){return R.H.useLayoutEffect(O,X)},Ne.useMemo=function(O,X){return R.H.useMemo(O,X)},Ne.useOptimistic=function(O,X){return R.H.useOptimistic(O,X)},Ne.useReducer=function(O,X,ae){return R.H.useReducer(O,X,ae)},Ne.useRef=function(O){return R.H.useRef(O)},Ne.useState=function(O){return R.H.useState(O)},Ne.useSyncExternalStore=function(O,X,ae){return R.H.useSyncExternalStore(O,X,ae)},Ne.useTransition=function(){return R.H.useTransition()},Ne.version="19.2.4",Ne}var Dv;function dg(){return Dv||(Dv=1,sp.exports=UA()),sp.exports}var ee=dg(),ip={exports:{}},uu={},rp={exports:{}},ap={};var kv;function zA(){return kv||(kv=1,(function(i){function e(K,re){var me=K.length;K.push(re);e:for(;0<me;){var Le=me-1>>>1,Ue=K[Le];if(0<o(Ue,re))K[Le]=re,K[me]=Ue,me=Le;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var re=K[0],me=K.pop();if(me!==re){K[0]=me;e:for(var Le=0,Ue=K.length,O=Ue>>>1;Le<O;){var X=2*(Le+1)-1,ae=K[X],le=X+1,Se=K[le];if(0>o(ae,me))le<Ue&&0>o(Se,ae)?(K[Le]=Se,K[le]=me,Le=le):(K[Le]=ae,K[X]=me,Le=X);else if(le<Ue&&0>o(Se,me))K[Le]=Se,K[le]=me,Le=le;else break e}}return re}function o(K,re){var me=K.sortIndex-re.sortIndex;return me!==0?me:K.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var g=[],y=[],T=1,S=null,M=3,L=!1,ne=!1,oe=!1,se=!1,fe=typeof setTimeout=="function"?setTimeout:null,ve=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;function je(K){for(var re=n(y);re!==null;){if(re.callback===null)r(y);else if(re.startTime<=K)r(y),re.sortIndex=re.expirationTime,e(g,re);else break;re=n(y)}}function ct(K){if(oe=!1,je(K),!ne)if(n(g)!==null)ne=!0,Ie||(Ie=!0,P());else{var re=n(y);re!==null&&Rt(ct,re.startTime-K)}}var Ie=!1,R=-1,A=5,C=-1;function V(){return se?!0:!(i.unstable_now()-C<A)}function D(){if(se=!1,Ie){var K=i.unstable_now();C=K;var re=!0;try{e:{ne=!1,oe&&(oe=!1,ve(R),R=-1),L=!0;var me=M;try{t:{for(je(K),S=n(g);S!==null&&!(S.expirationTime>K&&V());){var Le=S.callback;if(typeof Le=="function"){S.callback=null,M=S.priorityLevel;var Ue=Le(S.expirationTime<=K);if(K=i.unstable_now(),typeof Ue=="function"){S.callback=Ue,je(K),re=!0;break t}S===n(g)&&r(g),je(K)}else r(g);S=n(g)}if(S!==null)re=!0;else{var O=n(y);O!==null&&Rt(ct,O.startTime-K),re=!1}}break e}finally{S=null,M=me,L=!1}re=void 0}}finally{re?P():Ie=!1}}}var P;if(typeof ye=="function")P=function(){ye(D)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,ht=x.port2;x.port1.onmessage=D,P=function(){ht.postMessage(null)}}else P=function(){fe(D,0)};function Rt(K,re){R=fe(function(){K(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return M},i.unstable_next=function(K){switch(M){case 1:case 2:case 3:var re=3;break;default:re=M}var me=M;M=re;try{return K()}finally{M=me}},i.unstable_requestPaint=function(){se=!0},i.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var me=M;M=K;try{return re()}finally{M=me}},i.unstable_scheduleCallback=function(K,re,me){var Le=i.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Le+me:Le):me=Le,K){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=me+Ue,K={id:T++,callback:re,priorityLevel:K,startTime:me,expirationTime:Ue,sortIndex:-1},me>Le?(K.sortIndex=me,e(y,K),n(g)===null&&K===n(y)&&(oe?(ve(R),R=-1):oe=!0,Rt(ct,me-Le))):(K.sortIndex=Ue,e(g,K),ne||L||(ne=!0,Ie||(Ie=!0,P()))),K},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(K){var re=M;return function(){var me=M;M=re;try{return K.apply(this,arguments)}finally{M=me}}}})(ap)),ap}var Ov;function BA(){return Ov||(Ov=1,rp.exports=zA()),rp.exports}var op={exports:{}},gn={};var Vv;function qA(){if(Vv)return gn;Vv=1;var i=dg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:g,containerInfo:y,implementation:T}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gn.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,T)},gn.flushSync=function(g){var y=f.T,T=r.p;try{if(f.T=null,r.p=2,g)return g()}finally{f.T=y,r.p=T,r.d.f()}},gn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},gn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},gn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,S=m(T,y.crossOrigin),M=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:M,fetchPriority:L}):T==="script"&&r.d.X(g,{crossOrigin:S,integrity:M,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},gn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},gn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,S=m(T,y.crossOrigin);r.d.L(g,T,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},gn.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},gn.requestFormReset=function(g){r.d.r(g)},gn.unstable_batchedUpdates=function(g,y){return g(y)},gn.useFormState=function(g,y,T){return f.H.useFormState(g,y,T)},gn.useFormStatus=function(){return f.H.useHostTransitionStatus()},gn.version="19.2.4",gn}var Pv;function HA(){if(Pv)return op.exports;Pv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),op.exports=qA(),op.exports}var jv;function FA(){if(jv)return uu;jv=1;var i=BA(),e=dg(),n=HA();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function m(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(r(188))}function y(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,l=s;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),t;if(d===l)return g(h),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,E=h.child;E;){if(E===a){_=!0,a=h,l=d;break}if(E===l){_=!0,l=h,a=d;break}E=E.sibling}if(!_){for(E=d.child;E;){if(E===a){_=!0,a=d,l=h;break}if(E===l){_=!0,l=d,a=h;break}E=E.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function T(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=T(t),s!==null)return s;t=t.sibling}return null}var S=Object.assign,M=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),ne=Symbol.for("react.portal"),oe=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),ve=Symbol.for("react.consumer"),ye=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function ht(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oe:return"Fragment";case fe:return"Profiler";case se:return"StrictMode";case ct:return"Suspense";case Ie:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ne:return"Portal";case ye:return t.displayName||"Context";case ve:return(t._context.displayName||"Context")+".Consumer";case je:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return s=t.displayName||null,s!==null?s:ht(t.type)||"Memo";case A:s=t._payload,t=t._init;try{return ht(t(s))}catch{}}return null}var Rt=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Le=[],Ue=-1;function O(t){return{current:t}}function X(t){0>Ue||(t.current=Le[Ue],Le[Ue]=null,Ue--)}function ae(t,s){Ue++,Le[Ue]=t.current,t.current=s}var le=O(null),Se=O(null),Me=O(null),ze=O(null);function ft(t,s){switch(ae(Me,s),ae(Se,t),ae(le,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?W0(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=W0(s),t=Z0(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(le),ae(le,t)}function dt(){X(le),X(Se),X(Me)}function Nn(t){t.memoizedState!==null&&ae(ze,t);var s=le.current,a=Z0(s,t.type);s!==a&&(ae(Se,t),ae(le,a))}function hi(t){Se.current===t&&(X(le),X(Se)),ze.current===t&&(X(ze),iu._currentValue=me)}var Cn,fi;function Tn(t){if(Cn===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Cn=s&&s[1]||"",fi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cn+t+fi}var zs=!1;function In(t,s){if(!t||zs)return"";zs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(G){var q=G}Reflect.construct(t,[],J)}else{try{J.call()}catch(G){q=G}t.call(J.prototype)}}else{try{throw Error()}catch(G){q=G}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],E=d[1];if(_&&E){var N=_.split(`
`),B=E.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===B.length)for(l=N.length-1,h=B.length-1;1<=l&&0<=h&&N[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==B[h]){var Q=`
`+N[l].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=l&&0<=h);break}}}finally{zs=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Tn(a):""}function ws(t,s){switch(t.tag){case 26:case 27:case 5:return Tn(t.type);case 16:return Tn("Lazy");case 13:return t.child!==s&&s!==null?Tn("Suspense Fallback"):Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 15:return In(t.type,!1);case 11:return In(t.type.render,!1);case 1:return In(t.type,!0);case 31:return Tn("Activity");default:return""}}function Ss(t){try{var s="",a=null;do s+=ws(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var _t=Object.prototype.hasOwnProperty,mt=i.unstable_scheduleCallback,Bs=i.unstable_cancelCallback,Qa=i.unstable_shouldYield,ra=i.unstable_requestPaint,Bt=i.unstable_now,di=i.unstable_getCurrentPriorityLevel,Vt=i.unstable_ImmediatePriority,qt=i.unstable_UserBlockingPriority,rs=i.unstable_NormalPriority,qn=i.unstable_LowPriority,Xi=i.unstable_IdlePriority,Ji=i.log,Wi=i.unstable_setDisableYieldValue,Mn=null,$=null;function Pt(t){if(typeof Ji=="function"&&Wi(t),$&&typeof $.setStrictMode=="function")try{$.setStrictMode(Mn,t)}catch{}}var vt=Math.clz32?Math.clz32:as,Hn=Math.log,mi=Math.LN2;function as(t){return t>>>=0,t===0?32:31-(Hn(t)/mi|0)|0}var pe=256,bt=262144,Nt=4194304;function wn(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Fn(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?h=wn(l):(_&=E,_!==0?h=wn(_):a||(a=E&~t,a!==0&&(h=wn(a))))):(E=l&~d,E!==0?h=wn(E):_!==0?h=wn(_):a||(a=l&~t,a!==0&&(h=wn(a)))),h===0?0:s!==0&&s!==h&&(s&d)===0&&(d=h&-h,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:h}function Gn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function hl(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aa(){var t=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),t}function Dn(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function pi(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function fl(t,s,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,N=t.expirationTimes,B=t.hiddenUpdates;for(a=_&~a;0<a;){var Q=31-vt(a),J=1<<Q;E[Q]=0,N[Q]=-1;var q=B[Q];if(q!==null)for(B[Q]=null,Q=0;Q<q.length;Q++){var G=q[Q];G!==null&&(G.lane&=-536870913)}a&=~J}l!==0&&gi(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~s))}function gi(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-vt(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Zi(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-vt(a),h=1<<l;h&s|t[l]&s&&(t[l]|=s),a&=~h}}function oa(t,s){var a=s&-s;return a=(a&42)!==0?1:qs(a),(a&(t.suspendedLanes|s))!==0?0:a}function qs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function As(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ya(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:Tv(t.type))}function Kn(t,s){var a=re.p;try{return re.p=t,s()}finally{re.p=a}}var $n=Math.random().toString(36).slice(2),Dt="__reactFiber$"+$n,Ht="__reactProps$"+$n,os="__reactContainer$"+$n,er="__reactEvents$"+$n,dl="__reactListeners$"+$n,yi="__reactHandles$"+$n,tr="__reactResources$"+$n,I="__reactMarker$"+$n;function Z(t){delete t[Dt],delete t[Ht],delete t[er],delete t[dl],delete t[yi]}function de(t){var s=t[Dt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[os]||a[Dt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=av(t);t!==null;){if(a=t[Dt])return a;t=av(t)}return s}t=a,a=t.parentNode}return null}function _e(t){if(t=t[Dt]||t[os]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function ke(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function pt(t){var s=t[tr];return s||(s=t[tr]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function gt(t){t[I]=!0}var kn=new Set,nr={};function Et(t,s){Sn(t,s),Sn(t+"Capture",s)}function Sn(t,s){for(nr[t]=s,t=0;t<s.length;t++)kn.add(s[t])}var sr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ml={},pl={};function fc(t){return _t.call(pl,t)?!0:_t.call(ml,t)?!1:sr.test(t)?pl[t]=!0:(ml[t]=!0,!1)}function Xa(t,s,a){if(fc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Qn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Ft(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function nn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ir(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gl(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function nt(t){if(!t._valueTracker){var s=ir(t)?"checked":"value";t._valueTracker=gl(t,s,""+t[s])}}function la(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=ir(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Hs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ua=/[\n"\\]/g;function On(t){return t.replace(ua,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ja(t,s,a,l,h,d,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+nn(s)):t.value!==""+nn(s)&&(t.value=""+nn(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?yl(t,_,nn(s)):a!=null?yl(t,_,nn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+nn(E):t.removeAttribute("name")}function dc(t,s,a,l,h,d,_,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null)){nt(t);return}a=a!=null?""+nn(a):"",s=s!=null?""+nn(s):a,E||s===t.value||(t.value=s),t.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),nt(t)}function yl(t,s,a){s==="number"&&Hs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function rr(t,s,a,l){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+nn(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function mc(t,s,a){if(s!=null&&(s=""+nn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+nn(a):""}function ar(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(Rt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=nn(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),nt(t)}function Vn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var pc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _l(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||pc.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function vl(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&_l(t,h,l)}else for(var d in s)s.hasOwnProperty(d)&&_l(t,d,s[d])}function Wa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),or=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Za(t){return or.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function xs(){}var bl=null;function ls(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lr=null,Fs=null;function ca(t){var s=_e(t);if(s&&(t=s.stateNode)){var a=t[Ht]||null;e:switch(t=s.stateNode,s.type){case"input":if(Ja(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+On(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var h=l[Ht]||null;if(!h)throw Error(r(90));Ja(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&la(l)}break e;case"textarea":mc(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&rr(t,!!a.multiple,s,!1)}}}var eo=!1;function ur(t,s,a){if(eo)return t(s,a);eo=!0;try{var l=t(s);return l}finally{if(eo=!1,(lr!==null||Fs!==null)&&(uh(),lr&&(s=lr,t=Fs,Fs=lr=null,ca(s),t)))for(s=0;s<t.length;s++)ca(t[s])}}function Rs(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Ht]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=!1;if(us)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){ha=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{ha=!1}var Gs=null,El=null,fa=null;function Tl(){if(fa)return fa;var t,s=El,a=s.length,l,h="value"in Gs?Gs.value:Gs.textContent,d=h.length;for(t=0;t<a&&s[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&s[a-l]===h[d-l];l++);return fa=h.slice(t,1<l?1-l:void 0)}function da(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function _i(){return!0}function Ns(){return!1}function on(t){function s(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?_i:Ns,this.isPropagationStopped=Ns,this}return S(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=_i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=_i)},persist:function(){},isPersistent:_i}),s}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ks=on(vi),cr=S({},vi,{view:0,detail:0}),wl=on(cr),hr,to,$s,no=S({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$s&&($s&&t.type==="mousemove"?(hr=t.screenX-$s.screenX,to=t.screenY-$s.screenY):to=hr=0,$s=t),hr)},movementY:function(t){return"movementY"in t?t.movementY:to}}),Sl=on(no),ma=S({},no,{dataTransfer:0}),yc=on(ma),_c=S({},cr,{relatedTarget:0}),pa=on(_c),Al=S({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),vc=on(Al),so=S({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bc=on(so),Ec=S({},vi,{data:0}),Qs=on(Ec),Tc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ac(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Sc[t])?!!s[t]:!1}function fr(){return Ac}var An=S({},cr,{key:function(t){if(t.key){var s=Tc[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=da(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fr,charCode:function(t){return t.type==="keypress"?da(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?da(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xc=on(An),Rc=S({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bi=on(Rc),c=S({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fr}),p=on(c),v=S({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=on(v),U=S({},no,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F=on(U),ie=S({},vi,{newState:0,oldState:0}),Oe=on(ie),jt=[9,13,27,32],Ze=us&&"CompositionEvent"in window,At=null;us&&"documentMode"in document&&(At=document.documentMode);var cs=us&&"TextEvent"in window&&!At,Ys=us&&(!Ze||At&&8<At&&11>=At),Cs=" ",Is=!1;function ga(t,s){switch(t){case"keyup":return jt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function io(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ro=!1;function oS(t,s){switch(t){case"compositionend":return io(s);case"keypress":return s.which!==32?null:(Is=!0,Cs);case"textInput":return t=s.data,t===Cs&&Is?null:t;default:return null}}function lS(t,s){if(ro)return t==="compositionend"||!Ze&&ga(t,s)?(t=Tl(),fa=El=Gs=null,ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ys&&s.locale!=="ko"?null:s.data;default:return null}}var uS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uy(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!uS[t.type]:s==="textarea"}function cy(t,s,a,l){lr?Fs?Fs.push(l):Fs=[l]:lr=l,s=gh(s,"onChange"),0<s.length&&(a=new Ks("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var xl=null,Rl=null;function cS(t){K0(t,0)}function Nc(t){var s=ke(t);if(la(s))return t}function hy(t,s){if(t==="change")return s}var fy=!1;if(us){var ud;if(us){var cd="oninput"in document;if(!cd){var dy=document.createElement("div");dy.setAttribute("oninput","return;"),cd=typeof dy.oninput=="function"}ud=cd}else ud=!1;fy=ud&&(!document.documentMode||9<document.documentMode)}function my(){xl&&(xl.detachEvent("onpropertychange",py),Rl=xl=null)}function py(t){if(t.propertyName==="value"&&Nc(Rl)){var s=[];cy(s,Rl,t,ls(t)),ur(cS,s)}}function hS(t,s,a){t==="focusin"?(my(),xl=s,Rl=a,xl.attachEvent("onpropertychange",py)):t==="focusout"&&my()}function fS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nc(Rl)}function dS(t,s){if(t==="click")return Nc(s)}function mS(t,s){if(t==="input"||t==="change")return Nc(s)}function pS(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Yn=typeof Object.is=="function"?Object.is:pS;function Nl(t,s){if(Yn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!_t.call(s,h)||!Yn(t[h],s[h]))return!1}return!0}function gy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yy(t,s){var a=gy(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gy(a)}}function _y(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?_y(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function vy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Hs(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Hs(t.document)}return s}function hd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var gS=us&&"documentMode"in document&&11>=document.documentMode,ao=null,fd=null,Cl=null,dd=!1;function by(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;dd||ao==null||ao!==Hs(l)||(l=ao,"selectionStart"in l&&hd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Cl&&Nl(Cl,l)||(Cl=l,l=gh(fd,"onSelect"),0<l.length&&(s=new Ks("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=ao)))}function ya(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var oo={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionrun:ya("Transition","TransitionRun"),transitionstart:ya("Transition","TransitionStart"),transitioncancel:ya("Transition","TransitionCancel"),transitionend:ya("Transition","TransitionEnd")},md={},Ey={};us&&(Ey=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function _a(t){if(md[t])return md[t];if(!oo[t])return t;var s=oo[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Ey)return md[t]=s[a];return t}var Ty=_a("animationend"),wy=_a("animationiteration"),Sy=_a("animationstart"),yS=_a("transitionrun"),_S=_a("transitionstart"),vS=_a("transitioncancel"),Ay=_a("transitionend"),xy=new Map,pd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pd.push("scrollEnd");function Ms(t,s){xy.set(t,s),Et(s,[t])}var Cc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},hs=[],lo=0,gd=0;function Ic(){for(var t=lo,s=gd=lo=0;s<t;){var a=hs[s];hs[s++]=null;var l=hs[s];hs[s++]=null;var h=hs[s];hs[s++]=null;var d=hs[s];if(hs[s++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&Ry(a,h,d)}}function Mc(t,s,a,l){hs[lo++]=t,hs[lo++]=s,hs[lo++]=a,hs[lo++]=l,gd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function yd(t,s,a,l){return Mc(t,s,a,l),Dc(t)}function va(t,s){return Mc(t,null,null,s),Dc(t)}function Ry(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&s!==null&&(h=31-vt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[s]:l.push(s),s.lane=a|536870912),d):null}function Dc(t){if(50<Jl)throw Jl=0,xm=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var uo={};function bS(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,s,a,l){return new bS(t,s,a,l)}function _d(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ei(t,s){var a=t.alternate;return a===null?(a=Xn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ny(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function kc(t,s,a,l,h,d){var _=0;if(l=t,typeof t=="function")_d(t)&&(_=1);else if(typeof t=="string")_=AA(t,a,le.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Xn(31,a,s,h),t.elementType=C,t.lanes=d,t;case oe:return ba(a.children,h,d,s);case se:_=8,h|=24;break;case fe:return t=Xn(12,a,s,h|2),t.elementType=fe,t.lanes=d,t;case ct:return t=Xn(13,a,s,h),t.elementType=ct,t.lanes=d,t;case Ie:return t=Xn(19,a,s,h),t.elementType=Ie,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ye:_=10;break e;case ve:_=9;break e;case je:_=11;break e;case R:_=14;break e;case A:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return s=Xn(_,a,s,h),s.elementType=t,s.type=l,s.lanes=d,s}function ba(t,s,a,l){return t=Xn(7,t,l,s),t.lanes=a,t}function vd(t,s,a){return t=Xn(6,t,null,s),t.lanes=a,t}function Cy(t){var s=Xn(18,null,null,0);return s.stateNode=t,s}function bd(t,s,a){return s=Xn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Iy=new WeakMap;function fs(t,s){if(typeof t=="object"&&t!==null){var a=Iy.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Ss(s)},Iy.set(t,s),s)}return{value:t,source:s,stack:Ss(s)}}var co=[],ho=0,Oc=null,Il=0,ds=[],ms=0,dr=null,Xs=1,Js="";function Ti(t,s){co[ho++]=Il,co[ho++]=Oc,Oc=t,Il=s}function My(t,s,a){ds[ms++]=Xs,ds[ms++]=Js,ds[ms++]=dr,dr=t;var l=Xs;t=Js;var h=32-vt(l)-1;l&=~(1<<h),a+=1;var d=32-vt(s)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,Xs=1<<32-vt(s)+h|a<<h|l,Js=d+t}else Xs=1<<d|a<<h|l,Js=t}function Ed(t){t.return!==null&&(Ti(t,1),My(t,1,0))}function Td(t){for(;t===Oc;)Oc=co[--ho],co[ho]=null,Il=co[--ho],co[ho]=null;for(;t===dr;)dr=ds[--ms],ds[ms]=null,Js=ds[--ms],ds[ms]=null,Xs=ds[--ms],ds[ms]=null}function Dy(t,s){ds[ms++]=Xs,ds[ms++]=Js,ds[ms++]=dr,Xs=s.id,Js=s.overflow,dr=t}var ln=null,Tt=null,Qe=!1,mr=null,ps=!1,wd=Error(r(519));function pr(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ml(fs(s,t)),wd}function ky(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[Dt]=t,s[Ht]=l,a){case"dialog":qe("cancel",s),qe("close",s);break;case"iframe":case"object":case"embed":qe("load",s);break;case"video":case"audio":for(a=0;a<Zl.length;a++)qe(Zl[a],s);break;case"source":qe("error",s);break;case"img":case"image":case"link":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"input":qe("invalid",s),dc(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":qe("invalid",s);break;case"textarea":qe("invalid",s),ar(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||X0(s.textContent,a)?(l.popover!=null&&(qe("beforetoggle",s),qe("toggle",s)),l.onScroll!=null&&qe("scroll",s),l.onScrollEnd!=null&&qe("scrollend",s),l.onClick!=null&&(s.onclick=xs),s=!0):s=!1,s||pr(t,!0)}function Oy(t){for(ln=t.return;ln;)switch(ln.tag){case 5:case 31:case 13:ps=!1;return;case 27:case 3:ps=!0;return;default:ln=ln.return}}function fo(t){if(t!==ln)return!1;if(!Qe)return Oy(t),Qe=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Bm(t.type,t.memoizedProps)),a=!a),a&&Tt&&pr(t),Oy(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Tt=rv(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Tt=rv(t)}else s===27?(s=Tt,Cr(t.type)?(t=Km,Km=null,Tt=t):Tt=s):Tt=ln?ys(t.stateNode.nextSibling):null;return!0}function Ea(){Tt=ln=null,Qe=!1}function Sd(){var t=mr;return t!==null&&(Un===null?Un=t:Un.push.apply(Un,t),mr=null),t}function Ml(t){mr===null?mr=[t]:mr.push(t)}var Ad=O(null),Ta=null,wi=null;function gr(t,s,a){ae(Ad,s._currentValue),s._currentValue=a}function Si(t){t._currentValue=Ad.current,X(Ad)}function xd(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Rd(t,s,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var E=d;d=h;for(var N=0;N<s.length;N++)if(E.context===s[N]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),xd(d.return,a,t),l||(_=null);break e}d=E.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),xd(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function mo(t,s,a,l){t=null;for(var h=s,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var E=h.type;Yn(h.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(h===ze.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(iu):t=[iu])}h=h.return}t!==null&&Rd(s,t,a,l),s.flags|=262144}function Vc(t){for(t=t.firstContext;t!==null;){if(!Yn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function wa(t){Ta=t,wi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function un(t){return Vy(Ta,t)}function Pc(t,s){return Ta===null&&wa(t),Vy(t,s)}function Vy(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},wi===null){if(t===null)throw Error(r(308));wi=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else wi=wi.next=s;return a}var ES=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},TS=i.unstable_scheduleCallback,wS=i.unstable_NormalPriority,Gt={$$typeof:ye,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nd(){return{controller:new ES,data:new Map,refCount:0}}function Dl(t){t.refCount--,t.refCount===0&&TS(wS,function(){t.controller.abort()})}var kl=null,Cd=0,po=0,go=null;function SS(t,s){if(kl===null){var a=kl=[];Cd=0,po=Dm(),go={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Cd++,s.then(Py,Py),s}function Py(){if(--Cd===0&&kl!==null){go!==null&&(go.status="fulfilled");var t=kl;kl=null,po=0,go=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function AS(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var jy=K.S;K.S=function(t,s){b0=Bt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&SS(t,s),jy!==null&&jy(t,s)};var Sa=O(null);function Id(){var t=Sa.current;return t!==null?t:yt.pooledCache}function jc(t,s){s===null?ae(Sa,Sa.current):ae(Sa,s.pool)}function Ly(){var t=Id();return t===null?null:{parent:Gt._currentValue,pool:t}}var yo=Error(r(460)),Md=Error(r(474)),Lc=Error(r(542)),Uc={then:function(){}};function Uy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function zy(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(xs,xs),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,qy(t),t;default:if(typeof s.status=="string")s.then(xs,xs);else{if(t=yt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,qy(t),t}throw xa=s,yo}}function Aa(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(xa=a,yo):a}}var xa=null;function By(){if(xa===null)throw Error(r(459));var t=xa;return xa=null,t}function qy(t){if(t===yo||t===Lc)throw Error(r(483))}var _o=null,Ol=0;function zc(t){var s=Ol;return Ol+=1,_o===null&&(_o=[]),zy(_o,t,s)}function Vl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Bc(t,s){throw s.$$typeof===M?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Hy(t){function s(j,k){if(t){var z=j.deletions;z===null?(j.deletions=[k],j.flags|=16):z.push(k)}}function a(j,k){if(!t)return null;for(;k!==null;)s(j,k),k=k.sibling;return null}function l(j){for(var k=new Map;j!==null;)j.key!==null?k.set(j.key,j):k.set(j.index,j),j=j.sibling;return k}function h(j,k){return j=Ei(j,k),j.index=0,j.sibling=null,j}function d(j,k,z){return j.index=z,t?(z=j.alternate,z!==null?(z=z.index,z<k?(j.flags|=67108866,k):z):(j.flags|=67108866,k)):(j.flags|=1048576,k)}function _(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function E(j,k,z,Y){return k===null||k.tag!==6?(k=vd(z,j.mode,Y),k.return=j,k):(k=h(k,z),k.return=j,k)}function N(j,k,z,Y){var Ee=z.type;return Ee===oe?Q(j,k,z.props.children,Y,z.key):k!==null&&(k.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===A&&Aa(Ee)===k.type)?(k=h(k,z.props),Vl(k,z),k.return=j,k):(k=kc(z.type,z.key,z.props,null,j.mode,Y),Vl(k,z),k.return=j,k)}function B(j,k,z,Y){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=bd(z,j.mode,Y),k.return=j,k):(k=h(k,z.children||[]),k.return=j,k)}function Q(j,k,z,Y,Ee){return k===null||k.tag!==7?(k=ba(z,j.mode,Y,Ee),k.return=j,k):(k=h(k,z),k.return=j,k)}function J(j,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=vd(""+k,j.mode,z),k.return=j,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case L:return z=kc(k.type,k.key,k.props,null,j.mode,z),Vl(z,k),z.return=j,z;case ne:return k=bd(k,j.mode,z),k.return=j,k;case A:return k=Aa(k),J(j,k,z)}if(Rt(k)||P(k))return k=ba(k,j.mode,z,null),k.return=j,k;if(typeof k.then=="function")return J(j,zc(k),z);if(k.$$typeof===ye)return J(j,Pc(j,k),z);Bc(j,k)}return null}function q(j,k,z,Y){var Ee=k!==null?k.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Ee!==null?null:E(j,k,""+z,Y);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case L:return z.key===Ee?N(j,k,z,Y):null;case ne:return z.key===Ee?B(j,k,z,Y):null;case A:return z=Aa(z),q(j,k,z,Y)}if(Rt(z)||P(z))return Ee!==null?null:Q(j,k,z,Y,null);if(typeof z.then=="function")return q(j,k,zc(z),Y);if(z.$$typeof===ye)return q(j,k,Pc(j,z),Y);Bc(j,z)}return null}function G(j,k,z,Y,Ee){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return j=j.get(z)||null,E(k,j,""+Y,Ee);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case L:return j=j.get(Y.key===null?z:Y.key)||null,N(k,j,Y,Ee);case ne:return j=j.get(Y.key===null?z:Y.key)||null,B(k,j,Y,Ee);case A:return Y=Aa(Y),G(j,k,z,Y,Ee)}if(Rt(Y)||P(Y))return j=j.get(z)||null,Q(k,j,Y,Ee,null);if(typeof Y.then=="function")return G(j,k,z,zc(Y),Ee);if(Y.$$typeof===ye)return G(j,k,z,Pc(k,Y),Ee);Bc(k,Y)}return null}function he(j,k,z,Y){for(var Ee=null,Je=null,ge=k,Pe=k=0,Fe=null;ge!==null&&Pe<z.length;Pe++){ge.index>Pe?(Fe=ge,ge=null):Fe=ge.sibling;var We=q(j,ge,z[Pe],Y);if(We===null){ge===null&&(ge=Fe);break}t&&ge&&We.alternate===null&&s(j,ge),k=d(We,k,Pe),Je===null?Ee=We:Je.sibling=We,Je=We,ge=Fe}if(Pe===z.length)return a(j,ge),Qe&&Ti(j,Pe),Ee;if(ge===null){for(;Pe<z.length;Pe++)ge=J(j,z[Pe],Y),ge!==null&&(k=d(ge,k,Pe),Je===null?Ee=ge:Je.sibling=ge,Je=ge);return Qe&&Ti(j,Pe),Ee}for(ge=l(ge);Pe<z.length;Pe++)Fe=G(ge,j,Pe,z[Pe],Y),Fe!==null&&(t&&Fe.alternate!==null&&ge.delete(Fe.key===null?Pe:Fe.key),k=d(Fe,k,Pe),Je===null?Ee=Fe:Je.sibling=Fe,Je=Fe);return t&&ge.forEach(function(Or){return s(j,Or)}),Qe&&Ti(j,Pe),Ee}function we(j,k,z,Y){if(z==null)throw Error(r(151));for(var Ee=null,Je=null,ge=k,Pe=k=0,Fe=null,We=z.next();ge!==null&&!We.done;Pe++,We=z.next()){ge.index>Pe?(Fe=ge,ge=null):Fe=ge.sibling;var Or=q(j,ge,We.value,Y);if(Or===null){ge===null&&(ge=Fe);break}t&&ge&&Or.alternate===null&&s(j,ge),k=d(Or,k,Pe),Je===null?Ee=Or:Je.sibling=Or,Je=Or,ge=Fe}if(We.done)return a(j,ge),Qe&&Ti(j,Pe),Ee;if(ge===null){for(;!We.done;Pe++,We=z.next())We=J(j,We.value,Y),We!==null&&(k=d(We,k,Pe),Je===null?Ee=We:Je.sibling=We,Je=We);return Qe&&Ti(j,Pe),Ee}for(ge=l(ge);!We.done;Pe++,We=z.next())We=G(ge,j,Pe,We.value,Y),We!==null&&(t&&We.alternate!==null&&ge.delete(We.key===null?Pe:We.key),k=d(We,k,Pe),Je===null?Ee=We:Je.sibling=We,Je=We);return t&&ge.forEach(function(PA){return s(j,PA)}),Qe&&Ti(j,Pe),Ee}function lt(j,k,z,Y){if(typeof z=="object"&&z!==null&&z.type===oe&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case L:e:{for(var Ee=z.key;k!==null;){if(k.key===Ee){if(Ee=z.type,Ee===oe){if(k.tag===7){a(j,k.sibling),Y=h(k,z.props.children),Y.return=j,j=Y;break e}}else if(k.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===A&&Aa(Ee)===k.type){a(j,k.sibling),Y=h(k,z.props),Vl(Y,z),Y.return=j,j=Y;break e}a(j,k);break}else s(j,k);k=k.sibling}z.type===oe?(Y=ba(z.props.children,j.mode,Y,z.key),Y.return=j,j=Y):(Y=kc(z.type,z.key,z.props,null,j.mode,Y),Vl(Y,z),Y.return=j,j=Y)}return _(j);case ne:e:{for(Ee=z.key;k!==null;){if(k.key===Ee)if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){a(j,k.sibling),Y=h(k,z.children||[]),Y.return=j,j=Y;break e}else{a(j,k);break}else s(j,k);k=k.sibling}Y=bd(z,j.mode,Y),Y.return=j,j=Y}return _(j);case A:return z=Aa(z),lt(j,k,z,Y)}if(Rt(z))return he(j,k,z,Y);if(P(z)){if(Ee=P(z),typeof Ee!="function")throw Error(r(150));return z=Ee.call(z),we(j,k,z,Y)}if(typeof z.then=="function")return lt(j,k,zc(z),Y);if(z.$$typeof===ye)return lt(j,k,Pc(j,z),Y);Bc(j,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,k!==null&&k.tag===6?(a(j,k.sibling),Y=h(k,z),Y.return=j,j=Y):(a(j,k),Y=vd(z,j.mode,Y),Y.return=j,j=Y),_(j)):a(j,k)}return function(j,k,z,Y){try{Ol=0;var Ee=lt(j,k,z,Y);return _o=null,Ee}catch(ge){if(ge===yo||ge===Lc)throw ge;var Je=Xn(29,ge,null,j.mode);return Je.lanes=Y,Je.return=j,Je}}}var Ra=Hy(!0),Fy=Hy(!1),yr=!1;function Dd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kd(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _r(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function vr(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(et&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=Dc(t),Ry(t,null,a),s}return Mc(t,l,s,a),Dc(t)}function Pl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Zi(t,a)}}function Od(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=s:d=d.next=s}else h=d=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Vd=!1;function jl(){if(Vd){var t=go;if(t!==null)throw t}}function Ll(t,s,a,l){Vd=!1;var h=t.updateQueue;yr=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var N=E,B=N.next;N.next=null,_===null?d=B:_.next=B,_=N;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==_&&(E===null?Q.firstBaseUpdate=B:E.next=B,Q.lastBaseUpdate=N))}if(d!==null){var J=h.baseState;_=0,Q=B=N=null,E=d;do{var q=E.lane&-536870913,G=q!==E.lane;if(G?(He&q)===q:(l&q)===q){q!==0&&q===po&&(Vd=!0),Q!==null&&(Q=Q.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var he=t,we=E;q=s;var lt=a;switch(we.tag){case 1:if(he=we.payload,typeof he=="function"){J=he.call(lt,J,q);break e}J=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=we.payload,q=typeof he=="function"?he.call(lt,J,q):he,q==null)break e;J=S({},J,q);break e;case 2:yr=!0}}q=E.callback,q!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[q]:G.push(q))}else G={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(B=Q=G,N=J):Q=Q.next=G,_|=q;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;G=E,E=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);Q===null&&(N=J),h.baseState=N,h.firstBaseUpdate=B,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),Sr|=_,t.lanes=_,t.memoizedState=J}}function Gy(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Ky(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Gy(a[t],s)}var vo=O(null),qc=O(0);function $y(t,s){t=ki,ae(qc,t),ae(vo,s),ki=t|s.baseLanes}function Pd(){ae(qc,ki),ae(vo,vo.current)}function jd(){ki=qc.current,X(vo),X(qc)}var Jn=O(null),gs=null;function br(t){var s=t.alternate;ae(Lt,Lt.current&1),ae(Jn,t),gs===null&&(s===null||vo.current!==null||s.memoizedState!==null)&&(gs=t)}function Ld(t){ae(Lt,Lt.current),ae(Jn,t),gs===null&&(gs=t)}function Qy(t){t.tag===22?(ae(Lt,Lt.current),ae(Jn,t),gs===null&&(gs=t)):Er()}function Er(){ae(Lt,Lt.current),ae(Jn,Jn.current)}function Wn(t){X(Jn),gs===t&&(gs=null),X(Lt)}var Lt=O(0);function Hc(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Fm(a)||Gm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ai=0,Ve=null,at=null,Kt=null,Fc=!1,bo=!1,Na=!1,Gc=0,Ul=0,Eo=null,xS=0;function kt(){throw Error(r(321))}function Ud(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Yn(t[a],s[a]))return!1;return!0}function zd(t,s,a,l,h,d){return Ai=d,Ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=t===null||t.memoizedState===null?M_:tm,Na=!1,d=a(l,h),Na=!1,bo&&(d=Xy(s,a,l,h)),Yy(t),d}function Yy(t){K.H=ql;var s=at!==null&&at.next!==null;if(Ai=0,Kt=at=Ve=null,Fc=!1,Ul=0,Eo=null,s)throw Error(r(300));t===null||$t||(t=t.dependencies,t!==null&&Vc(t)&&($t=!0))}function Xy(t,s,a,l){Ve=t;var h=0;do{if(bo&&(Eo=null),Ul=0,bo=!1,25<=h)throw Error(r(301));if(h+=1,Kt=at=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=D_,d=s(a,l)}while(bo);return d}function RS(){var t=K.H,s=t.useState()[0];return s=typeof s.then=="function"?zl(s):s,t=t.useState()[0],(at!==null?at.memoizedState:null)!==t&&(Ve.flags|=1024),s}function Bd(){var t=Gc!==0;return Gc=0,t}function qd(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Hd(t){if(Fc){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Fc=!1}Ai=0,Kt=at=Ve=null,bo=!1,Ul=Gc=0,Eo=null}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ve.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function Ut(){if(at===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var s=Kt===null?Ve.memoizedState:Kt.next;if(s!==null)Kt=s,at=t;else{if(t===null)throw Ve.alternate===null?Error(r(467)):Error(r(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Kt===null?Ve.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function Kc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zl(t){var s=Ul;return Ul+=1,Eo===null&&(Eo=[]),t=zy(Eo,t,s),s=Ve,(Kt===null?s.memoizedState:Kt.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?M_:tm),t}function $c(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return zl(t);if(t.$$typeof===ye)return un(t)}throw Error(r(438,String(t)))}function Fd(t){var s=null,a=Ve.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Kc(),Ve.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=V;return s.index++,a}function xi(t,s){return typeof s=="function"?s(t):s}function Qc(t){var s=Ut();return Gd(s,at,t)}function Gd(t,s,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}s.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{s=h.next;var E=_=null,N=null,B=s,Q=!1;do{var J=B.lane&-536870913;if(J!==B.lane?(He&J)===J:(Ai&J)===J){var q=B.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),J===po&&(Q=!0);else if((Ai&q)===q){B=B.next,q===po&&(Q=!0);continue}else J={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(E=N=J,_=d):N=N.next=J,Ve.lanes|=q,Sr|=q;J=B.action,Na&&a(d,J),d=B.hasEagerState?B.eagerState:a(d,J)}else q={lane:J,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(E=N=q,_=d):N=N.next=q,Ve.lanes|=J,Sr|=J;B=B.next}while(B!==null&&B!==s);if(N===null?_=d:N.next=E,!Yn(d,t.memoizedState)&&($t=!0,Q&&(a=go,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=N,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Kd(t){var s=Ut(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=s.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);Yn(d,s.memoizedState)||($t=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function Jy(t,s,a){var l=Ve,h=Ut(),d=Qe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var _=!Yn((at||h).memoizedState,a);if(_&&(h.memoizedState=a,$t=!0),h=h.queue,Yd(e_.bind(null,l,h,t),[t]),h.getSnapshot!==s||_||Kt!==null&&Kt.memoizedState.tag&1){if(l.flags|=2048,To(9,{destroy:void 0},Zy.bind(null,l,h,a,s),null),yt===null)throw Error(r(349));d||(Ai&127)!==0||Wy(l,s,a)}return a}function Wy(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ve.updateQueue,s===null?(s=Kc(),Ve.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Zy(t,s,a,l){s.value=a,s.getSnapshot=l,t_(s)&&n_(t)}function e_(t,s,a){return a(function(){t_(s)&&n_(t)})}function t_(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Yn(t,a)}catch{return!0}}function n_(t){var s=va(t,2);s!==null&&zn(s,t,2)}function $d(t){var s=xn();if(typeof t=="function"){var a=t;if(t=a(),Na){Pt(!0);try{a()}finally{Pt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:t},s}function s_(t,s,a,l){return t.baseState=a,Gd(t,at,typeof l=="function"?l:xi)}function NS(t,s,a,l,h){if(Jc(t))throw Error(r(485));if(t=s.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,i_(s,d)):(d.next=a.next,s.pending=a.next=d)}}function i_(t,s){var a=s.action,l=s.payload,h=t.state;if(s.isTransition){var d=K.T,_={};K.T=_;try{var E=a(h,l),N=K.S;N!==null&&N(_,E),r_(t,s,E)}catch(B){Qd(t,s,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),K.T=d}}else try{d=a(h,l),r_(t,s,d)}catch(B){Qd(t,s,B)}}function r_(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){a_(t,s,l)},function(l){return Qd(t,s,l)}):a_(t,s,a)}function a_(t,s,a){s.status="fulfilled",s.value=a,o_(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,i_(t,a)))}function Qd(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,o_(s),s=s.next;while(s!==l)}t.action=null}function o_(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function l_(t,s){return s}function u_(t,s){if(Qe){var a=yt.formState;if(a!==null){e:{var l=Ve;if(Qe){if(Tt){t:{for(var h=Tt,d=ps;h.nodeType!==8;){if(!d){h=null;break t}if(h=ys(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Tt=ys(h.nextSibling),l=h.data==="F!";break e}}pr(l)}l=!1}l&&(s=a[0])}}return a=xn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l_,lastRenderedState:s},a.queue=l,a=N_.bind(null,Ve,l),l.dispatch=a,l=$d(!1),d=em.bind(null,Ve,!1,l.queue),l=xn(),h={state:s,dispatch:null,action:t,pending:null},l.queue=h,a=NS.bind(null,Ve,h,d,a),h.dispatch=a,l.memoizedState=t,[s,a,!1]}function c_(t){var s=Ut();return h_(s,at,t)}function h_(t,s,a){if(s=Gd(t,s,l_)[0],t=Qc(xi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=zl(s)}catch(_){throw _===yo?Lc:_}else l=s;s=Ut();var h=s.queue,d=h.dispatch;return a!==s.memoizedState&&(Ve.flags|=2048,To(9,{destroy:void 0},CS.bind(null,h,a),null)),[l,d,t]}function CS(t,s){t.action=s}function f_(t){var s=Ut(),a=at;if(a!==null)return h_(s,a,t);Ut(),s=s.memoizedState,a=Ut();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function To(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Ve.updateQueue,s===null&&(s=Kc(),Ve.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function d_(){return Ut().memoizedState}function Yc(t,s,a,l){var h=xn();Ve.flags|=t,h.memoizedState=To(1|s,{destroy:void 0},a,l===void 0?null:l)}function Xc(t,s,a,l){var h=Ut();l=l===void 0?null:l;var d=h.memoizedState.inst;at!==null&&l!==null&&Ud(l,at.memoizedState.deps)?h.memoizedState=To(s,d,a,l):(Ve.flags|=t,h.memoizedState=To(1|s,d,a,l))}function m_(t,s){Yc(8390656,8,t,s)}function Yd(t,s){Xc(2048,8,t,s)}function IS(t){Ve.flags|=4;var s=Ve.updateQueue;if(s===null)s=Kc(),Ve.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function p_(t){var s=Ut().memoizedState;return IS({ref:s,nextImpl:t}),function(){if((et&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function g_(t,s){return Xc(4,2,t,s)}function y_(t,s){return Xc(4,4,t,s)}function __(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function v_(t,s,a){a=a!=null?a.concat([t]):null,Xc(4,4,__.bind(null,s,t),a)}function Xd(){}function b_(t,s){var a=Ut();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Ud(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function E_(t,s){var a=Ut();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Ud(s,l[1]))return l[0];if(l=t(),Na){Pt(!0);try{t()}finally{Pt(!1)}}return a.memoizedState=[l,s],l}function Jd(t,s,a){return a===void 0||(Ai&1073741824)!==0&&(He&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=T0(),Ve.lanes|=t,Sr|=t,a)}function T_(t,s,a,l){return Yn(a,s)?a:vo.current!==null?(t=Jd(t,a,l),Yn(t,s)||($t=!0),t):(Ai&42)===0||(Ai&1073741824)!==0&&(He&261930)===0?($t=!0,t.memoizedState=a):(t=T0(),Ve.lanes|=t,Sr|=t,s)}function w_(t,s,a,l,h){var d=re.p;re.p=d!==0&&8>d?d:8;var _=K.T,E={};K.T=E,em(t,!1,s,a);try{var N=h(),B=K.S;if(B!==null&&B(E,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=AS(N,l);Bl(t,s,Q,ts(t))}else Bl(t,s,l,ts(t))}catch(J){Bl(t,s,{then:function(){},status:"rejected",reason:J},ts())}finally{re.p=d,_!==null&&E.types!==null&&(_.types=E.types),K.T=_}}function MS(){}function Wd(t,s,a,l){if(t.tag!==5)throw Error(r(476));var h=S_(t).queue;w_(t,h,s,me,a===null?MS:function(){return A_(t),a(l)})}function S_(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:me},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function A_(t){var s=S_(t);s.next===null&&(s=t.alternate.memoizedState),Bl(t,s.next.queue,{},ts())}function Zd(){return un(iu)}function x_(){return Ut().memoizedState}function R_(){return Ut().memoizedState}function DS(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=ts();t=_r(a);var l=vr(s,t,a);l!==null&&(zn(l,s,a),Pl(l,s,a)),s={cache:Nd()},t.payload=s;return}s=s.return}}function kS(t,s,a){var l=ts();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Jc(t)?C_(s,a):(a=yd(t,s,a,l),a!==null&&(zn(a,t,l),I_(a,s,l)))}function N_(t,s,a){var l=ts();Bl(t,s,a,l)}function Bl(t,s,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Jc(t))C_(s,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var _=s.lastRenderedState,E=d(_,a);if(h.hasEagerState=!0,h.eagerState=E,Yn(E,_))return Mc(t,s,h,0),yt===null&&Ic(),!1}catch{}if(a=yd(t,s,h,l),a!==null)return zn(a,t,l),I_(a,s,l),!0}return!1}function em(t,s,a,l){if(l={lane:2,revertLane:Dm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Jc(t)){if(s)throw Error(r(479))}else s=yd(t,a,l,2),s!==null&&zn(s,t,2)}function Jc(t){var s=t.alternate;return t===Ve||s!==null&&s===Ve}function C_(t,s){bo=Fc=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function I_(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Zi(t,a)}}var ql={readContext:un,use:$c,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};ql.useEffectEvent=kt;var M_={readContext:un,use:$c,useCallback:function(t,s){return xn().memoizedState=[t,s===void 0?null:s],t},useContext:un,useEffect:m_,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Yc(4194308,4,__.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Yc(4194308,4,t,s)},useInsertionEffect:function(t,s){Yc(4,2,t,s)},useMemo:function(t,s){var a=xn();s=s===void 0?null:s;var l=t();if(Na){Pt(!0);try{t()}finally{Pt(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=xn();if(a!==void 0){var h=a(s);if(Na){Pt(!0);try{a(s)}finally{Pt(!1)}}}else h=s;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=kS.bind(null,Ve,t),[l.memoizedState,t]},useRef:function(t){var s=xn();return t={current:t},s.memoizedState=t},useState:function(t){t=$d(t);var s=t.queue,a=N_.bind(null,Ve,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Xd,useDeferredValue:function(t,s){var a=xn();return Jd(a,t,s)},useTransition:function(){var t=$d(!1);return t=w_.bind(null,Ve,t.queue,!0,!1),xn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Ve,h=xn();if(Qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),yt===null)throw Error(r(349));(He&127)!==0||Wy(l,s,a)}h.memoizedState=a;var d={value:a,getSnapshot:s};return h.queue=d,m_(e_.bind(null,l,d,t),[t]),l.flags|=2048,To(9,{destroy:void 0},Zy.bind(null,l,d,a,s),null),a},useId:function(){var t=xn(),s=yt.identifierPrefix;if(Qe){var a=Js,l=Xs;a=(l&~(1<<32-vt(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Gc++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=xS++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Zd,useFormState:u_,useActionState:u_,useOptimistic:function(t){var s=xn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=em.bind(null,Ve,!0,a),a.dispatch=s,[t,s]},useMemoCache:Fd,useCacheRefresh:function(){return xn().memoizedState=DS.bind(null,Ve)},useEffectEvent:function(t){var s=xn(),a={impl:t};return s.memoizedState=a,function(){if((et&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},tm={readContext:un,use:$c,useCallback:b_,useContext:un,useEffect:Yd,useImperativeHandle:v_,useInsertionEffect:g_,useLayoutEffect:y_,useMemo:E_,useReducer:Qc,useRef:d_,useState:function(){return Qc(xi)},useDebugValue:Xd,useDeferredValue:function(t,s){var a=Ut();return T_(a,at.memoizedState,t,s)},useTransition:function(){var t=Qc(xi)[0],s=Ut().memoizedState;return[typeof t=="boolean"?t:zl(t),s]},useSyncExternalStore:Jy,useId:x_,useHostTransitionStatus:Zd,useFormState:c_,useActionState:c_,useOptimistic:function(t,s){var a=Ut();return s_(a,at,t,s)},useMemoCache:Fd,useCacheRefresh:R_};tm.useEffectEvent=p_;var D_={readContext:un,use:$c,useCallback:b_,useContext:un,useEffect:Yd,useImperativeHandle:v_,useInsertionEffect:g_,useLayoutEffect:y_,useMemo:E_,useReducer:Kd,useRef:d_,useState:function(){return Kd(xi)},useDebugValue:Xd,useDeferredValue:function(t,s){var a=Ut();return at===null?Jd(a,t,s):T_(a,at.memoizedState,t,s)},useTransition:function(){var t=Kd(xi)[0],s=Ut().memoizedState;return[typeof t=="boolean"?t:zl(t),s]},useSyncExternalStore:Jy,useId:x_,useHostTransitionStatus:Zd,useFormState:f_,useActionState:f_,useOptimistic:function(t,s){var a=Ut();return at!==null?s_(a,at,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Fd,useCacheRefresh:R_};D_.useEffectEvent=p_;function nm(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:S({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var sm={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=ts(),h=_r(l);h.payload=s,a!=null&&(h.callback=a),s=vr(t,h,l),s!==null&&(zn(s,t,l),Pl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=ts(),h=_r(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=vr(t,h,l),s!==null&&(zn(s,t,l),Pl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=ts(),l=_r(a);l.tag=2,s!=null&&(l.callback=s),s=vr(t,l,a),s!==null&&(zn(s,t,a),Pl(s,t,a))}};function k_(t,s,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):s.prototype&&s.prototype.isPureReactComponent?!Nl(a,l)||!Nl(h,d):!0}function O_(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&sm.enqueueReplaceState(s,s.state,null)}function Ca(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function V_(t){Cc(t)}function P_(t){console.error(t)}function j_(t){Cc(t)}function Wc(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function L_(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function im(t,s,a){return a=_r(a),a.tag=3,a.payload={element:null},a.callback=function(){Wc(t,s)},a}function U_(t){return t=_r(t),t.tag=3,t}function z_(t,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){L_(s,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){L_(s,a,l),typeof h!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function OS(t,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&mo(s,a,h,!0),a=Jn.current,a!==null){switch(a.tag){case 31:case 13:return gs===null?ch():a.alternate===null&&Ot===0&&(Ot=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Uc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Cm(t,l,h)),!1;case 22:return a.flags|=65536,l===Uc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Cm(t,l,h)),!1}throw Error(r(435,a.tag))}return Cm(t,l,h),ch(),!1}if(Qe)return s=Jn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==wd&&(t=Error(r(422),{cause:l}),Ml(fs(t,a)))):(l!==wd&&(s=Error(r(423),{cause:l}),Ml(fs(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=fs(l,a),h=im(t.stateNode,l,h),Od(t,h),Ot!==4&&(Ot=2)),!1;var d=Error(r(520),{cause:l});if(d=fs(d,a),Xl===null?Xl=[d]:Xl.push(d),Ot!==4&&(Ot=2),s===null)return!0;l=fs(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=im(a.stateNode,l,t),Od(a,t),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ar===null||!Ar.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=U_(h),z_(h,t,a,l),Od(a,h),!1}a=a.return}while(a!==null);return!1}var rm=Error(r(461)),$t=!1;function cn(t,s,a,l){s.child=t===null?Fy(s,null,a,l):Ra(s,t.child,a,l)}function B_(t,s,a,l,h){a=a.render;var d=s.ref;if("ref"in l){var _={};for(var E in l)E!=="ref"&&(_[E]=l[E])}else _=l;return wa(s),l=zd(t,s,a,_,d,h),E=Bd(),t!==null&&!$t?(qd(t,s,h),Ri(t,s,h)):(Qe&&E&&Ed(s),s.flags|=1,cn(t,s,l,h),s.child)}function q_(t,s,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!_d(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,H_(t,s,d,l,h)):(t=kc(a.type,null,l,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(d=t.child,!dm(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Nl,a(_,l)&&t.ref===s.ref)return Ri(t,s,h)}return s.flags|=1,t=Ei(d,l),t.ref=s.ref,t.return=s,s.child=t}function H_(t,s,a,l,h){if(t!==null){var d=t.memoizedProps;if(Nl(d,l)&&t.ref===s.ref)if($t=!1,s.pendingProps=l=d,dm(t,h))(t.flags&131072)!==0&&($t=!0);else return s.lanes=t.lanes,Ri(t,s,h)}return am(t,s,a,l,h)}function F_(t,s,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=s.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,s.child=null;return G_(t,s,d,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&jc(s,d!==null?d.cachePool:null),d!==null?$y(s,d):Pd(),Qy(s);else return l=s.lanes=536870912,G_(t,s,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(jc(s,d.cachePool),$y(s,d),Er(),s.memoizedState=null):(t!==null&&jc(s,null),Pd(),Er());return cn(t,s,h,a),s.child}function Hl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function G_(t,s,a,l,h){var d=Id();return d=d===null?null:{parent:Gt._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},t!==null&&jc(s,null),Pd(),Qy(s),t!==null&&mo(t,s,l,!0),s.childLanes=h,null}function Zc(t,s){return s=th({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function K_(t,s,a){return Ra(s,t.child,null,a),t=Zc(s,s.pendingProps),t.flags|=2,Wn(s),s.memoizedState=null,t}function VS(t,s,a){var l=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Qe){if(l.mode==="hidden")return t=Zc(s,l),s.lanes=536870912,Hl(null,t);if(Ld(s),(t=Tt)?(t=iv(t,ps),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:dr!==null?{id:Xs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},a=Cy(t),a.return=s,s.child=a,ln=s,Tt=null)):t=null,t===null)throw pr(s);return s.lanes=536870912,null}return Zc(s,l)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Ld(s),h)if(s.flags&256)s.flags&=-257,s=K_(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if($t||mo(t,s,a,!1),h=(a&t.childLanes)!==0,$t||h){if(l=yt,l!==null&&(_=oa(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,va(t,_),zn(l,t,_),rm;ch(),s=K_(t,s,a)}else t=d.treeContext,Tt=ys(_.nextSibling),ln=s,Qe=!0,mr=null,ps=!1,t!==null&&Dy(s,t),s=Zc(s,l),s.flags|=4096;return s}return t=Ei(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function eh(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function am(t,s,a,l,h){return wa(s),a=zd(t,s,a,l,void 0,h),l=Bd(),t!==null&&!$t?(qd(t,s,h),Ri(t,s,h)):(Qe&&l&&Ed(s),s.flags|=1,cn(t,s,a,h),s.child)}function $_(t,s,a,l,h,d){return wa(s),s.updateQueue=null,a=Xy(s,l,a,h),Yy(t),l=Bd(),t!==null&&!$t?(qd(t,s,d),Ri(t,s,d)):(Qe&&l&&Ed(s),s.flags|=1,cn(t,s,a,d),s.child)}function Q_(t,s,a,l,h){if(wa(s),s.stateNode===null){var d=uo,_=a.contextType;typeof _=="object"&&_!==null&&(d=un(_)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sm,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},Dd(s),_=a.contextType,d.context=typeof _=="object"&&_!==null?un(_):uo,d.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(nm(s,a,_,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&sm.enqueueReplaceState(d,d.state,null),Ll(s,l,d,h),jl(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){d=s.stateNode;var E=s.memoizedProps,N=Ca(a,E);d.props=N;var B=d.context,Q=a.contextType;_=uo,typeof Q=="object"&&Q!==null&&(_=un(Q));var J=a.getDerivedStateFromProps;Q=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||B!==_)&&O_(s,d,l,_),yr=!1;var q=s.memoizedState;d.state=q,Ll(s,l,d,h),jl(),B=s.memoizedState,E||q!==B||yr?(typeof J=="function"&&(nm(s,a,J,l),B=s.memoizedState),(N=yr||k_(s,a,N,l,q,B,_))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=B),d.props=l,d.state=B,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,kd(t,s),_=s.memoizedProps,Q=Ca(a,_),d.props=Q,J=s.pendingProps,q=d.context,B=a.contextType,N=uo,typeof B=="object"&&B!==null&&(N=un(B)),E=a.getDerivedStateFromProps,(B=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==J||q!==N)&&O_(s,d,l,N),yr=!1,q=s.memoizedState,d.state=q,Ll(s,l,d,h),jl();var G=s.memoizedState;_!==J||q!==G||yr||t!==null&&t.dependencies!==null&&Vc(t.dependencies)?(typeof E=="function"&&(nm(s,a,E,l),G=s.memoizedState),(Q=yr||k_(s,a,Q,l,q,G,N)||t!==null&&t.dependencies!==null&&Vc(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,N)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=G),d.props=l,d.state=G,d.context=N,l=Q):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(s.flags|=1024),l=!1)}return d=l,eh(t,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,t!==null&&l?(s.child=Ra(s,t.child,null,h),s.child=Ra(s,null,a,h)):cn(t,s,a,h),s.memoizedState=d.state,t=s.child):t=Ri(t,s,h),t}function Y_(t,s,a,l){return Ea(),s.flags|=256,cn(t,s,a,l),s.child}var om={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lm(t){return{baseLanes:t,cachePool:Ly()}}function um(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=es),t}function X_(t,s,a){var l=s.pendingProps,h=!1,d=(s.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),_&&(h=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(Qe){if(h?br(s):Er(),(t=Tt)?(t=iv(t,ps),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:dr!==null?{id:Xs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},a=Cy(t),a.return=s,s.child=a,ln=s,Tt=null)):t=null,t===null)throw pr(s);return Gm(t)?s.lanes=32:s.lanes=536870912,null}var E=l.children;return l=l.fallback,h?(Er(),h=s.mode,E=th({mode:"hidden",children:E},h),l=ba(l,h,a,null),E.return=s,l.return=s,E.sibling=l,s.child=E,l=s.child,l.memoizedState=lm(a),l.childLanes=um(t,_,a),s.memoizedState=om,Hl(null,l)):(br(s),cm(s,E))}var N=t.memoizedState;if(N!==null&&(E=N.dehydrated,E!==null)){if(d)s.flags&256?(br(s),s.flags&=-257,s=hm(t,s,a)):s.memoizedState!==null?(Er(),s.child=t.child,s.flags|=128,s=null):(Er(),E=l.fallback,h=s.mode,l=th({mode:"visible",children:l.children},h),E=ba(E,h,a,null),E.flags|=2,l.return=s,E.return=s,l.sibling=E,s.child=l,Ra(s,t.child,null,a),l=s.child,l.memoizedState=lm(a),l.childLanes=um(t,_,a),s.memoizedState=om,s=Hl(null,l));else if(br(s),Gm(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(r(419)),l.stack="",l.digest=_,Ml({value:l,source:null,stack:null}),s=hm(t,s,a)}else if($t||mo(t,s,a,!1),_=(a&t.childLanes)!==0,$t||_){if(_=yt,_!==null&&(l=oa(_,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,va(t,l),zn(_,t,l),rm;Fm(E)||ch(),s=hm(t,s,a)}else Fm(E)?(s.flags|=192,s.child=t.child,s=null):(t=N.treeContext,Tt=ys(E.nextSibling),ln=s,Qe=!0,mr=null,ps=!1,t!==null&&Dy(s,t),s=cm(s,l.children),s.flags|=4096);return s}return h?(Er(),E=l.fallback,h=s.mode,N=t.child,B=N.sibling,l=Ei(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,B!==null?E=Ei(B,E):(E=ba(E,h,a,null),E.flags|=2),E.return=s,l.return=s,l.sibling=E,s.child=l,Hl(null,l),l=s.child,E=t.child.memoizedState,E===null?E=lm(a):(h=E.cachePool,h!==null?(N=Gt._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=Ly(),E={baseLanes:E.baseLanes|a,cachePool:h}),l.memoizedState=E,l.childLanes=um(t,_,a),s.memoizedState=om,Hl(t.child,l)):(br(s),a=t.child,t=a.sibling,a=Ei(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=a,s.memoizedState=null,a)}function cm(t,s){return s=th({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function th(t,s){return t=Xn(22,t,null,s),t.lanes=0,t}function hm(t,s,a){return Ra(s,t.child,null,a),t=cm(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function J_(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),xd(t.return,s,a)}function fm(t,s,a,l,h,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function W_(t,s,a){var l=s.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var _=Lt.current,E=(_&2)!==0;if(E?(_=_&1|2,s.flags|=128):_&=1,ae(Lt,_),cn(t,s,l,a),l=Qe?Il:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&J_(t,a,s);else if(t.tag===19)J_(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&Hc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),fm(s,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&Hc(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}fm(s,!0,a,null,d,l);break;case"together":fm(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Ri(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Sr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(mo(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=Ei(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Ei(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function dm(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Vc(t)))}function PS(t,s,a){switch(s.tag){case 3:ft(s,s.stateNode.containerInfo),gr(s,Gt,t.memoizedState.cache),Ea();break;case 27:case 5:Nn(s);break;case 4:ft(s,s.stateNode.containerInfo);break;case 10:gr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ld(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(br(s),s.flags|=128,null):(a&s.child.childLanes)!==0?X_(t,s,a):(br(s),t=Ri(t,s,a),t!==null?t.sibling:null);br(s);break;case 19:var h=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(mo(t,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return W_(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ae(Lt,Lt.current),l)break;return null;case 22:return s.lanes=0,F_(t,s,a,s.pendingProps);case 24:gr(s,Gt,t.memoizedState.cache)}return Ri(t,s,a)}function Z_(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)$t=!0;else{if(!dm(t,a)&&(s.flags&128)===0)return $t=!1,PS(t,s,a);$t=(t.flags&131072)!==0}else $t=!1,Qe&&(s.flags&1048576)!==0&&My(s,Il,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=Aa(s.elementType),s.type=t,typeof t=="function")_d(t)?(l=Ca(t,l),s.tag=1,s=Q_(null,s,t,l,a)):(s.tag=0,s=am(null,s,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===je){s.tag=11,s=B_(null,s,t,l,a);break e}else if(h===R){s.tag=14,s=q_(null,s,t,l,a);break e}}throw s=ht(t)||t,Error(r(306,s,""))}}return s;case 0:return am(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Ca(l,s.pendingProps),Q_(t,s,l,h,a);case 3:e:{if(ft(s,s.stateNode.containerInfo),t===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;h=d.element,kd(t,s),Ll(s,l,null,a);var _=s.memoizedState;if(l=_.cache,gr(s,Gt,l),l!==d.cache&&Rd(s,[Gt],a,!0),jl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=Y_(t,s,l,a);break e}else if(l!==h){h=fs(Error(r(424)),s),Ml(h),s=Y_(t,s,l,a);break e}else for(t=s.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Tt=ys(t.firstChild),ln=s,Qe=!0,mr=null,ps=!0,a=Fy(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ea(),l===h){s=Ri(t,s,a);break e}cn(t,s,l,a)}s=s.child}return s;case 26:return eh(t,s),t===null?(a=cv(s.type,null,s.pendingProps,null))?s.memoizedState=a:Qe||(a=s.type,t=s.pendingProps,l=yh(Me.current).createElement(a),l[Dt]=s,l[Ht]=t,hn(l,a,t),gt(l),s.stateNode=l):s.memoizedState=cv(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Nn(s),t===null&&Qe&&(l=s.stateNode=ov(s.type,s.pendingProps,Me.current),ln=s,ps=!0,h=Tt,Cr(s.type)?(Km=h,Tt=ys(l.firstChild)):Tt=h),cn(t,s,s.pendingProps.children,a),eh(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Qe&&((h=l=Tt)&&(l=fA(l,s.type,s.pendingProps,ps),l!==null?(s.stateNode=l,ln=s,Tt=ys(l.firstChild),ps=!1,h=!0):h=!1),h||pr(s)),Nn(s),h=s.type,d=s.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,Bm(h,d)?l=null:_!==null&&Bm(h,_)&&(s.flags|=32),s.memoizedState!==null&&(h=zd(t,s,RS,null,null,a),iu._currentValue=h),eh(t,s),cn(t,s,l,a),s.child;case 6:return t===null&&Qe&&((t=a=Tt)&&(a=dA(a,s.pendingProps,ps),a!==null?(s.stateNode=a,ln=s,Tt=null,t=!0):t=!1),t||pr(s)),null;case 13:return X_(t,s,a);case 4:return ft(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Ra(s,null,l,a):cn(t,s,l,a),s.child;case 11:return B_(t,s,s.type,s.pendingProps,a);case 7:return cn(t,s,s.pendingProps,a),s.child;case 8:return cn(t,s,s.pendingProps.children,a),s.child;case 12:return cn(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,gr(s,s.type,l.value),cn(t,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,wa(s),h=un(h),l=l(h),s.flags|=1,cn(t,s,l,a),s.child;case 14:return q_(t,s,s.type,s.pendingProps,a);case 15:return H_(t,s,s.type,s.pendingProps,a);case 19:return W_(t,s,a);case 31:return VS(t,s,a);case 22:return F_(t,s,a,s.pendingProps);case 24:return wa(s),l=un(Gt),t===null?(h=Id(),h===null&&(h=yt,d=Nd(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),s.memoizedState={parent:l,cache:h},Dd(s),gr(s,Gt,h)):((t.lanes&a)!==0&&(kd(t,s),Ll(s,null,null,a),jl()),h=t.memoizedState,d=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),gr(s,Gt,l)):(l=d.cache,gr(s,Gt,l),l!==h.cache&&Rd(s,[Gt],a,!0))),cn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Ni(t){t.flags|=4}function mm(t,s,a,l,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(x0())t.flags|=8192;else throw xa=Uc,Md}else t.flags&=-16777217}function e0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!pv(s))if(x0())t.flags|=8192;else throw xa=Uc,Md}function nh(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?aa():536870912,t.lanes|=s,xo|=s)}function Fl(t,s){if(!Qe)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function wt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function jS(t,s,a){var l=s.pendingProps;switch(Td(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(s),null;case 1:return wt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Si(Gt),dt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(fo(s)?Ni(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Sd())),wt(s),null;case 26:var h=s.type,d=s.memoizedState;return t===null?(Ni(s),d!==null?(wt(s),e0(s,d)):(wt(s),mm(s,h,null,l,a))):d?d!==t.memoizedState?(Ni(s),wt(s),e0(s,d)):(wt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ni(s),wt(s),mm(s,h,t,l,a)),null;case 27:if(hi(s),a=Me.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Ni(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return wt(s),null}t=le.current,fo(s)?ky(s):(t=ov(h,l,a),s.stateNode=t,Ni(s))}return wt(s),null;case 5:if(hi(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Ni(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return wt(s),null}if(d=le.current,fo(s))ky(s);else{var _=yh(Me.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}d[Dt]=s,d[Ht]=l;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=d;e:switch(hn(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ni(s)}}return wt(s),mm(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&Ni(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(t=Me.current,fo(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,h=ln,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Dt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||X0(t.nodeValue,a)),t||pr(s,!0)}else t=yh(t).createTextNode(l),t[Dt]=s,s.stateNode=t}return wt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=fo(s),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Dt]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;wt(s),t=!1}else a=Sd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Wn(s),s):(Wn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return wt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=fo(s),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Dt]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;wt(s),h=!1}else h=Sd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Wn(s),s):(Wn(s),null)}return Wn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),nh(s,s.updateQueue),wt(s),null);case 4:return dt(),t===null&&Pm(s.stateNode.containerInfo),wt(s),null;case 10:return Si(s.type),wt(s),null;case 19:if(X(Lt),l=s.memoizedState,l===null)return wt(s),null;if(h=(s.flags&128)!==0,d=l.rendering,d===null)if(h)Fl(l,!1);else{if(Ot!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(d=Hc(t),d!==null){for(s.flags|=128,Fl(l,!1),t=d.updateQueue,s.updateQueue=t,nh(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Ny(a,t),a=a.sibling;return ae(Lt,Lt.current&1|2),Qe&&Ti(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&Bt()>oh&&(s.flags|=128,h=!0,Fl(l,!1),s.lanes=4194304)}else{if(!h)if(t=Hc(d),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,nh(s,t),Fl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Qe)return wt(s),null}else 2*Bt()-l.renderingStartTime>oh&&a!==536870912&&(s.flags|=128,h=!0,Fl(l,!1),s.lanes=4194304);l.isBackwards?(d.sibling=s.child,s.child=d):(t=l.last,t!==null?t.sibling=d:s.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Bt(),t.sibling=null,a=Lt.current,ae(Lt,h?a&1|2:a&1),Qe&&Ti(s,l.treeForkCount),t):(wt(s),null);case 22:case 23:return Wn(s),jd(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(wt(s),s.subtreeFlags&6&&(s.flags|=8192)):wt(s),a=s.updateQueue,a!==null&&nh(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&X(Sa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Si(Gt),wt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function LS(t,s){switch(Td(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Si(Gt),dt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return hi(s),null;case 31:if(s.memoizedState!==null){if(Wn(s),s.alternate===null)throw Error(r(340));Ea()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Wn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ea()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return X(Lt),null;case 4:return dt(),null;case 10:return Si(s.type),null;case 22:case 23:return Wn(s),jd(),t!==null&&X(Sa),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Si(Gt),null;case 25:return null;default:return null}}function t0(t,s){switch(Td(s),s.tag){case 3:Si(Gt),dt();break;case 26:case 27:case 5:hi(s);break;case 4:dt();break;case 31:s.memoizedState!==null&&Wn(s);break;case 13:Wn(s);break;case 19:X(Lt);break;case 10:Si(s.type);break;case 22:case 23:Wn(s),jd(),t!==null&&X(Sa);break;case 24:Si(Gt)}}function Gl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(E){it(s,s.return,E)}}function Tr(t,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,h=s;var N=a,B=E;try{B()}catch(Q){it(h,N,Q)}}}l=l.next}while(l!==d)}}catch(Q){it(s,s.return,Q)}}function n0(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Ky(s,a)}catch(l){it(t,t.return,l)}}}function s0(t,s,a){a.props=Ca(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){it(t,s,l)}}function Kl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){it(t,s,h)}}function Ws(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){it(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){it(t,s,h)}else a.current=null}function i0(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){it(t,t.return,h)}}function pm(t,s,a){try{var l=t.stateNode;aA(l,t.type,a,s),l[Ht]=s}catch(h){it(t,t.return,h)}}function r0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Cr(t.type)||t.tag===4}function gm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||r0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Cr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ym(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=xs));else if(l!==4&&(l===27&&Cr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(ym(t,s,a),t=t.sibling;t!==null;)ym(t,s,a),t=t.sibling}function sh(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&Cr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(sh(t,s,a),t=t.sibling;t!==null;)sh(t,s,a),t=t.sibling}function a0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);hn(s,l,a),s[Dt]=t,s[Ht]=a}catch(d){it(t,t.return,d)}}var Ci=!1,Qt=!1,_m=!1,o0=typeof WeakSet=="function"?WeakSet:Set,sn=null;function US(t,s){if(t=t.containerInfo,Um=Sh,t=vy(t),hd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,E=-1,N=-1,B=0,Q=0,J=t,q=null;t:for(;;){for(var G;J!==a||h!==0&&J.nodeType!==3||(E=_+h),J!==d||l!==0&&J.nodeType!==3||(N=_+l),J.nodeType===3&&(_+=J.nodeValue.length),(G=J.firstChild)!==null;)q=J,J=G;for(;;){if(J===t)break t;if(q===a&&++B===h&&(E=_),q===d&&++Q===l&&(N=_),(G=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=G}a=E===-1||N===-1?null:{start:E,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(zm={focusedElem:t,selectionRange:a},Sh=!1,sn=s;sn!==null;)if(s=sn,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,sn=t;else for(;sn!==null;){switch(s=sn,d=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=s,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var he=Ca(a.type,h);t=l.getSnapshotBeforeUpdate(he,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){it(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Hm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Hm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,sn=t;break}sn=s.return}}function l0(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Mi(t,a),l&4&&Gl(5,a);break;case 1:if(Mi(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(_){it(a,a.return,_)}else{var h=Ca(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){it(a,a.return,_)}}l&64&&n0(a),l&512&&Kl(a,a.return);break;case 3:if(Mi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Ky(t,s)}catch(_){it(a,a.return,_)}}break;case 27:s===null&&l&4&&a0(a);case 26:case 5:Mi(t,a),s===null&&l&4&&i0(a),l&512&&Kl(a,a.return);break;case 12:Mi(t,a);break;case 31:Mi(t,a),l&4&&h0(t,a);break;case 13:Mi(t,a),l&4&&f0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=QS.bind(null,a),mA(t,a))));break;case 22:if(l=a.memoizedState!==null||Ci,!l){s=s!==null&&s.memoizedState!==null||Qt,h=Ci;var d=Qt;Ci=l,(Qt=s)&&!d?Di(t,a,(a.subtreeFlags&8772)!==0):Mi(t,a),Ci=h,Qt=d}break;case 30:break;default:Mi(t,a)}}function u0(t){var s=t.alternate;s!==null&&(t.alternate=null,u0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Z(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var xt=null,Pn=!1;function Ii(t,s,a){for(a=a.child;a!==null;)c0(t,s,a),a=a.sibling}function c0(t,s,a){if($&&typeof $.onCommitFiberUnmount=="function")try{$.onCommitFiberUnmount(Mn,a)}catch{}switch(a.tag){case 26:Qt||Ws(a,s),Ii(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Qt||Ws(a,s);var l=xt,h=Pn;Cr(a.type)&&(xt=a.stateNode,Pn=!1),Ii(t,s,a),tu(a.stateNode),xt=l,Pn=h;break;case 5:Qt||Ws(a,s);case 6:if(l=xt,h=Pn,xt=null,Ii(t,s,a),xt=l,Pn=h,xt!==null)if(Pn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(a.stateNode)}catch(d){it(a,s,d)}else try{xt.removeChild(a.stateNode)}catch(d){it(a,s,d)}break;case 18:xt!==null&&(Pn?(t=xt,nv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Oo(t)):nv(xt,a.stateNode));break;case 4:l=xt,h=Pn,xt=a.stateNode.containerInfo,Pn=!0,Ii(t,s,a),xt=l,Pn=h;break;case 0:case 11:case 14:case 15:Tr(2,a,s),Qt||Tr(4,a,s),Ii(t,s,a);break;case 1:Qt||(Ws(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&s0(a,s,l)),Ii(t,s,a);break;case 21:Ii(t,s,a);break;case 22:Qt=(l=Qt)||a.memoizedState!==null,Ii(t,s,a),Qt=l;break;default:Ii(t,s,a)}}function h0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Oo(t)}catch(a){it(s,s.return,a)}}}function f0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Oo(t)}catch(a){it(s,s.return,a)}}function zS(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new o0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new o0),s;default:throw Error(r(435,t.tag))}}function ih(t,s){var a=zS(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var h=YS.bind(null,t,l);l.then(h,h)}})}function jn(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=s,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(Cr(E.type)){xt=E.stateNode,Pn=!1;break e}break;case 5:xt=E.stateNode,Pn=!1;break e;case 3:case 4:xt=E.stateNode.containerInfo,Pn=!0;break e}E=E.return}if(xt===null)throw Error(r(160));c0(d,_,h),xt=null,Pn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)d0(s,t),s=s.sibling}var Ds=null;function d0(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jn(s,t),Ln(t),l&4&&(Tr(3,t,t.return),Gl(3,t),Tr(5,t,t.return));break;case 1:jn(s,t),Ln(t),l&512&&(Qt||a===null||Ws(a,a.return)),l&64&&Ci&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Ds;if(jn(s,t),Ln(t),l&512&&(Qt||a===null||Ws(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[I]||d[Dt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),hn(d,l,a),d[Dt]=t,gt(d),l=d;break e;case"link":var _=dv("link","href",h).get(l+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(d=_[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}d=h.createElement(l),hn(d,l,a),h.head.appendChild(d);break;case"meta":if(_=dv("meta","content",h).get(l+(a.content||""))){for(E=0;E<_.length;E++)if(d=_[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}d=h.createElement(l),hn(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Dt]=t,gt(d),l=d}t.stateNode=l}else mv(h,t.type,t.stateNode);else t.stateNode=fv(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?mv(h,t.type,t.stateNode):fv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&pm(t,t.memoizedProps,a.memoizedProps)}break;case 27:jn(s,t),Ln(t),l&512&&(Qt||a===null||Ws(a,a.return)),a!==null&&l&4&&pm(t,t.memoizedProps,a.memoizedProps);break;case 5:if(jn(s,t),Ln(t),l&512&&(Qt||a===null||Ws(a,a.return)),t.flags&32){h=t.stateNode;try{Vn(h,"")}catch(he){it(t,t.return,he)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,pm(t,h,a!==null?a.memoizedProps:h)),l&1024&&(_m=!0);break;case 6:if(jn(s,t),Ln(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(he){it(t,t.return,he)}}break;case 3:if(bh=null,h=Ds,Ds=_h(s.containerInfo),jn(s,t),Ds=h,Ln(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Oo(s.containerInfo)}catch(he){it(t,t.return,he)}_m&&(_m=!1,m0(t));break;case 4:l=Ds,Ds=_h(t.stateNode.containerInfo),jn(s,t),Ln(t),Ds=l;break;case 12:jn(s,t),Ln(t);break;case 31:jn(s,t),Ln(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ih(t,l)));break;case 13:jn(s,t),Ln(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ah=Bt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ih(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,B=Ci,Q=Qt;if(Ci=B||h,Qt=Q||N,jn(s,t),Qt=Q,Ci=B,Ln(t),l&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||N||Ci||Qt||Ia(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(d=N.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=N.stateNode;var J=N.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(he){it(N,N.return,he)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(he){it(N,N.return,he)}}}else if(s.tag===18){if(a===null){N=s;try{var G=N.stateNode;h?sv(G,!0):sv(N.stateNode,!1)}catch(he){it(N,N.return,he)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ih(t,a))));break;case 19:jn(s,t),Ln(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ih(t,l)));break;case 30:break;case 21:break;default:jn(s,t),Ln(t)}}function Ln(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(r0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=gm(t);sh(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(Vn(_,""),a.flags&=-33);var E=gm(t);sh(t,E,_);break;case 3:case 4:var N=a.stateNode.containerInfo,B=gm(t);ym(t,B,N);break;default:throw Error(r(161))}}catch(Q){it(t,t.return,Q)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function m0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;m0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Mi(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)l0(t,s.alternate,s),s=s.sibling}function Ia(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Tr(4,s,s.return),Ia(s);break;case 1:Ws(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&s0(s,s.return,a),Ia(s);break;case 27:tu(s.stateNode);case 26:case 5:Ws(s,s.return),Ia(s);break;case 22:s.memoizedState===null&&Ia(s);break;case 30:Ia(s);break;default:Ia(s)}t=t.sibling}}function Di(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=t,d=s,_=d.flags;switch(d.tag){case 0:case 11:case 15:Di(h,d,a),Gl(4,d);break;case 1:if(Di(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){it(l,l.return,B)}if(l=d,h=l.updateQueue,h!==null){var E=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Gy(N[h],E)}catch(B){it(l,l.return,B)}}a&&_&64&&n0(d),Kl(d,d.return);break;case 27:a0(d);case 26:case 5:Di(h,d,a),a&&l===null&&_&4&&i0(d),Kl(d,d.return);break;case 12:Di(h,d,a);break;case 31:Di(h,d,a),a&&_&4&&h0(h,d);break;case 13:Di(h,d,a),a&&_&4&&f0(h,d);break;case 22:d.memoizedState===null&&Di(h,d,a),Kl(d,d.return);break;case 30:break;default:Di(h,d,a)}s=s.sibling}}function vm(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Dl(a))}function bm(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Dl(t))}function ks(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)p0(t,s,a,l),s=s.sibling}function p0(t,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:ks(t,s,a,l),h&2048&&Gl(9,s);break;case 1:ks(t,s,a,l);break;case 3:ks(t,s,a,l),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Dl(t)));break;case 12:if(h&2048){ks(t,s,a,l),t=s.stateNode;try{var d=s.memoizedProps,_=d.id,E=d.onPostCommit;typeof E=="function"&&E(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){it(s,s.return,N)}}else ks(t,s,a,l);break;case 31:ks(t,s,a,l);break;case 13:ks(t,s,a,l);break;case 23:break;case 22:d=s.stateNode,_=s.alternate,s.memoizedState!==null?d._visibility&2?ks(t,s,a,l):$l(t,s):d._visibility&2?ks(t,s,a,l):(d._visibility|=2,wo(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),h&2048&&vm(_,s);break;case 24:ks(t,s,a,l),h&2048&&bm(s.alternate,s);break;default:ks(t,s,a,l)}}function wo(t,s,a,l,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var d=t,_=s,E=a,N=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:wo(d,_,E,N,h),Gl(8,_);break;case 23:break;case 22:var Q=_.stateNode;_.memoizedState!==null?Q._visibility&2?wo(d,_,E,N,h):$l(d,_):(Q._visibility|=2,wo(d,_,E,N,h)),h&&B&2048&&vm(_.alternate,_);break;case 24:wo(d,_,E,N,h),h&&B&2048&&bm(_.alternate,_);break;default:wo(d,_,E,N,h)}s=s.sibling}}function $l(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,h=l.flags;switch(l.tag){case 22:$l(a,l),h&2048&&vm(l.alternate,l);break;case 24:$l(a,l),h&2048&&bm(l.alternate,l);break;default:$l(a,l)}s=s.sibling}}var Ql=8192;function So(t,s,a){if(t.subtreeFlags&Ql)for(t=t.child;t!==null;)g0(t,s,a),t=t.sibling}function g0(t,s,a){switch(t.tag){case 26:So(t,s,a),t.flags&Ql&&t.memoizedState!==null&&xA(a,Ds,t.memoizedState,t.memoizedProps);break;case 5:So(t,s,a);break;case 3:case 4:var l=Ds;Ds=_h(t.stateNode.containerInfo),So(t,s,a),Ds=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ql,Ql=16777216,So(t,s,a),Ql=l):So(t,s,a));break;default:So(t,s,a)}}function y0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Yl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];sn=l,v0(l,t)}y0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)_0(t),t=t.sibling}function _0(t){switch(t.tag){case 0:case 11:case 15:Yl(t),t.flags&2048&&Tr(9,t,t.return);break;case 3:Yl(t);break;case 12:Yl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,rh(t)):Yl(t);break;default:Yl(t)}}function rh(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];sn=l,v0(l,t)}y0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Tr(8,s,s.return),rh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,rh(s));break;default:rh(s)}t=t.sibling}}function v0(t,s){for(;sn!==null;){var a=sn;switch(a.tag){case 0:case 11:case 15:Tr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,sn=l;else e:for(a=t;sn!==null;){l=sn;var h=l.sibling,d=l.return;if(u0(l),l===a){sn=null;break e}if(h!==null){h.return=d,sn=h;break e}sn=d}}}var BS={getCacheForType:function(t){var s=un(Gt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return un(Gt).controller.signal}},qS=typeof WeakMap=="function"?WeakMap:Map,et=0,yt=null,Be=null,He=0,st=0,Zn=null,wr=!1,Ao=!1,Em=!1,ki=0,Ot=0,Sr=0,Ma=0,Tm=0,es=0,xo=0,Xl=null,Un=null,wm=!1,ah=0,b0=0,oh=1/0,lh=null,Ar=null,Wt=0,xr=null,Ro=null,Oi=0,Sm=0,Am=null,E0=null,Jl=0,xm=null;function ts(){return(et&2)!==0&&He!==0?He&-He:K.T!==null?Dm():Ya()}function T0(){if(es===0)if((He&536870912)===0||Qe){var t=bt;bt<<=1,(bt&3932160)===0&&(bt=262144),es=t}else es=536870912;return t=Jn.current,t!==null&&(t.flags|=32),es}function zn(t,s,a){(t===yt&&(st===2||st===9)||t.cancelPendingCommit!==null)&&(No(t,0),Rr(t,He,es,!1)),pi(t,a),((et&2)===0||t!==yt)&&(t===yt&&((et&2)===0&&(Ma|=a),Ot===4&&Rr(t,He,es,!1)),Zs(t))}function w0(t,s,a){if((et&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||Gn(t,s),h=l?GS(t,s):Nm(t,s,!0),d=l;do{if(h===0){Ao&&!l&&Rr(t,s,0,!1);break}else{if(a=t.current.alternate,d&&!HS(a)){h=Nm(t,s,!1),d=!1;continue}if(h===2){if(d=s,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var E=t;h=Xl;var N=E.current.memoizedState.isDehydrated;if(N&&(No(E,_).flags|=256),_=Nm(E,_,!1),_!==2){if(Em&&!N){E.errorRecoveryDisabledLanes|=d,Ma|=d,h=4;break e}d=Un,Un=h,d!==null&&(Un===null?Un=d:Un.push.apply(Un,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){No(t,0),Rr(t,s,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Rr(l,s,es,!wr);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=ah+300-Bt(),10<h)){if(Rr(l,s,es,!wr),Fn(l,0,!0)!==0)break e;Oi=s,l.timeoutHandle=ev(S0.bind(null,l,a,Un,lh,wm,s,es,Ma,xo,wr,d,"Throttled",-0,0),h);break e}S0(l,a,Un,lh,wm,s,es,Ma,xo,wr,d,null,-0,0)}}break}while(!0);Zs(t)}function S0(t,s,a,l,h,d,_,E,N,B,Q,J,q,G){if(t.timeoutHandle=-1,J=s.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xs},g0(s,d,J);var he=(d&62914560)===d?ah-Bt():(d&4194048)===d?b0-Bt():0;if(he=RA(J,he),he!==null){Oi=d,t.cancelPendingCommit=he(D0.bind(null,t,s,d,a,l,h,_,E,N,Q,J,null,q,G)),Rr(t,d,_,!B);return}}D0(t,s,d,a,l,h,_,E,N)}function HS(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Yn(d(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Rr(t,s,a,l){s&=~Tm,s&=~Ma,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var h=s;0<h;){var d=31-vt(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&gi(t,a,s)}function uh(){return(et&6)===0?(Wl(0),!1):!0}function Rm(){if(Be!==null){if(st===0)var t=Be.return;else t=Be,wi=Ta=null,Hd(t),_o=null,Ol=0,t=Be;for(;t!==null;)t0(t.alternate,t),t=t.return;Be=null}}function No(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,uA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Oi=0,Rm(),yt=t,Be=a=Ei(t.current,null),He=s,st=0,Zn=null,wr=!1,Ao=Gn(t,s),Em=!1,xo=es=Tm=Ma=Sr=Ot=0,Un=Xl=null,wm=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var h=31-vt(l),d=1<<h;s|=t[h],l&=~d}return ki=s,Ic(),a}function A0(t,s){Ve=null,K.H=ql,s===yo||s===Lc?(s=By(),st=3):s===Md?(s=By(),st=4):st=s===rm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Zn=s,Be===null&&(Ot=1,Wc(t,fs(s,t.current)))}function x0(){var t=Jn.current;return t===null?!0:(He&4194048)===He?gs===null:(He&62914560)===He||(He&536870912)!==0?t===gs:!1}function R0(){var t=K.H;return K.H=ql,t===null?ql:t}function N0(){var t=K.A;return K.A=BS,t}function ch(){Ot=4,wr||(He&4194048)!==He&&Jn.current!==null||(Ao=!0),(Sr&134217727)===0&&(Ma&134217727)===0||yt===null||Rr(yt,He,es,!1)}function Nm(t,s,a){var l=et;et|=2;var h=R0(),d=N0();(yt!==t||He!==s)&&(lh=null,No(t,s)),s=!1;var _=Ot;e:do try{if(st!==0&&Be!==null){var E=Be,N=Zn;switch(st){case 8:Rm(),_=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(s=!0);var B=st;if(st=0,Zn=null,Co(t,E,N,B),a&&Ao){_=0;break e}break;default:B=st,st=0,Zn=null,Co(t,E,N,B)}}FS(),_=Ot;break}catch(Q){A0(t,Q)}while(!0);return s&&t.shellSuspendCounter++,wi=Ta=null,et=l,K.H=h,K.A=d,Be===null&&(yt=null,He=0,Ic()),_}function FS(){for(;Be!==null;)C0(Be)}function GS(t,s){var a=et;et|=2;var l=R0(),h=N0();yt!==t||He!==s?(lh=null,oh=Bt()+500,No(t,s)):Ao=Gn(t,s);e:do try{if(st!==0&&Be!==null){s=Be;var d=Zn;t:switch(st){case 1:st=0,Zn=null,Co(t,s,d,1);break;case 2:case 9:if(Uy(d)){st=0,Zn=null,I0(s);break}s=function(){st!==2&&st!==9||yt!==t||(st=7),Zs(t)},d.then(s,s);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Uy(d)?(st=0,Zn=null,I0(s)):(st=0,Zn=null,Co(t,s,d,7));break;case 5:var _=null;switch(Be.tag){case 26:_=Be.memoizedState;case 5:case 27:var E=Be;if(_?pv(_):E.stateNode.complete){st=0,Zn=null;var N=E.sibling;if(N!==null)Be=N;else{var B=E.return;B!==null?(Be=B,hh(B)):Be=null}break t}}st=0,Zn=null,Co(t,s,d,5);break;case 6:st=0,Zn=null,Co(t,s,d,6);break;case 8:Rm(),Ot=6;break e;default:throw Error(r(462))}}KS();break}catch(Q){A0(t,Q)}while(!0);return wi=Ta=null,K.H=l,K.A=h,et=a,Be!==null?0:(yt=null,He=0,Ic(),Ot)}function KS(){for(;Be!==null&&!Qa();)C0(Be)}function C0(t){var s=Z_(t.alternate,t,ki);t.memoizedProps=t.pendingProps,s===null?hh(t):Be=s}function I0(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=$_(a,s,s.pendingProps,s.type,void 0,He);break;case 11:s=$_(a,s,s.pendingProps,s.type.render,s.ref,He);break;case 5:Hd(s);default:t0(a,s),s=Be=Ny(s,ki),s=Z_(a,s,ki)}t.memoizedProps=t.pendingProps,s===null?hh(t):Be=s}function Co(t,s,a,l){wi=Ta=null,Hd(s),_o=null,Ol=0;var h=s.return;try{if(OS(t,h,s,a,He)){Ot=1,Wc(t,fs(a,t.current)),Be=null;return}}catch(d){if(h!==null)throw Be=h,d;Ot=1,Wc(t,fs(a,t.current)),Be=null;return}s.flags&32768?(Qe||l===1?t=!0:Ao||(He&536870912)!==0?t=!1:(wr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Jn.current,l!==null&&l.tag===13&&(l.flags|=16384))),M0(s,t)):hh(s)}function hh(t){var s=t;do{if((s.flags&32768)!==0){M0(s,wr);return}t=s.return;var a=jS(s.alternate,s,ki);if(a!==null){Be=a;return}if(s=s.sibling,s!==null){Be=s;return}Be=s=t}while(s!==null);Ot===0&&(Ot=5)}function M0(t,s){do{var a=LS(t.alternate,t);if(a!==null){a.flags&=32767,Be=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Be=t;return}Be=t=a}while(t!==null);Ot=6,Be=null}function D0(t,s,a,l,h,d,_,E,N){t.cancelPendingCommit=null;do fh();while(Wt!==0);if((et&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=gd,fl(t,a,d,_,E,N),t===yt&&(Be=yt=null,He=0),Ro=s,xr=t,Oi=a,Sm=d,Am=h,E0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,XS(rs,function(){return j0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=re.p,re.p=2,_=et,et|=4;try{US(t,s,a)}finally{et=_,re.p=h,K.T=l}}Wt=1,k0(),O0(),V0()}}function k0(){if(Wt===1){Wt=0;var t=xr,s=Ro,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=re.p;re.p=2;var h=et;et|=4;try{d0(s,t);var d=zm,_=vy(t.containerInfo),E=d.focusedElem,N=d.selectionRange;if(_!==E&&E&&E.ownerDocument&&_y(E.ownerDocument.documentElement,E)){if(N!==null&&hd(E)){var B=N.start,Q=N.end;if(Q===void 0&&(Q=B),"selectionStart"in E)E.selectionStart=B,E.selectionEnd=Math.min(Q,E.value.length);else{var J=E.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var G=q.getSelection(),he=E.textContent.length,we=Math.min(N.start,he),lt=N.end===void 0?we:Math.min(N.end,he);!G.extend&&we>lt&&(_=lt,lt=we,we=_);var j=yy(E,we),k=yy(E,lt);if(j&&k&&(G.rangeCount!==1||G.anchorNode!==j.node||G.anchorOffset!==j.offset||G.focusNode!==k.node||G.focusOffset!==k.offset)){var z=J.createRange();z.setStart(j.node,j.offset),G.removeAllRanges(),we>lt?(G.addRange(z),G.extend(k.node,k.offset)):(z.setEnd(k.node,k.offset),G.addRange(z))}}}}for(J=[],G=E;G=G.parentNode;)G.nodeType===1&&J.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<J.length;E++){var Y=J[E];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Sh=!!Um,zm=Um=null}finally{et=h,re.p=l,K.T=a}}t.current=s,Wt=2}}function O0(){if(Wt===2){Wt=0;var t=xr,s=Ro,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=re.p;re.p=2;var h=et;et|=4;try{l0(t,s.alternate,s)}finally{et=h,re.p=l,K.T=a}}Wt=3}}function V0(){if(Wt===4||Wt===3){Wt=0,ra();var t=xr,s=Ro,a=Oi,l=E0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Wt=5:(Wt=0,Ro=xr=null,P0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ar=null),As(a),s=s.stateNode,$&&typeof $.onCommitFiberRoot=="function")try{$.onCommitFiberRoot(Mn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=K.T,h=re.p,re.p=2,K.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var E=l[_];d(E.value,{componentStack:E.stack})}}finally{K.T=s,re.p=h}}(Oi&3)!==0&&fh(),Zs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===xm?Jl++:(Jl=0,xm=t):Jl=0,Wl(0)}}function P0(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Dl(s)))}function fh(){return k0(),O0(),V0(),j0()}function j0(){if(Wt!==5)return!1;var t=xr,s=Sm;Sm=0;var a=As(Oi),l=K.T,h=re.p;try{re.p=32>a?32:a,K.T=null,a=Am,Am=null;var d=xr,_=Oi;if(Wt=0,Ro=xr=null,Oi=0,(et&6)!==0)throw Error(r(331));var E=et;if(et|=4,_0(d.current),p0(d,d.current,_,a),et=E,Wl(0,!1),$&&typeof $.onPostCommitFiberRoot=="function")try{$.onPostCommitFiberRoot(Mn,d)}catch{}return!0}finally{re.p=h,K.T=l,P0(t,s)}}function L0(t,s,a){s=fs(a,s),s=im(t.stateNode,s,2),t=vr(t,s,2),t!==null&&(pi(t,2),Zs(t))}function it(t,s,a){if(t.tag===3)L0(t,t,a);else for(;s!==null;){if(s.tag===3){L0(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ar===null||!Ar.has(l))){t=fs(a,t),a=U_(2),l=vr(s,a,2),l!==null&&(z_(a,l,s,t),pi(l,2),Zs(l));break}}s=s.return}}function Cm(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new qS;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(Em=!0,h.add(a),t=$S.bind(null,t,s,a),s.then(t,t))}function $S(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,yt===t&&(He&a)===a&&(Ot===4||Ot===3&&(He&62914560)===He&&300>Bt()-ah?(et&2)===0&&No(t,0):Tm|=a,xo===He&&(xo=0)),Zs(t)}function U0(t,s){s===0&&(s=aa()),t=va(t,s),t!==null&&(pi(t,s),Zs(t))}function QS(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),U0(t,a)}function YS(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),U0(t,a)}function XS(t,s){return mt(t,s)}var dh=null,Io=null,Im=!1,mh=!1,Mm=!1,Nr=0;function Zs(t){t!==Io&&t.next===null&&(Io===null?dh=Io=t:Io=Io.next=t),mh=!0,Im||(Im=!0,WS())}function Wl(t,s){if(!Mm&&mh){Mm=!0;do for(var a=!1,l=dh;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-vt(42|t)+1)-1,d&=h&~(_&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,H0(l,d))}else d=He,d=Fn(l,l===yt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Gn(l,d)||(a=!0,H0(l,d));l=l.next}while(a);Mm=!1}}function JS(){z0()}function z0(){mh=Im=!1;var t=0;Nr!==0&&lA()&&(t=Nr);for(var s=Bt(),a=null,l=dh;l!==null;){var h=l.next,d=B0(l,s);d===0?(l.next=null,a===null?dh=h:a.next=h,h===null&&(Io=a)):(a=l,(t!==0||(d&3)!==0)&&(mh=!0)),l=h}Wt!==0&&Wt!==5||Wl(t),Nr!==0&&(Nr=0)}function B0(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-vt(d),E=1<<_,N=h[_];N===-1?((E&a)===0||(E&l)!==0)&&(h[_]=hl(E,s)):N<=s&&(t.expiredLanes|=E),d&=~E}if(s=yt,a=He,a=Fn(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(st===2||st===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Bs(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Gn(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&Bs(l),As(a)){case 2:case 8:a=qt;break;case 32:a=rs;break;case 268435456:a=Xi;break;default:a=rs}return l=q0.bind(null,t),a=mt(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&Bs(l),t.callbackPriority=2,t.callbackNode=null,2}function q0(t,s){if(Wt!==0&&Wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(fh()&&t.callbackNode!==a)return null;var l=He;return l=Fn(t,t===yt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(w0(t,l,s),B0(t,Bt()),t.callbackNode!=null&&t.callbackNode===a?q0.bind(null,t):null)}function H0(t,s){if(fh())return null;w0(t,s,!0)}function WS(){cA(function(){(et&6)!==0?mt(Vt,JS):z0()})}function Dm(){if(Nr===0){var t=po;t===0&&(t=pe,pe<<=1,(pe&261888)===0&&(pe=256)),Nr=t}return Nr}function F0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Za(""+t)}function G0(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function ZS(t,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var d=F0((h[Ht]||null).action),_=l.submitter;_&&(s=(s=_[Ht]||null)?F0(s.formAction):_.getAttribute("formAction"),s!==null&&(d=s,_=null));var E=new Ks("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Nr!==0){var N=_?G0(h,_):new FormData(h);Wd(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(E.preventDefault(),N=_?G0(h,_):new FormData(h),Wd(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var km=0;km<pd.length;km++){var Om=pd[km],eA=Om.toLowerCase(),tA=Om[0].toUpperCase()+Om.slice(1);Ms(eA,"on"+tA)}Ms(Ty,"onAnimationEnd"),Ms(wy,"onAnimationIteration"),Ms(Sy,"onAnimationStart"),Ms("dblclick","onDoubleClick"),Ms("focusin","onFocus"),Ms("focusout","onBlur"),Ms(yS,"onTransitionRun"),Ms(_S,"onTransitionStart"),Ms(vS,"onTransitionCancel"),Ms(Ay,"onTransitionEnd"),Sn("onMouseEnter",["mouseout","mouseover"]),Sn("onMouseLeave",["mouseout","mouseover"]),Sn("onPointerEnter",["pointerout","pointerover"]),Sn("onPointerLeave",["pointerout","pointerover"]),Et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Et("onBeforeInput",["compositionend","keypress","textInput","paste"]),Et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function K0(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(s)for(var _=l.length-1;0<=_;_--){var E=l[_],N=E.instance,B=E.currentTarget;if(E=E.listener,N!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=B;try{d(h)}catch(Q){Cc(Q)}h.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(E=l[_],N=E.instance,B=E.currentTarget,E=E.listener,N!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=B;try{d(h)}catch(Q){Cc(Q)}h.currentTarget=null,d=N}}}}function qe(t,s){var a=s[er];a===void 0&&(a=s[er]=new Set);var l=t+"__bubble";a.has(l)||($0(s,t,2,!1),a.add(l))}function Vm(t,s,a){var l=0;s&&(l|=4),$0(a,t,l,s)}var ph="_reactListening"+Math.random().toString(36).slice(2);function Pm(t){if(!t[ph]){t[ph]=!0,kn.forEach(function(a){a!=="selectionchange"&&(nA.has(a)||Vm(a,!1,t),Vm(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ph]||(s[ph]=!0,Vm("selectionchange",!1,s))}}function $0(t,s,a,l){switch(Tv(s)){case 2:var h=IA;break;case 8:h=MA;break;default:h=Jm}a=h.bind(null,s,a,t),h=void 0,!ha||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function jm(t,s,a,l,h){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var E=l.stateNode.containerInfo;if(E===h)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;E!==null;){if(_=de(E),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue e}E=E.parentNode}}l=l.return}ur(function(){var B=d,Q=ls(a),J=[];e:{var q=xy.get(t);if(q!==void 0){var G=Ks,he=t;switch(t){case"keypress":if(da(a)===0)break e;case"keydown":case"keyup":G=xc;break;case"focusin":he="focus",G=pa;break;case"focusout":he="blur",G=pa;break;case"beforeblur":case"afterblur":G=pa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=yc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=p;break;case Ty:case wy:case Sy:G=vc;break;case Ay:G=w;break;case"scroll":case"scrollend":G=wl;break;case"wheel":G=F;break;case"copy":case"cut":case"paste":G=bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=bi;break;case"toggle":case"beforetoggle":G=Oe}var we=(s&4)!==0,lt=!we&&(t==="scroll"||t==="scrollend"),j=we?q!==null?q+"Capture":null:q;we=[];for(var k=B,z;k!==null;){var Y=k;if(z=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||z===null||j===null||(Y=Rs(k,j),Y!=null&&we.push(eu(k,Y,z))),lt)break;k=k.return}0<we.length&&(q=new G(q,he,null,a,Q),J.push({event:q,listeners:we}))}}if((s&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",q&&a!==bl&&(he=a.relatedTarget||a.fromElement)&&(de(he)||he[os]))break e;if((G||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,G?(he=a.relatedTarget||a.toElement,G=B,he=he?de(he):null,he!==null&&(lt=u(he),we=he.tag,he!==lt||we!==5&&we!==27&&we!==6)&&(he=null)):(G=null,he=B),G!==he)){if(we=Sl,Y="onMouseLeave",j="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(we=bi,Y="onPointerLeave",j="onPointerEnter",k="pointer"),lt=G==null?q:ke(G),z=he==null?q:ke(he),q=new we(Y,k+"leave",G,a,Q),q.target=lt,q.relatedTarget=z,Y=null,de(Q)===B&&(we=new we(j,k+"enter",he,a,Q),we.target=z,we.relatedTarget=lt,Y=we),lt=Y,G&&he)t:{for(we=sA,j=G,k=he,z=0,Y=j;Y;Y=we(Y))z++;Y=0;for(var Ee=k;Ee;Ee=we(Ee))Y++;for(;0<z-Y;)j=we(j),z--;for(;0<Y-z;)k=we(k),Y--;for(;z--;){if(j===k||k!==null&&j===k.alternate){we=j;break t}j=we(j),k=we(k)}we=null}else we=null;G!==null&&Q0(J,q,G,we,!1),he!==null&&lt!==null&&Q0(J,lt,he,we,!0)}}e:{if(q=B?ke(B):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var Je=hy;else if(uy(q))if(fy)Je=mS;else{Je=fS;var ge=hS}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&Wa(B.elementType)&&(Je=hy):Je=dS;if(Je&&(Je=Je(t,B))){cy(J,Je,a,Q);break e}ge&&ge(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&yl(q,"number",q.value)}switch(ge=B?ke(B):window,t){case"focusin":(uy(ge)||ge.contentEditable==="true")&&(ao=ge,fd=B,Cl=null);break;case"focusout":Cl=fd=ao=null;break;case"mousedown":dd=!0;break;case"contextmenu":case"mouseup":case"dragend":dd=!1,by(J,a,Q);break;case"selectionchange":if(gS)break;case"keydown":case"keyup":by(J,a,Q)}var Pe;if(Ze)e:{switch(t){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else ro?ga(t,a)&&(Fe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Fe="onCompositionStart");Fe&&(Ys&&a.locale!=="ko"&&(ro||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&ro&&(Pe=Tl()):(Gs=Q,El="value"in Gs?Gs.value:Gs.textContent,ro=!0)),ge=gh(B,Fe),0<ge.length&&(Fe=new Qs(Fe,t,null,a,Q),J.push({event:Fe,listeners:ge}),Pe?Fe.data=Pe:(Pe=io(a),Pe!==null&&(Fe.data=Pe)))),(Pe=cs?oS(t,a):lS(t,a))&&(Fe=gh(B,"onBeforeInput"),0<Fe.length&&(ge=new Qs("onBeforeInput","beforeinput",null,a,Q),J.push({event:ge,listeners:Fe}),ge.data=Pe)),ZS(J,t,B,a,Q)}K0(J,s)})}function eu(t,s,a){return{instance:t,listener:s,currentTarget:a}}function gh(t,s){for(var a=s+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Rs(t,a),h!=null&&l.unshift(eu(t,h,d)),h=Rs(t,s),h!=null&&l.push(eu(t,h,d))),t.tag===3)return l;t=t.return}return[]}function sA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Q0(t,s,a,l,h){for(var d=s._reactName,_=[];a!==null&&a!==l;){var E=a,N=E.alternate,B=E.stateNode;if(E=E.tag,N!==null&&N===l)break;E!==5&&E!==26&&E!==27||B===null||(N=B,h?(B=Rs(a,d),B!=null&&_.unshift(eu(a,B,N))):h||(B=Rs(a,d),B!=null&&_.push(eu(a,B,N)))),a=a.return}_.length!==0&&t.push({event:s,listeners:_})}var iA=/\r\n?/g,rA=/\u0000|\uFFFD/g;function Y0(t){return(typeof t=="string"?t:""+t).replace(iA,`
`).replace(rA,"")}function X0(t,s){return s=Y0(s),Y0(t)===s}function ot(t,s,a,l,h,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Vn(t,""+l);break;case"className":Qn(t,"class",l);break;case"tabIndex":Qn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Qn(t,a,l);break;case"style":vl(t,l,d);break;case"data":if(s!=="object"){Qn(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Za(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&ot(t,s,"name",h.name,h,null),ot(t,s,"formEncType",h.formEncType,h,null),ot(t,s,"formMethod",h.formMethod,h,null),ot(t,s,"formTarget",h.formTarget,h,null)):(ot(t,s,"encType",h.encType,h,null),ot(t,s,"method",h.method,h,null),ot(t,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Za(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=xs);break;case"onScroll":l!=null&&qe("scroll",t);break;case"onScrollEnd":l!=null&&qe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Za(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":qe("beforetoggle",t),qe("toggle",t),Xa(t,"popover",l);break;case"xlinkActuate":Ft(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ft(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ft(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ft(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ft(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ft(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ft(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xa(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=gc.get(a)||a,Xa(t,a,l))}}function Lm(t,s,a,l,h,d){switch(a){case"style":vl(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&Vn(t,""+l);break;case"onScroll":l!=null&&qe("scroll",t);break;case"onScrollEnd":l!=null&&qe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=xs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),d=t[Ht]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(s,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Xa(t,a,l)}}}function hn(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",t),qe("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ot(t,s,d,_,a,null)}}h&&ot(t,s,"srcSet",a.srcSet,a,null),l&&ot(t,s,"src",a.src,a,null);return;case"input":qe("invalid",t);var E=d=_=h=null,N=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":h=Q;break;case"type":_=Q;break;case"checked":N=Q;break;case"defaultChecked":B=Q;break;case"value":d=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:ot(t,s,l,Q,a,null)}}dc(t,d,E,N,B,_,h,!1);return;case"select":qe("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":_=E;break;case"multiple":l=E;default:ot(t,s,h,E,a,null)}s=d,a=_,t.multiple=!!l,s!=null?rr(t,!!l,s,!1):a!=null&&rr(t,!!l,a,!0);return;case"textarea":qe("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":l=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:ot(t,s,_,E,a,null)}ar(t,l,h,d);return;case"option":for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!=null)&&(N==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":ot(t,s,N,l,a,null));return;case"dialog":qe("beforetoggle",t),qe("toggle",t),qe("cancel",t),qe("close",t);break;case"iframe":case"object":qe("load",t);break;case"video":case"audio":for(l=0;l<Zl.length;l++)qe(Zl[l],t);break;case"image":qe("error",t),qe("load",t);break;case"details":qe("toggle",t);break;case"embed":case"source":case"link":qe("error",t),qe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ot(t,s,B,l,a,null)}return;default:if(Wa(s)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&Lm(t,s,Q,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&ot(t,s,E,l,a,null))}function aA(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,E=null,N=null,B=null,Q=null;for(G in a){var J=a[G];if(a.hasOwnProperty(G)&&J!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=J;default:l.hasOwnProperty(G)||ot(t,s,G,null,l,J)}}for(var q in l){var G=l[q];if(J=a[q],l.hasOwnProperty(q)&&(G!=null||J!=null))switch(q){case"type":d=G;break;case"name":h=G;break;case"checked":B=G;break;case"defaultChecked":Q=G;break;case"value":_=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:G!==J&&ot(t,s,q,G,l,J)}}Ja(t,_,E,N,B,Q,d,h);return;case"select":G=_=E=q=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":G=N;default:l.hasOwnProperty(d)||ot(t,s,d,null,l,N)}for(h in l)if(d=l[h],N=a[h],l.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":q=d;break;case"defaultValue":E=d;break;case"multiple":_=d;default:d!==N&&ot(t,s,h,d,l,N)}s=E,a=_,l=G,q!=null?rr(t,!!a,q,!1):!!l!=!!a&&(s!=null?rr(t,!!a,s,!0):rr(t,!!a,a?[]:"",!1));return;case"textarea":G=q=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ot(t,s,E,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":q=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&ot(t,s,_,h,l,d)}mc(t,q,G);return;case"option":for(var he in a)q=a[he],a.hasOwnProperty(he)&&q!=null&&!l.hasOwnProperty(he)&&(he==="selected"?t.selected=!1:ot(t,s,he,null,l,q));for(N in l)q=l[N],G=a[N],l.hasOwnProperty(N)&&q!==G&&(q!=null||G!=null)&&(N==="selected"?t.selected=q&&typeof q!="function"&&typeof q!="symbol":ot(t,s,N,q,l,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)q=a[we],a.hasOwnProperty(we)&&q!=null&&!l.hasOwnProperty(we)&&ot(t,s,we,null,l,q);for(B in l)if(q=l[B],G=a[B],l.hasOwnProperty(B)&&q!==G&&(q!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,s));break;default:ot(t,s,B,q,l,G)}return;default:if(Wa(s)){for(var lt in a)q=a[lt],a.hasOwnProperty(lt)&&q!==void 0&&!l.hasOwnProperty(lt)&&Lm(t,s,lt,void 0,l,q);for(Q in l)q=l[Q],G=a[Q],!l.hasOwnProperty(Q)||q===G||q===void 0&&G===void 0||Lm(t,s,Q,q,l,G);return}}for(var j in a)q=a[j],a.hasOwnProperty(j)&&q!=null&&!l.hasOwnProperty(j)&&ot(t,s,j,null,l,q);for(J in l)q=l[J],G=a[J],!l.hasOwnProperty(J)||q===G||q==null&&G==null||ot(t,s,J,q,l,G)}function J0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,_=h.initiatorType,E=h.duration;if(d&&E&&J0(_)){for(_=0,E=h.responseEnd,l+=1;l<a.length;l++){var N=a[l],B=N.startTime;if(B>E)break;var Q=N.transferSize,J=N.initiatorType;Q&&J0(J)&&(N=N.responseEnd,_+=Q*(N<E?1:(E-B)/(N-B)))}if(--l,s+=8*(d+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Um=null,zm=null;function yh(t){return t.nodeType===9?t:t.ownerDocument}function W0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z0(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Bm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var qm=null;function lA(){var t=window.event;return t&&t.type==="popstate"?t===qm?!1:(qm=t,!0):(qm=null,!1)}var ev=typeof setTimeout=="function"?setTimeout:void 0,uA=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,cA=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(t){return tv.resolve(null).then(t).catch(hA)}:ev;function hA(t){setTimeout(function(){throw t})}function Cr(t){return t==="head"}function nv(t,s){var a=s,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Oo(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")tu(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,tu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,E=d.nodeName;d[I]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&tu(t.ownerDocument.body);a=h}while(a);Oo(s)}function sv(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Hm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hm(a),Z(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function fA(t,s,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[I])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=ys(t.nextSibling),t===null)break}return null}function dA(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ys(t.nextSibling),t===null))return null;return t}function iv(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ys(t.nextSibling),t===null))return null;return t}function Fm(t){return t.data==="$?"||t.data==="$~"}function Gm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function mA(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ys(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Km=null;function rv(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return ys(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function av(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function ov(t,s,a){switch(s=yh(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function tu(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Z(t)}var _s=new Map,lv=new Set;function _h(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Vi=re.d;re.d={f:pA,r:gA,D:yA,C:_A,L:vA,m:bA,X:TA,S:EA,M:wA};function pA(){var t=Vi.f(),s=uh();return t||s}function gA(t){var s=_e(t);s!==null&&s.tag===5&&s.type==="form"?A_(s):Vi.r(t)}var Mo=typeof document>"u"?null:document;function uv(t,s,a){var l=Mo;if(l&&typeof s=="string"&&s){var h=On(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),lv.has(h)||(lv.add(h),t={rel:t,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),hn(s,"link",t),gt(s),l.head.appendChild(s)))}}function yA(t){Vi.D(t),uv("dns-prefetch",t,null)}function _A(t,s){Vi.C(t,s),uv("preconnect",t,s)}function vA(t,s,a){Vi.L(t,s,a);var l=Mo;if(l&&t&&s){var h='link[rel="preload"][as="'+On(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+On(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+On(a.imageSizes)+'"]')):h+='[href="'+On(t)+'"]';var d=h;switch(s){case"style":d=Do(t);break;case"script":d=ko(t)}_s.has(d)||(t=S({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),_s.set(d,t),l.querySelector(h)!==null||s==="style"&&l.querySelector(nu(d))||s==="script"&&l.querySelector(su(d))||(s=l.createElement("link"),hn(s,"link",t),gt(s),l.head.appendChild(s)))}}function bA(t,s){Vi.m(t,s);var a=Mo;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+On(l)+'"][href="'+On(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ko(t)}if(!_s.has(d)&&(t=S({rel:"modulepreload",href:t},s),_s.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(su(d)))return}l=a.createElement("link"),hn(l,"link",t),gt(l),a.head.appendChild(l)}}}function EA(t,s,a){Vi.S(t,s,a);var l=Mo;if(l&&t){var h=pt(l).hoistableStyles,d=Do(t);s=s||"default";var _=h.get(d);if(!_){var E={loading:0,preload:null};if(_=l.querySelector(nu(d)))E.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":s},a),(a=_s.get(d))&&$m(t,a);var N=_=l.createElement("link");gt(N),hn(N,"link",t),N._p=new Promise(function(B,Q){N.onload=B,N.onerror=Q}),N.addEventListener("load",function(){E.loading|=1}),N.addEventListener("error",function(){E.loading|=2}),E.loading|=4,vh(_,s,l)}_={type:"stylesheet",instance:_,count:1,state:E},h.set(d,_)}}}function TA(t,s){Vi.X(t,s);var a=Mo;if(a&&t){var l=pt(a).hoistableScripts,h=ko(t),d=l.get(h);d||(d=a.querySelector(su(h)),d||(t=S({src:t,async:!0},s),(s=_s.get(h))&&Qm(t,s),d=a.createElement("script"),gt(d),hn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function wA(t,s){Vi.M(t,s);var a=Mo;if(a&&t){var l=pt(a).hoistableScripts,h=ko(t),d=l.get(h);d||(d=a.querySelector(su(h)),d||(t=S({src:t,async:!0,type:"module"},s),(s=_s.get(h))&&Qm(t,s),d=a.createElement("script"),gt(d),hn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function cv(t,s,a,l){var h=(h=Me.current)?_h(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Do(a.href),a=pt(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Do(a.href);var d=pt(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(nu(t)))&&!d._p&&(_.instance=d,_.state.loading=5),_s.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},_s.set(t,a),d||SA(h,t,a,_.state))),s&&l===null)throw Error(r(528,""));return _}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ko(a),a=pt(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Do(t){return'href="'+On(t)+'"'}function nu(t){return'link[rel="stylesheet"]['+t+"]"}function hv(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function SA(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),hn(s,"link",a),gt(s),t.head.appendChild(s))}function ko(t){return'[src="'+On(t)+'"]'}function su(t){return"script[async]"+t}function fv(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+On(a.href)+'"]');if(l)return s.instance=l,gt(l),l;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),gt(l),hn(l,"style",h),vh(l,a.precedence,t),s.instance=l;case"stylesheet":h=Do(a.href);var d=t.querySelector(nu(h));if(d)return s.state.loading|=4,s.instance=d,gt(d),d;l=hv(a),(h=_s.get(h))&&$m(l,h),d=(t.ownerDocument||t).createElement("link"),gt(d);var _=d;return _._p=new Promise(function(E,N){_.onload=E,_.onerror=N}),hn(d,"link",l),s.state.loading|=4,vh(d,a.precedence,t),s.instance=d;case"script":return d=ko(a.src),(h=t.querySelector(su(d)))?(s.instance=h,gt(h),h):(l=a,(h=_s.get(d))&&(l=S({},a),Qm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),gt(h),hn(h,"link",l),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,vh(l,a.precedence,t));return s.instance}function vh(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var E=l[_];if(E.dataset.precedence===s)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function $m(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Qm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var bh=null;function dv(t,s,a){if(bh===null){var l=new Map,h=bh=new Map;h.set(a,l)}else h=bh,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[I]||d[Dt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(s)||"";_=t+_;var E=l.get(_);E?E.push(d):l.set(_,[d])}}return l}function mv(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function AA(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(t=s.disabled,typeof s.precedence=="string"&&t==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function pv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function xA(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Do(l.href),d=s.querySelector(nu(h));if(d){s=d._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Eh.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=d,gt(d);return}d=s.ownerDocument||s,l=hv(l),(h=_s.get(h))&&$m(l,h),d=d.createElement("link"),gt(d);var _=d;_._p=new Promise(function(E,N){_.onload=E,_.onerror=N}),hn(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Eh.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Ym=0;function RA(t,s){return t.stylesheets&&t.count===0&&wh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&wh(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+s);0<t.imgBytes&&Ym===0&&(Ym=62500*oA());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&wh(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Ym?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Eh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Th=null;function wh(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Th=new Map,s.forEach(NA,t),Th=null,Eh.call(t))}function NA(t,s){if(!(s.state.loading&4)){var a=Th.get(t);if(a)var l=a.get(null);else{a=new Map,Th.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=s.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=Eh.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var iu={$$typeof:ye,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function CA(t,s,a,l,h,d,_,E,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dn(0),this.hiddenUpdates=Dn(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function gv(t,s,a,l,h,d,_,E,N,B,Q,J){return t=new CA(t,s,a,_,N,B,Q,J,E),s=1,d===!0&&(s|=24),d=Xn(3,null,null,s),t.current=d,d.stateNode=t,s=Nd(),s.refCount++,t.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},Dd(d),t}function yv(t){return t?(t=uo,t):uo}function _v(t,s,a,l,h,d){h=yv(h),l.context===null?l.context=h:l.pendingContext=h,l=_r(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=vr(t,l,s),a!==null&&(zn(a,t,s),Pl(a,t,s))}function vv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Xm(t,s){vv(t,s),(t=t.alternate)&&vv(t,s)}function bv(t){if(t.tag===13||t.tag===31){var s=va(t,67108864);s!==null&&zn(s,t,67108864),Xm(t,67108864)}}function Ev(t){if(t.tag===13||t.tag===31){var s=ts();s=qs(s);var a=va(t,s);a!==null&&zn(a,t,s),Xm(t,s)}}var Sh=!0;function IA(t,s,a,l){var h=K.T;K.T=null;var d=re.p;try{re.p=2,Jm(t,s,a,l)}finally{re.p=d,K.T=h}}function MA(t,s,a,l){var h=K.T;K.T=null;var d=re.p;try{re.p=8,Jm(t,s,a,l)}finally{re.p=d,K.T=h}}function Jm(t,s,a,l){if(Sh){var h=Wm(l);if(h===null)jm(t,s,l,Ah,a),wv(t,l);else if(kA(h,t,s,a,l))l.stopPropagation();else if(wv(t,l),s&4&&-1<DA.indexOf(t)){for(;h!==null;){var d=_e(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=wn(d.pendingLanes);if(_!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var N=1<<31-vt(_);E.entanglements[1]|=N,_&=~N}Zs(d),(et&6)===0&&(oh=Bt()+500,Wl(0))}}break;case 31:case 13:E=va(d,2),E!==null&&zn(E,d,2),uh(),Xm(d,2)}if(d=Wm(l),d===null&&jm(t,s,l,Ah,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else jm(t,s,l,null,a)}}function Wm(t){return t=ls(t),Zm(t)}var Ah=null;function Zm(t){if(Ah=null,t=de(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===31){if(t=m(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Ah=t,null}function Tv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(di()){case Vt:return 2;case qt:return 8;case rs:case qn:return 32;case Xi:return 268435456;default:return 32}default:return 32}}var ep=!1,Ir=null,Mr=null,Dr=null,ru=new Map,au=new Map,kr=[],DA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wv(t,s){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":ru.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":au.delete(s.pointerId)}}function ou(t,s,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},s!==null&&(s=_e(s),s!==null&&bv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function kA(t,s,a,l,h){switch(s){case"focusin":return Ir=ou(Ir,t,s,a,l,h),!0;case"dragenter":return Mr=ou(Mr,t,s,a,l,h),!0;case"mouseover":return Dr=ou(Dr,t,s,a,l,h),!0;case"pointerover":var d=h.pointerId;return ru.set(d,ou(ru.get(d)||null,t,s,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,au.set(d,ou(au.get(d)||null,t,s,a,l,h)),!0}return!1}function Sv(t){var s=de(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,Kn(t.priority,function(){Ev(a)});return}}else if(s===31){if(s=m(a),s!==null){t.blockedOn=s,Kn(t.priority,function(){Ev(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Wm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);bl=l,a.target.dispatchEvent(l),bl=null}else return s=_e(a),s!==null&&bv(s),t.blockedOn=a,!1;s.shift()}return!0}function Av(t,s,a){xh(t)&&a.delete(s)}function OA(){ep=!1,Ir!==null&&xh(Ir)&&(Ir=null),Mr!==null&&xh(Mr)&&(Mr=null),Dr!==null&&xh(Dr)&&(Dr=null),ru.forEach(Av),au.forEach(Av)}function Rh(t,s){t.blockedOn===s&&(t.blockedOn=null,ep||(ep=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,OA)))}var Nh=null;function xv(t){Nh!==t&&(Nh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Nh===t&&(Nh=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],h=t[s+2];if(typeof l!="function"){if(Zm(l||a)===null)continue;break}var d=_e(a);d!==null&&(t.splice(s,3),s-=3,Wd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Oo(t){function s(N){return Rh(N,t)}Ir!==null&&Rh(Ir,t),Mr!==null&&Rh(Mr,t),Dr!==null&&Rh(Dr,t),ru.forEach(s),au.forEach(s);for(var a=0;a<kr.length;a++){var l=kr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<kr.length&&(a=kr[0],a.blockedOn===null);)Sv(a),a.blockedOn===null&&kr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[Ht]||null;if(typeof d=="function")_||xv(a);else if(_){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Ht]||null)E=_.formAction;else if(Zm(h)!==null)continue}else E=_.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),xv(a)}}}function Rv(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function tp(t){this._internalRoot=t}Ch.prototype.render=tp.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=ts();_v(a,l,t,s,null,null)},Ch.prototype.unmount=tp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;_v(t.current,2,null,t,null,null),uh(),s[os]=null}};function Ch(t){this._internalRoot=t}Ch.prototype.unstable_scheduleHydration=function(t){if(t){var s=Ya();t={blockedOn:null,target:t,priority:s};for(var a=0;a<kr.length&&s!==0&&s<kr[a].priority;a++);kr.splice(a,0,t),a===0&&Sv(t)}};var Nv=e.version;if(Nv!=="19.2.4")throw Error(r(527,Nv,"19.2.4"));re.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(s),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var VA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{Mn=Ih.inject(VA),$=Ih}catch{}}return uu.createRoot=function(t,s){if(!o(t))throw Error(r(299));var a=!1,l="",h=V_,d=P_,_=j_;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=gv(t,1,!1,null,null,a,l,null,h,d,_,Rv),t[os]=s.current,Pm(t),new tp(s)},uu.hydrateRoot=function(t,s,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=V_,_=P_,E=j_,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),s=gv(t,1,!0,s,a??null,l,h,N,d,_,E,Rv),s.context=yv(null),a=s.current,l=ts(),l=qs(l),h=_r(l),h.callback=null,vr(a,h,l),a=l,s.current.lanes=a,pi(s,a),Zs(s),t[os]=s.current,Pm(t),new Ch(s)},uu.version="19.2.4",uu}var Lv;function GA(){if(Lv)return ip.exports;Lv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ip.exports=FA(),ip.exports}var KA=GA();let $A={data:""},QA=i=>{if(typeof window=="object"){let e=(i?i.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(i||document.head).appendChild(e),e.firstChild}return i||$A},YA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,XA=/\/\*[^]*?\*\/|  +/g,Uv=/\n+/g,Ur=(i,e)=>{let n="",r="",o="";for(let u in i){let f=i[u];u[0]=="@"?u[1]=="i"?n=u+" "+f+";":r+=u[1]=="f"?Ur(f,u):u+"{"+Ur(f,u[1]=="k"?"":e)+"}":typeof f=="object"?r+=Ur(f,e?e.replace(/([^,])+/g,m=>u.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,m):m?m+" "+g:g)):u):f!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Ur.p?Ur.p(u,f):u+":"+f+";")}return n+(e&&o?e+"{"+o+"}":o)+r},Pi={},$E=i=>{if(typeof i=="object"){let e="";for(let n in i)e+=n+$E(i[n]);return e}return i},JA=(i,e,n,r,o)=>{let u=$E(i),f=Pi[u]||(Pi[u]=(g=>{let y=0,T=11;for(;y<g.length;)T=101*T+g.charCodeAt(y++)>>>0;return"go"+T})(u));if(!Pi[f]){let g=u!==i?i:(y=>{let T,S,M=[{}];for(;T=YA.exec(y.replace(XA,""));)T[4]?M.shift():T[3]?(S=T[3].replace(Uv," ").trim(),M.unshift(M[0][S]=M[0][S]||{})):M[0][T[1]]=T[2].replace(Uv," ").trim();return M[0]})(i);Pi[f]=Ur(o?{["@keyframes "+f]:g}:g,n?"":"."+f)}let m=n&&Pi.g?Pi.g:null;return n&&(Pi.g=Pi[f]),((g,y,T,S)=>{S?y.data=y.data.replace(S,g):y.data.indexOf(g)===-1&&(y.data=T?g+y.data:y.data+g)})(Pi[f],e,r,m),f},WA=(i,e,n)=>i.reduce((r,o,u)=>{let f=e[u];if(f&&f.call){let m=f(n),g=m&&m.props&&m.props.className||/^go/.test(m)&&m;f=g?"."+g:m&&typeof m=="object"?m.props?"":Ur(m,""):m===!1?"":m}return r+o+(f??"")},"");function zf(i){let e=this||{},n=i.call?i(e.p):i;return JA(n.unshift?n.raw?WA(n,[].slice.call(arguments,1),e.p):n.reduce((r,o)=>Object.assign(r,o&&o.call?o(e.p):o),{}):n,QA(e.target),e.g,e.o,e.k)}let QE,Dp,kp;zf.bind({g:1});let Hi=zf.bind({k:1});function ZA(i,e,n,r){Ur.p=e,QE=i,Dp=n,kp=r}function ia(i,e){let n=this||{};return function(){let r=arguments;function o(u,f){let m=Object.assign({},u),g=m.className||o.className;n.p=Object.assign({theme:Dp&&Dp()},m),n.o=/ *go\d+/.test(g),m.className=zf.apply(n,r)+(g?" "+g:"");let y=i;return i[0]&&(y=m.as||i,delete m.as),kp&&y[0]&&kp(m),QE(y,m)}return o}}var e2=i=>typeof i=="function",pf=(i,e)=>e2(i)?i(e):i,t2=(()=>{let i=0;return()=>(++i).toString()})(),YE=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i}})(),n2=20,mg="default",XE=(i,e)=>{let{toastLimit:n}=i.settings;switch(e.type){case 0:return{...i,toasts:[e.toast,...i.toasts].slice(0,n)};case 1:return{...i,toasts:i.toasts.map(f=>f.id===e.toast.id?{...f,...e.toast}:f)};case 2:let{toast:r}=e;return XE(i,{type:i.toasts.find(f=>f.id===r.id)?1:0,toast:r});case 3:let{toastId:o}=e;return{...i,toasts:i.toasts.map(f=>f.id===o||o===void 0?{...f,dismissed:!0,visible:!1}:f)};case 4:return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(f=>f.id!==e.toastId)};case 5:return{...i,pausedAt:e.time};case 6:let u=e.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(f=>({...f,pauseDuration:f.pauseDuration+u}))}}},tf=[],JE={toasts:[],pausedAt:void 0,settings:{toastLimit:n2}},ti={},WE=(i,e=mg)=>{ti[e]=XE(ti[e]||JE,i),tf.forEach(([n,r])=>{n===e&&r(ti[e])})},ZE=i=>Object.keys(ti).forEach(e=>WE(i,e)),s2=i=>Object.keys(ti).find(e=>ti[e].toasts.some(n=>n.id===i)),Bf=(i=mg)=>e=>{WE(e,i)},i2={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},r2=(i={},e=mg)=>{let[n,r]=ee.useState(ti[e]||JE),o=ee.useRef(ti[e]);ee.useEffect(()=>(o.current!==ti[e]&&r(ti[e]),tf.push([e,r]),()=>{let f=tf.findIndex(([m])=>m===e);f>-1&&tf.splice(f,1)}),[e]);let u=n.toasts.map(f=>{var m,g,y;return{...i,...i[f.type],...f,removeDelay:f.removeDelay||((m=i[f.type])==null?void 0:m.removeDelay)||i?.removeDelay,duration:f.duration||((g=i[f.type])==null?void 0:g.duration)||i?.duration||i2[f.type],style:{...i.style,...(y=i[f.type])==null?void 0:y.style,...f.style}}});return{...n,toasts:u}},a2=(i,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...n,id:n?.id||t2()}),Wu=i=>(e,n)=>{let r=a2(e,i,n);return Bf(r.toasterId||s2(r.id))({type:2,toast:r}),r.id},Ct=(i,e)=>Wu("blank")(i,e);Ct.error=Wu("error");Ct.success=Wu("success");Ct.loading=Wu("loading");Ct.custom=Wu("custom");Ct.dismiss=(i,e)=>{let n={type:3,toastId:i};e?Bf(e)(n):ZE(n)};Ct.dismissAll=i=>Ct.dismiss(void 0,i);Ct.remove=(i,e)=>{let n={type:4,toastId:i};e?Bf(e)(n):ZE(n)};Ct.removeAll=i=>Ct.remove(void 0,i);Ct.promise=(i,e,n)=>{let r=Ct.loading(e.loading,{...n,...n?.loading});return typeof i=="function"&&(i=i()),i.then(o=>{let u=e.success?pf(e.success,o):void 0;return u?Ct.success(u,{id:r,...n,...n?.success}):Ct.dismiss(r),o}).catch(o=>{let u=e.error?pf(e.error,o):void 0;u?Ct.error(u,{id:r,...n,...n?.error}):Ct.dismiss(r)}),i};var o2=1e3,l2=(i,e="default")=>{let{toasts:n,pausedAt:r}=r2(i,e),o=ee.useRef(new Map).current,u=ee.useCallback((S,M=o2)=>{if(o.has(S))return;let L=setTimeout(()=>{o.delete(S),f({type:4,toastId:S})},M);o.set(S,L)},[]);ee.useEffect(()=>{if(r)return;let S=Date.now(),M=n.map(L=>{if(L.duration===1/0)return;let ne=(L.duration||0)+L.pauseDuration-(S-L.createdAt);if(ne<0){L.visible&&Ct.dismiss(L.id);return}return setTimeout(()=>Ct.dismiss(L.id,e),ne)});return()=>{M.forEach(L=>L&&clearTimeout(L))}},[n,r,e]);let f=ee.useCallback(Bf(e),[e]),m=ee.useCallback(()=>{f({type:5,time:Date.now()})},[f]),g=ee.useCallback((S,M)=>{f({type:1,toast:{id:S,height:M}})},[f]),y=ee.useCallback(()=>{r&&f({type:6,time:Date.now()})},[r,f]),T=ee.useCallback((S,M)=>{let{reverseOrder:L=!1,gutter:ne=8,defaultPosition:oe}=M||{},se=n.filter(ye=>(ye.position||oe)===(S.position||oe)&&ye.height),fe=se.findIndex(ye=>ye.id===S.id),ve=se.filter((ye,je)=>je<fe&&ye.visible).length;return se.filter(ye=>ye.visible).slice(...L?[ve+1]:[0,ve]).reduce((ye,je)=>ye+(je.height||0)+ne,0)},[n]);return ee.useEffect(()=>{n.forEach(S=>{if(S.dismissed)u(S.id,S.removeDelay);else{let M=o.get(S.id);M&&(clearTimeout(M),o.delete(S.id))}})},[n,u]),{toasts:n,handlers:{updateHeight:g,startPause:m,endPause:y,calculateOffset:T}}},u2=Hi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,c2=Hi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,h2=Hi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,f2=ia("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${u2} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${c2} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${h2} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,d2=Hi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,m2=ia("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${d2} 1s linear infinite;
`,p2=Hi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,g2=Hi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,y2=ia("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${p2} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${g2} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,_2=ia("div")`
  position: absolute;
`,v2=ia("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,b2=Hi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,E2=ia("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${b2} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,T2=({toast:i})=>{let{icon:e,type:n,iconTheme:r}=i;return e!==void 0?typeof e=="string"?ee.createElement(E2,null,e):e:n==="blank"?null:ee.createElement(v2,null,ee.createElement(m2,{...r}),n!=="loading"&&ee.createElement(_2,null,n==="error"?ee.createElement(f2,{...r}):ee.createElement(y2,{...r})))},w2=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,S2=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,A2="0%{opacity:0;} 100%{opacity:1;}",x2="0%{opacity:1;} 100%{opacity:0;}",R2=ia("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,N2=ia("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,C2=(i,e)=>{let n=i.includes("top")?1:-1,[r,o]=YE()?[A2,x2]:[w2(n),S2(n)];return{animation:e?`${Hi(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Hi(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},I2=ee.memo(({toast:i,position:e,style:n,children:r})=>{let o=i.height?C2(i.position||e||"top-center",i.visible):{opacity:0},u=ee.createElement(T2,{toast:i}),f=ee.createElement(N2,{...i.ariaProps},pf(i.message,i));return ee.createElement(R2,{className:i.className,style:{...o,...n,...i.style}},typeof r=="function"?r({icon:u,message:f}):ee.createElement(ee.Fragment,null,u,f))});ZA(ee.createElement);var M2=({id:i,className:e,style:n,onHeightUpdate:r,children:o})=>{let u=ee.useCallback(f=>{if(f){let m=()=>{let g=f.getBoundingClientRect().height;r(i,g)};m(),new MutationObserver(m).observe(f,{subtree:!0,childList:!0,characterData:!0})}},[i,r]);return ee.createElement("div",{ref:u,className:e,style:n},o)},D2=(i,e)=>{let n=i.includes("top"),r=n?{top:0}:{bottom:0},o=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:YE()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...o}},k2=zf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Mh=16,O2=({reverseOrder:i,position:e="top-center",toastOptions:n,gutter:r,children:o,toasterId:u,containerStyle:f,containerClassName:m})=>{let{toasts:g,handlers:y}=l2(n,u);return ee.createElement("div",{"data-rht-toaster":u||"",style:{position:"fixed",zIndex:9999,top:Mh,left:Mh,right:Mh,bottom:Mh,pointerEvents:"none",...f},className:m,onMouseEnter:y.startPause,onMouseLeave:y.endPause},g.map(T=>{let S=T.position||e,M=y.calculateOffset(T,{reverseOrder:i,gutter:r,defaultPosition:e}),L=D2(S,M);return ee.createElement(M2,{id:T.id,key:T.id,onHeightUpdate:y.updateHeight,className:T.visible?k2:"",style:L},T.type==="custom"?pf(T.message,T):o?o(T):ee.createElement(I2,{toast:T,position:S}))}))};const e1=(...i)=>i.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();const V2=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const P2=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());const zv=i=>{const e=P2(i);return e.charAt(0).toUpperCase()+e.slice(1)};var j2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const L2=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const U2=ee.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:f,...m},g)=>ee.createElement("svg",{ref:g,...j2,width:e,height:e,stroke:i,strokeWidth:r?Number(n)*24/Number(e):n,className:e1("lucide",o),...!u&&!L2(m)&&{"aria-hidden":"true"},...m},[...f.map(([y,T])=>ee.createElement(y,T)),...Array.isArray(u)?u:[u]]));const ut=(i,e)=>{const n=ee.forwardRef(({className:r,...o},u)=>ee.createElement(U2,{ref:u,iconNode:e,className:e1(`lucide-${V2(zv(i))}`,`lucide-${i}`,r),...o}));return n.displayName=zv(i),n};const z2=[["path",{d:"M14.564 14.558a3 3 0 1 1-4.122-4.121",key:"1rnrzw"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M20 20H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 .819-.175",key:"1x3arw"}],["path",{d:"M9.695 4.024A2 2 0 0 1 10.004 4h3.993a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v7.344",key:"1i84u0"}]],B2=ut("camera-off",z2);const q2=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],H2=ut("camera",q2);const F2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],G2=ut("check",F2);const K2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$2=ut("chevron-right",K2);const Q2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Y2=ut("circle-alert",Q2);const X2=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Bv=ut("clock",X2);const J2=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],qv=ut("cloud",J2);const W2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Hv=ut("download",W2);const Z2=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Fv=ut("file-text",Z2);const ex=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],tx=ut("history",ex);const nx=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Gv=ut("house",nx);const sx=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Dh=ut("lock",sx);const ix=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Kv=ut("message-square",ix);const rx=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],ax=ut("mic-off",rx);const ox=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],lx=ut("mic",ox);const ux=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],cx=ut("pen-line",ux);const hx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fx=ut("plus",hx);const dx=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],mx=ut("refresh-cw",dx);const px=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gx=ut("save",px);const yx=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_x=ut("send",yx);const vx=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$v=ut("settings",vx);const bx=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],lp=ut("sparkles",bx);const Ex=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Tx=ut("trash-2",Ex);const wx=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Sx=ut("upload",wx);const Ax=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cu=ut("user",Ax);const xx=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qv=ut("users",xx);const Rx=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Nx=ut("volume-2",Rx);const Cx=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Ix=ut("volume-x",Cx),t1="imago-voice-data",Op="imago-voice-restore-flag",pg={user1Name:"Tom",user2Name:"Lisa",user1Password:"",user2Password:"",paarRoomPassword:"",aiProvider:"claude",claudeApiKey:"",claudeModel:"claude-opus-4-5-20251101",geminiApiKey:"",ttsEnabled:!0,voicePaar:"Zephyr",voiceTom:"Puck",voiceLisa:"Kore",therapySchool:"imago",cameraEnabled:!1,emotionTrackingEnabled:!1,defaultSessionDuration:45},Vp={settings:pg,messages:{paar:[],tom:[],lisa:[],assessment:[]},documents:[],strategies:[],sessions:[],archivedMessages:[],roomMessages:[],emotionHistory:[]},Mx=()=>{try{const i=localStorage.getItem(t1);if(i){const e=JSON.parse(i);return{...Vp,...e,settings:{...pg,...e.settings},messages:{paar:e.messages?.paar||[],tom:e.messages?.tom||[],lisa:e.messages?.lisa||[],assessment:e.messages?.assessment||[]}}}}catch(i){console.error("Failed to load from localStorage:",i)}return Vp},up=i=>{try{localStorage.setItem(t1,JSON.stringify(i))}catch(e){console.error("Failed to save to localStorage:",e)}},Yv=i=>{sessionStorage.setItem(Op,"success")},Dx=()=>{const i=sessionStorage.getItem(Op);return sessionStorage.removeItem(Op),i},n1=i=>JSON.stringify({...i,version:"2.0.0",exportedAt:Date.now()},null,2),kx=i=>{const e=n1(i);return btoa(unescape(encodeURIComponent(e)))},s1=i=>{try{const e=JSON.parse(i);return{...Vp,...e,settings:{...pg,...e.settings}}}catch(e){return console.error("Failed to parse JSON:",e),null}},Ox=i=>{try{const e=decodeURIComponent(escape(atob(i.trim())));return s1(e)}catch(e){return console.error("Failed to decode Base64:",e),null}},Xv=i=>{const e=Ox(i);if(e)return e;const n=s1(i);return n||null},Jv=(i,e,n)=>({...i,[e]:[...i[e]||[],n]}),Vx=(i,e)=>({...i,[e]:[]}),Px=(i,e,n,r)=>({id:crypto.randomUUID(),room:i,startTime:Date.now(),duration:e,goal:n,participants:r,messageCount:0}),jx=(i,e)=>({...i,endTime:Date.now(),messageCount:e}),Lx=(i,e)=>i.filter(n=>n.to===e&&!n.isRead).length;function ce(i,e,n,r,o){if(typeof e=="function"?i!==e||!0:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,n),n}function H(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)}let i1=function(){const{crypto:i}=globalThis;if(i?.randomUUID)return i1=i.randomUUID.bind(i),i.randomUUID();const e=new Uint8Array(1),n=i?()=>i.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Bu(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const Pp=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const e=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(e.stack=i.stack),i.cause&&!e.cause&&(e.cause=i.cause),i.name&&(e.name=i.name),e}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};class De extends Error{}class bn extends De{constructor(e,n,r,o){super(`${bn.makeMessage(e,n,r)}`),this.status=e,this.headers=o,this.requestID=o?.get("request-id"),this.error=n}static makeMessage(e,n,r){const o=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,r,o){if(!e||!o)return new qf({message:r,cause:Pp(n)});const u=n;return e===400?new a1(e,u,r,o):e===401?new o1(e,u,r,o):e===403?new l1(e,u,r,o):e===404?new u1(e,u,r,o):e===409?new c1(e,u,r,o):e===422?new h1(e,u,r,o):e===429?new f1(e,u,r,o):e>=500?new d1(e,u,r,o):new bn(e,u,r,o)}}class Vs extends bn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class qf extends bn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class r1 extends qf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class a1 extends bn{}class o1 extends bn{}class l1 extends bn{}class u1 extends bn{}class c1 extends bn{}class h1 extends bn{}class f1 extends bn{}class d1 extends bn{}const Ux=/^[a-z][a-z0-9+.-]*:/i,zx=i=>Ux.test(i);let jp=i=>(jp=Array.isArray,jp(i)),Wv=jp;function Lp(i){return typeof i!="object"?{}:i??{}}function Bx(i){if(!i)return!0;for(const e in i)return!1;return!0}function qx(i,e){return Object.prototype.hasOwnProperty.call(i,e)}const Hx=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new De(`${i} must be an integer`);if(e<0)throw new De(`${i} must be a positive integer`);return e},m1=i=>{try{return JSON.parse(i)}catch{return}},Fx=i=>new Promise(e=>setTimeout(e,i)),jo="0.71.2",Gx=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Kx(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const $x=()=>{const i=Kx();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jo,"X-Stainless-OS":eb(Deno.build.os),"X-Stainless-Arch":Zv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jo,"X-Stainless-OS":eb(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Zv(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=Qx();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Qx(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of i){const r=n.exec(navigator.userAgent);if(r){const o=r[1]||0,u=r[2]||0,f=r[3]||0;return{browser:e,version:`${o}.${u}.${f}`}}}return null}const Zv=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",eb=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let tb;const Yx=()=>tb??(tb=$x());function Xx(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function p1(...i){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...i)}function g1(i){let e=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return p1({start(){},async pull(n){const{done:r,value:o}=await e.next();r?n.close():n.enqueue(o)},async cancel(){await e.return?.()}})}function gg(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Jx(i){if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await i[Symbol.asyncIterator]().return?.();return}const e=i.getReader(),n=e.cancel();e.releaseLock(),await n}const Wx=({headers:i,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});function Zx(i){let e=0;for(const o of i)e+=o.length;const n=new Uint8Array(e);let r=0;for(const o of i)n.set(o,r),r+=o.length;return n}let nb;function yg(i){let e;return(nb??(e=new globalThis.TextEncoder,nb=e.encode.bind(e)))(i)}let sb;function ib(i){let e;return(sb??(e=new globalThis.TextDecoder,sb=e.decode.bind(e)))(i)}var ss,is;class Zu{constructor(){ss.set(this,void 0),is.set(this,void 0),ce(this,ss,new Uint8Array),ce(this,is,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?yg(e):e;ce(this,ss,Zx([H(this,ss,"f"),n]));const r=[];let o;for(;(o=eR(H(this,ss,"f"),H(this,is,"f")))!=null;){if(o.carriage&&H(this,is,"f")==null){ce(this,is,o.index);continue}if(H(this,is,"f")!=null&&(o.index!==H(this,is,"f")+1||o.carriage)){r.push(ib(H(this,ss,"f").subarray(0,H(this,is,"f")-1))),ce(this,ss,H(this,ss,"f").subarray(H(this,is,"f"))),ce(this,is,null);continue}const u=H(this,is,"f")!==null?o.preceding-1:o.preceding,f=ib(H(this,ss,"f").subarray(0,u));r.push(f),ce(this,ss,H(this,ss,"f").subarray(o.index)),ce(this,is,null)}return r}flush(){return H(this,ss,"f").length?this.decode(`
`):[]}}ss=new WeakMap,is=new WeakMap;Zu.NEWLINE_CHARS=new Set([`
`,"\r"]);Zu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function eR(i,e){for(let o=e??0;o<i.length;o++){if(i[o]===10)return{preceding:o,index:o+1,carriage:!1};if(i[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function tR(i){for(let r=0;r<i.length-1;r++){if(i[r]===10&&i[r+1]===10||i[r]===13&&i[r+1]===13)return r+2;if(i[r]===13&&i[r+1]===10&&r+3<i.length&&i[r+2]===13&&i[r+3]===10)return r+4}return-1}const gf={off:0,error:200,warn:300,info:400,debug:500},rb=(i,e,n)=>{if(i){if(qx(gf,i))return i;Rn(n).warn(`${e} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(gf))}`)}};function Nu(){}function kh(i,e,n){return!e||gf[i]>gf[n]?Nu:e[i].bind(e)}const nR={error:Nu,warn:Nu,info:Nu,debug:Nu};let ab=new WeakMap;function Rn(i){const e=i.logger,n=i.logLevel??"off";if(!e)return nR;const r=ab.get(e);if(r&&r[0]===n)return r[1];const o={error:kh("error",e,n),warn:kh("warn",e,n),info:kh("info",e,n),debug:kh("debug",e,n)};return ab.set(e,[n,o]),o}const Va=i=>(i.options&&(i.options={...i.options},delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);var hu;class ni{constructor(e,n,r){this.iterator=e,hu.set(this,void 0),this.controller=n,ce(this,hu,r)}static fromSSEResponse(e,n,r){let o=!1;const u=r?Rn(r):console;async function*f(){if(o)throw new De("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{for await(const g of sR(e,n)){if(g.event==="completion")try{yield JSON.parse(g.data)}catch(y){throw u.error("Could not parse message into JSON:",g.data),u.error("From chunk:",g.raw),y}if(g.event==="message_start"||g.event==="message_delta"||g.event==="message_stop"||g.event==="content_block_start"||g.event==="content_block_delta"||g.event==="content_block_stop")try{yield JSON.parse(g.data)}catch(y){throw u.error("Could not parse message into JSON:",g.data),u.error("From chunk:",g.raw),y}if(g.event!=="ping"&&g.event==="error")throw new bn(void 0,m1(g.data)??g.data,void 0,e.headers)}m=!0}catch(g){if(Bu(g))return;throw g}finally{m||n.abort()}}return new ni(f,n,r)}static fromReadableStream(e,n,r){let o=!1;async function*u(){const m=new Zu,g=gg(e);for await(const y of g)for(const T of m.decode(y))yield T;for(const y of m.flush())yield y}async function*f(){if(o)throw new De("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{for await(const g of u())m||g&&(yield JSON.parse(g));m=!0}catch(g){if(Bu(g))return;throw g}finally{m||n.abort()}}return new ni(f,n,r)}[(hu=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),o=u=>({next:()=>{if(u.length===0){const f=r.next();e.push(f),n.push(f)}return u.shift()}});return[new ni(()=>o(e),this.controller,H(this,hu,"f")),new ni(()=>o(n),this.controller,H(this,hu,"f"))]}toReadableStream(){const e=this;let n;return p1({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:o,done:u}=await n.next();if(u)return r.close();const f=yg(JSON.stringify(o)+`
`);r.enqueue(f)}catch(o){r.error(o)}},async cancel(){await n.return?.()}})}}async function*sR(i,e){if(!i.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new De("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new De("Attempted to iterate over a response with no body");const n=new rR,r=new Zu,o=gg(i.body);for await(const u of iR(o))for(const f of r.decode(u)){const m=n.decode(f);m&&(yield m)}for(const u of r.flush()){const f=n.decode(u);f&&(yield f)}}async function*iR(i){let e=new Uint8Array;for await(const n of i){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?yg(n):n;let o=new Uint8Array(e.length+r.length);o.set(e),o.set(r,e.length),e=o;let u;for(;(u=tR(e))!==-1;)yield e.slice(0,u),e=e.slice(u)}e.length>0&&(yield e)}class rR{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,o]=aR(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function aR(i,e){const n=i.indexOf(e);return n!==-1?[i.substring(0,n),e,i.substring(n+e.length)]:[i,"",""]}async function y1(i,e){const{response:n,requestLogID:r,retryOfRequestLogID:o,startTime:u}=e,f=await(async()=>{if(e.options.stream)return Rn(i).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller):ni.fromSSEResponse(n,e.controller);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type")?.split(";")[0]?.trim();if(g?.includes("application/json")||g?.endsWith("+json")){const S=await n.json();return _1(S,n)}return await n.text()})();return Rn(i).debug(`[${r}] response parsed`,Va({retryOfRequestLogID:o,url:n.url,status:n.status,body:f,durationMs:Date.now()-u})),f}function _1(i,e){return!i||typeof i!="object"||Array.isArray(i)?i:Object.defineProperty(i,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}var Cu;class Hf extends Promise{constructor(e,n,r=y1){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=r,Cu.set(this,void 0),ce(this,Cu,e)}_thenUnwrap(e){return new Hf(H(this,Cu,"f"),this.responsePromise,async(n,r)=>_1(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(H(this,Cu,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Cu=new WeakMap;var Oh;class v1{constructor(e,n,r,o){Oh.set(this,void 0),ce(this,Oh,e),this.options=o,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new De("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await H(this,Oh,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Oh=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class oR extends Hf{constructor(e,n,r){super(e,n,async(o,u)=>new r(o,u.response,await y1(o,u),u.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class ec extends v1{constructor(e,n,r,o){super(e,n,r,o),this.data=r.data||[],this.has_more=r.has_more||!1,this.first_id=r.first_id||null,this.last_id=r.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){const n=this.first_id;return n?{...this.options,query:{...Lp(this.options.query),before_id:n}}:null}const e=this.last_id;return e?{...this.options,query:{...Lp(this.options.query),after_id:e}}:null}}class b1 extends v1{constructor(e,n,r,o){super(e,n,r,o),this.data=r.data||[],this.has_more=r.has_more||!1,this.next_page=r.next_page||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.next_page;return e?{...this.options,query:{...Lp(this.options.query),page:e}}:null}}const E1=()=>{if(typeof File>"u"){const{process:i}=globalThis,e=typeof i?.versions?.node=="string"&&parseInt(i.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Fo(i,e,n){return E1(),new File(i,e??"unknown_file",n)}function nf(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const T1=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function",_g=async(i,e)=>({...i,body:await uR(i.body,e)}),ob=new WeakMap;function lR(i){const e=typeof i=="function"?i:i.fetch,n=ob.get(e);if(n)return n;const r=(async()=>{try{const o="Response"in e?e.Response:(await e("data:,")).constructor,u=new FormData;return u.toString()!==await new o(u).text()}catch{return!0}})();return ob.set(e,r),r}const uR=async(i,e)=>{if(!await lR(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(i||{}).map(([r,o])=>Up(n,r,o))),n},cR=i=>i instanceof Blob&&"name"in i,Up=async(i,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")i.append(e,String(n));else if(n instanceof Response){let r={};const o=n.headers.get("Content-Type");o&&(r={type:o}),i.append(e,Fo([await n.blob()],nf(n),r))}else if(T1(n))i.append(e,Fo([await new Response(g1(n)).blob()],nf(n)));else if(cR(n))i.append(e,Fo([n],nf(n),{type:n.type}));else if(Array.isArray(n))await Promise.all(n.map(r=>Up(i,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,o])=>Up(i,`${e}[${r}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},w1=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",hR=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&w1(i),fR=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function dR(i,e,n){if(E1(),i=await i,e||(e=nf(i)),hR(i))return i instanceof File&&e==null&&n==null?i:Fo([await i.arrayBuffer()],e??i.name,{type:i.type,lastModified:i.lastModified,...n});if(fR(i)){const o=await i.blob();return e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()),Fo(await zp(o),e,n)}const r=await zp(i);if(!n?.type){const o=r.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof o=="string"&&(n={...n,type:o})}return Fo(r,e,n)}async function zp(i){let e=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)e.push(i);else if(w1(i))e.push(i instanceof Blob?i:await i.arrayBuffer());else if(T1(i))for await(const n of i)e.push(...await zp(n));else{const n=i?.constructor?.name;throw new Error(`Unexpected data type: ${typeof i}${n?`; constructor: ${n}`:""}${mR(i)}`)}return e}function mR(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(n=>`"${n}"`).join(", ")}]`}class Us{constructor(e){this._client=e}}const S1=Symbol.for("brand.privateNullableHeaders");function*pR(i){if(!i)return;if(S1 in i){const{values:r,nulls:o}=i;yield*r.entries();for(const u of o)yield[u,null];return}let e=!1,n;i instanceof Headers?n=i.entries():Wv(i)?n=i:(e=!0,n=Object.entries(i??{}));for(let r of n){const o=r[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const u=Wv(r[1])?r[1]:[r[1]];let f=!1;for(const m of u)m!==void 0&&(e&&!f&&(f=!0,yield[o,null]),yield[o,m])}}const Xe=i=>{const e=new Headers,n=new Set;for(const r of i){const o=new Set;for(const[u,f]of pR(r)){const m=u.toLowerCase();o.has(m)||(e.delete(u),o.add(m)),f===null?(e.delete(u),n.add(m)):(e.append(u,f),n.delete(m))}}return{[S1]:!0,values:e,nulls:n}};function A1(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const lb=Object.freeze(Object.create(null)),gR=(i=A1)=>function(n,...r){if(n.length===1)return n[0];let o=!1;const u=[],f=n.reduce((T,S,M)=>{/[?#]/.test(S)&&(o=!0);const L=r[M];let ne=(o?encodeURIComponent:i)(""+L);return M!==r.length&&(L==null||typeof L=="object"&&L.toString===Object.getPrototypeOf(Object.getPrototypeOf(L.hasOwnProperty??lb)??lb)?.toString)&&(ne=L+"",u.push({start:T.length+S.length,length:ne.length,error:`Value of type ${Object.prototype.toString.call(L).slice(8,-1)} is not a valid path parameter`})),T+S+(M===r.length?"":ne)},""),m=f.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let y;for(;(y=g.exec(m))!==null;)u.push({start:y.index,length:y[0].length,error:`Value "${y[0]}" can't be safely passed as a path parameter`});if(u.sort((T,S)=>T.start-S.start),u.length>0){let T=0;const S=u.reduce((M,L)=>{const ne=" ".repeat(L.start-T),oe="^".repeat(L.length);return T=L.start+L.length,M+ne+oe},"");throw new De(`Path parameters result in path with invalid segments:
${u.map(M=>M.error).join(`
`)}
${f}
${S}`)}return f},mn=gR(A1);class x1 extends Us{list(e={},n){const{betas:r,...o}=e??{};return this._client.getAPIList("/v1/files",ec,{query:o,...n,headers:Xe([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])})}delete(e,n={},r){const{betas:o}=n??{};return this._client.delete(mn`/v1/files/${e}`,{...r,headers:Xe([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString()},r?.headers])})}download(e,n={},r){const{betas:o}=n??{};return this._client.get(mn`/v1/files/${e}/content`,{...r,headers:Xe([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}retrieveMetadata(e,n={},r){const{betas:o}=n??{};return this._client.get(mn`/v1/files/${e}`,{...r,headers:Xe([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString()},r?.headers])})}upload(e,n){const{betas:r,...o}=e;return this._client.post("/v1/files",_g({body:o,...n,headers:Xe([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])},this._client))}}let R1=class extends Us{retrieve(e,n={},r){const{betas:o}=n??{};return this._client.get(mn`/v1/models/${e}?beta=true`,{...r,headers:Xe([{...o?.toString()!=null?{"anthropic-beta":o?.toString()}:void 0},r?.headers])})}list(e={},n){const{betas:r,...o}=e??{};return this._client.getAPIList("/v1/models?beta=true",ec,{query:o,...n,headers:Xe([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}};const N1={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};function ub(i,e,n){return!e||!("parse"in(e.output_format??{}))?{...i,content:i.content.map(r=>{if(r.type==="text"){const o=Object.defineProperty({...r},"parsed_output",{value:null,enumerable:!1});return Object.defineProperty(o,"parsed",{get(){return n.logger.warn("The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead."),null},enumerable:!1})}return r}),parsed_output:null}:C1(i,e,n)}function C1(i,e,n){let r=null;const o=i.content.map(u=>{if(u.type==="text"){const f=yR(e,u.text);r===null&&(r=f);const m=Object.defineProperty({...u},"parsed_output",{value:f,enumerable:!1});return Object.defineProperty(m,"parsed",{get(){return n.logger.warn("The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead."),f},enumerable:!1})}return u});return{...i,content:o,parsed_output:r}}function yR(i,e){if(i.output_format?.type!=="json_schema")return null;try{return"parse"in i.output_format?i.output_format.parse(e):JSON.parse(e)}catch(n){throw new De(`Failed to parse structured output: ${n}`)}}const _R=i=>{let e=0,n=[];for(;e<i.length;){let r=i[e];if(r==="\\"){e++;continue}if(r==="{"){n.push({type:"brace",value:"{"}),e++;continue}if(r==="}"){n.push({type:"brace",value:"}"}),e++;continue}if(r==="["){n.push({type:"paren",value:"["}),e++;continue}if(r==="]"){n.push({type:"paren",value:"]"}),e++;continue}if(r===":"){n.push({type:"separator",value:":"}),e++;continue}if(r===","){n.push({type:"delimiter",value:","}),e++;continue}if(r==='"'){let m="",g=!1;for(r=i[++e];r!=='"';){if(e===i.length){g=!0;break}if(r==="\\"){if(e++,e===i.length){g=!0;break}m+=r+i[e],r=i[++e]}else m+=r,r=i[++e]}r=i[++e],g||n.push({type:"string",value:m});continue}if(r&&/\s/.test(r)){e++;continue}let u=/[0-9]/;if(r&&u.test(r)||r==="-"||r==="."){let m="";for(r==="-"&&(m+=r,r=i[++e]);r&&u.test(r)||r===".";)m+=r,r=i[++e];n.push({type:"number",value:m});continue}let f=/[a-z]/i;if(r&&f.test(r)){let m="";for(;r&&f.test(r)&&e!==i.length;)m+=r,r=i[++e];if(m=="true"||m=="false"||m==="null")n.push({type:"name",value:m});else{e++;continue}continue}e++}return n},Lo=i=>{if(i.length===0)return i;let e=i[i.length-1];switch(e.type){case"separator":return i=i.slice(0,i.length-1),Lo(i);case"number":let n=e.value[e.value.length-1];if(n==="."||n==="-")return i=i.slice(0,i.length-1),Lo(i);case"string":let r=i[i.length-2];if(r?.type==="delimiter")return i=i.slice(0,i.length-1),Lo(i);if(r?.type==="brace"&&r.value==="{")return i=i.slice(0,i.length-1),Lo(i);break;case"delimiter":return i=i.slice(0,i.length-1),Lo(i)}return i},vR=i=>{let e=[];return i.map(n=>{n.type==="brace"&&(n.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),n.type==="paren"&&(n.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(n=>{n==="}"?i.push({type:"brace",value:"}"}):n==="]"&&i.push({type:"paren",value:"]"})}),i},bR=i=>{let e="";return i.map(n=>{n.type==="string"?e+='"'+n.value+'"':e+=n.value}),e},I1=i=>JSON.parse(bR(vR(Lo(_R(i)))));var vs,Vr,Vo,fu,Vh,du,mu,Ph,pu,ji,gu,jh,Lh,Da,Uh,zh,yu,cp,cb,Bh,hp,fp,dp,hb;const fb="__json_buf";function db(i){return i.type==="tool_use"||i.type==="server_tool_use"||i.type==="mcp_tool_use"}class yf{constructor(e,n){vs.add(this),this.messages=[],this.receivedMessages=[],Vr.set(this,void 0),Vo.set(this,null),this.controller=new AbortController,fu.set(this,void 0),Vh.set(this,()=>{}),du.set(this,()=>{}),mu.set(this,void 0),Ph.set(this,()=>{}),pu.set(this,()=>{}),ji.set(this,{}),gu.set(this,!1),jh.set(this,!1),Lh.set(this,!1),Da.set(this,!1),Uh.set(this,void 0),zh.set(this,void 0),yu.set(this,void 0),Bh.set(this,r=>{if(ce(this,jh,!0),Bu(r)&&(r=new Vs),r instanceof Vs)return ce(this,Lh,!0),this._emit("abort",r);if(r instanceof De)return this._emit("error",r);if(r instanceof Error){const o=new De(r.message);return o.cause=r,this._emit("error",o)}return this._emit("error",new De(String(r)))}),ce(this,fu,new Promise((r,o)=>{ce(this,Vh,r,"f"),ce(this,du,o,"f")})),ce(this,mu,new Promise((r,o)=>{ce(this,Ph,r,"f"),ce(this,pu,o,"f")})),H(this,fu,"f").catch(()=>{}),H(this,mu,"f").catch(()=>{}),ce(this,Vo,e),ce(this,yu,n?.logger??console)}get response(){return H(this,Uh,"f")}get request_id(){return H(this,zh,"f")}async withResponse(){ce(this,Da,!0);const e=await H(this,fu,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const n=new yf(null);return n._run(()=>n._fromReadableStream(e)),n}static createMessage(e,n,r,{logger:o}={}){const u=new yf(n,{logger:o});for(const f of n.messages)u._addMessageParam(f);return ce(u,Vo,{...n,stream:!0}),u._run(()=>u._createMessage(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),u}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},H(this,Bh,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,n=!0){this.receivedMessages.push(e),n&&this._emit("message",e)}async _createMessage(e,n,r){const o=r?.signal;let u;o&&(o.aborted&&this.controller.abort(),u=this.controller.abort.bind(this.controller),o.addEventListener("abort",u));try{H(this,vs,"m",hp).call(this);const{response:f,data:m}=await e.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(f);for await(const g of m)H(this,vs,"m",fp).call(this,g);if(m.controller.signal?.aborted)throw new Vs;H(this,vs,"m",dp).call(this)}finally{o&&u&&o.removeEventListener("abort",u)}}_connected(e){this.ended||(ce(this,Uh,e),ce(this,zh,e?.headers.get("request-id")),H(this,Vh,"f").call(this,e),this._emit("connect"))}get ended(){return H(this,gu,"f")}get errored(){return H(this,jh,"f")}get aborted(){return H(this,Lh,"f")}abort(){this.controller.abort()}on(e,n){return(H(this,ji,"f")[e]||(H(this,ji,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=H(this,ji,"f")[e];if(!r)return this;const o=r.findIndex(u=>u.listener===n);return o>=0&&r.splice(o,1),this}once(e,n){return(H(this,ji,"f")[e]||(H(this,ji,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{ce(this,Da,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){ce(this,Da,!0),await H(this,mu,"f")}get currentMessage(){return H(this,Vr,"f")}async finalMessage(){return await this.done(),H(this,vs,"m",cp).call(this)}async finalText(){return await this.done(),H(this,vs,"m",cb).call(this)}_emit(e,...n){if(H(this,gu,"f"))return;e==="end"&&(ce(this,gu,!0),H(this,Ph,"f").call(this));const r=H(this,ji,"f")[e];if(r&&(H(this,ji,"f")[e]=r.filter(o=>!o.once),r.forEach(({listener:o})=>o(...n))),e==="abort"){const o=n[0];!H(this,Da,"f")&&!r?.length&&Promise.reject(o),H(this,du,"f").call(this,o),H(this,pu,"f").call(this,o),this._emit("end");return}if(e==="error"){const o=n[0];!H(this,Da,"f")&&!r?.length&&Promise.reject(o),H(this,du,"f").call(this,o),H(this,pu,"f").call(this,o),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",H(this,vs,"m",cp).call(this))}async _fromReadableStream(e,n){const r=n?.signal;let o;r&&(r.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),r.addEventListener("abort",o));try{H(this,vs,"m",hp).call(this),this._connected(null);const u=ni.fromReadableStream(e,this.controller);for await(const f of u)H(this,vs,"m",fp).call(this,f);if(u.controller.signal?.aborted)throw new Vs;H(this,vs,"m",dp).call(this)}finally{r&&o&&r.removeEventListener("abort",o)}}[(Vr=new WeakMap,Vo=new WeakMap,fu=new WeakMap,Vh=new WeakMap,du=new WeakMap,mu=new WeakMap,Ph=new WeakMap,pu=new WeakMap,ji=new WeakMap,gu=new WeakMap,jh=new WeakMap,Lh=new WeakMap,Da=new WeakMap,Uh=new WeakMap,zh=new WeakMap,yu=new WeakMap,Bh=new WeakMap,vs=new WeakSet,cp=function(){if(this.receivedMessages.length===0)throw new De("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},cb=function(){if(this.receivedMessages.length===0)throw new De("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new De("stream ended without producing a content block with type=text");return n.join(" ")},hp=function(){this.ended||ce(this,Vr,void 0)},fp=function(n){if(this.ended)return;const r=H(this,vs,"m",hb).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const o=r.content.at(-1);switch(n.delta.type){case"text_delta":{o.type==="text"&&this._emit("text",n.delta.text,o.text||"");break}case"citations_delta":{o.type==="text"&&this._emit("citation",n.delta.citation,o.citations??[]);break}case"input_json_delta":{db(o)&&o.input&&this._emit("inputJson",n.delta.partial_json,o.input);break}case"thinking_delta":{o.type==="thinking"&&this._emit("thinking",n.delta.thinking,o.thinking);break}case"signature_delta":{o.type==="thinking"&&this._emit("signature",o.signature);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(ub(r,H(this,Vo,"f"),{logger:H(this,yu,"f")}),!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{ce(this,Vr,r);break}}},dp=function(){if(this.ended)throw new De("stream has ended, this shouldn't happen");const n=H(this,Vr,"f");if(!n)throw new De("request ended without sending any chunks");return ce(this,Vr,void 0),ub(n,H(this,Vo,"f"),{logger:H(this,yu,"f")})},hb=function(n){let r=H(this,Vr,"f");if(n.type==="message_start"){if(r)throw new De(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new De(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.container=n.delta.container,r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,r.context_management=n.context_management,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),r;case"content_block_start":return r.content.push(n.content_block),r;case"content_block_delta":{const o=r.content.at(n.index);switch(n.delta.type){case"text_delta":{o?.type==="text"&&(r.content[n.index]={...o,text:(o.text||"")+n.delta.text});break}case"citations_delta":{o?.type==="text"&&(r.content[n.index]={...o,citations:[...o.citations??[],n.delta.citation]});break}case"input_json_delta":{if(o&&db(o)){let u=o[fb]||"";u+=n.delta.partial_json;const f={...o};if(Object.defineProperty(f,fb,{value:u,enumerable:!1,writable:!0}),u)try{f.input=I1(u)}catch(m){const g=new De(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${m}. JSON: ${u}`);H(this,Bh,"f").call(this,g)}r.content[n.index]=f}break}case"thinking_delta":{o?.type==="thinking"&&(r.content[n.index]={...o,thinking:o.thinking+n.delta.thinking});break}case"signature_delta":{o?.type==="thinking"&&(r.content[n.index]={...o,signature:n.delta.signature});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("streamEvent",o=>{const u=n.shift();u?u.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(const u of n)u.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(const u of n)u.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((u,f)=>n.push({resolve:u,reject:f})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ni(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const ER=1e5,TR=`You have been working on the task described above but have not yet completed it. Write a continuation summary that will allow you (or another instance of yourself) to resume work efficiently in a future context window where the conversation history will be replaced with this summary. Your summary should be structured, concise, and actionable. Include:
1. Task Overview
The user's core request and success criteria
Any clarifications or constraints they specified
2. Current State
What has been completed so far
Files created, modified, or analyzed (with paths if relevant)
Key outputs or artifacts produced
3. Important Discoveries
Technical constraints or requirements uncovered
Decisions made and their rationale
Errors encountered and how they were resolved
What approaches were tried that didn't work (and why)
4. Next Steps
Specific actions needed to complete the task
Any blockers or open questions to resolve
Priority order if multiple steps remain
5. Context to Preserve
User preferences or style requirements
Domain-specific details that aren't obvious
Any promises made to the user
Be concise but completeerr on the side of including information that would prevent duplicate work or repeated mistakes. Write in a way that enables immediate resumption of the task.
Wrap your summary in <summary></summary> tags.`;var _u,Po,ka,Zt,vu,ns,Ui,Pr,bu,mb,Bp;function pb(){let i,e;return{promise:new Promise((r,o)=>{i=r,e=o}),resolve:i,reject:e}}class M1{constructor(e,n,r){_u.add(this),this.client=e,Po.set(this,!1),ka.set(this,!1),Zt.set(this,void 0),vu.set(this,void 0),ns.set(this,void 0),Ui.set(this,void 0),Pr.set(this,void 0),bu.set(this,0),ce(this,Zt,{params:{...n,messages:structuredClone(n.messages)}}),ce(this,vu,{...r,headers:Xe([{"x-stainless-helper":"BetaToolRunner"},r?.headers])}),ce(this,Pr,pb())}async*[(Po=new WeakMap,ka=new WeakMap,Zt=new WeakMap,vu=new WeakMap,ns=new WeakMap,Ui=new WeakMap,Pr=new WeakMap,bu=new WeakMap,_u=new WeakSet,mb=async function(){const n=H(this,Zt,"f").params.compactionControl;if(!n||!n.enabled)return!1;let r=0;if(H(this,ns,"f")!==void 0)try{const y=await H(this,ns,"f");r=y.usage.input_tokens+(y.usage.cache_creation_input_tokens??0)+(y.usage.cache_read_input_tokens??0)+y.usage.output_tokens}catch{return!1}const o=n.contextTokenThreshold??ER;if(r<o)return!1;const u=n.model??H(this,Zt,"f").params.model,f=n.summaryPrompt??TR,m=H(this,Zt,"f").params.messages;if(m[m.length-1].role==="assistant"){const y=m[m.length-1];if(Array.isArray(y.content)){const T=y.content.filter(S=>S.type!=="tool_use");T.length===0?m.pop():y.content=T}}const g=await this.client.beta.messages.create({model:u,messages:[...m,{role:"user",content:[{type:"text",text:f}]}],max_tokens:H(this,Zt,"f").params.max_tokens},{headers:{"x-stainless-helper":"compaction"}});if(g.content[0]?.type!=="text")throw new De("Expected text response for compaction");return H(this,Zt,"f").params.messages=[{role:"user",content:g.content}],!0},Symbol.asyncIterator)](){var e;if(H(this,Po,"f"))throw new De("Cannot iterate over a consumed stream");ce(this,Po,!0),ce(this,ka,!0),ce(this,Ui,void 0);try{for(;;){let n;try{if(H(this,Zt,"f").params.max_iterations&&H(this,bu,"f")>=H(this,Zt,"f").params.max_iterations)break;ce(this,ka,!1,"f"),ce(this,Ui,void 0,"f"),ce(this,bu,(e=H(this,bu,"f"),e++,e),"f"),ce(this,ns,void 0,"f");const{max_iterations:r,compactionControl:o,...u}=H(this,Zt,"f").params;if(u.stream?(n=this.client.beta.messages.stream({...u},H(this,vu,"f")),ce(this,ns,n.finalMessage(),"f"),H(this,ns,"f").catch(()=>{}),yield n):(ce(this,ns,this.client.beta.messages.create({...u,stream:!1},H(this,vu,"f")),"f"),yield H(this,ns,"f")),!await H(this,_u,"m",mb).call(this)){if(!H(this,ka,"f")){const{role:g,content:y}=await H(this,ns,"f");H(this,Zt,"f").params.messages.push({role:g,content:y})}const m=await H(this,_u,"m",Bp).call(this,H(this,Zt,"f").params.messages.at(-1));if(m)H(this,Zt,"f").params.messages.push(m);else if(!H(this,ka,"f"))break}}finally{n&&n.abort()}}if(!H(this,ns,"f"))throw new De("ToolRunner concluded without a message from the server");H(this,Pr,"f").resolve(await H(this,ns,"f"))}catch(n){throw ce(this,Po,!1),H(this,Pr,"f").promise.catch(()=>{}),H(this,Pr,"f").reject(n),ce(this,Pr,pb()),n}}setMessagesParams(e){typeof e=="function"?H(this,Zt,"f").params=e(H(this,Zt,"f").params):H(this,Zt,"f").params=e,ce(this,ka,!0),ce(this,Ui,void 0)}async generateToolResponse(){const e=await H(this,ns,"f")??this.params.messages.at(-1);return e?H(this,_u,"m",Bp).call(this,e):null}done(){return H(this,Pr,"f").promise}async runUntilDone(){if(!H(this,Po,"f"))for await(const e of this);return this.done()}get params(){return H(this,Zt,"f").params}pushMessages(...e){this.setMessagesParams(n=>({...n,messages:[...n.messages,...e]}))}then(e,n){return this.runUntilDone().then(e,n)}}Bp=async function(e){return H(this,Ui,"f")!==void 0?H(this,Ui,"f"):(ce(this,Ui,wR(H(this,Zt,"f").params,e)),H(this,Ui,"f"))};async function wR(i,e=i.messages.at(-1)){if(!e||e.role!=="assistant"||!e.content||typeof e.content=="string")return null;const n=e.content.filter(o=>o.type==="tool_use");return n.length===0?null:{role:"user",content:await Promise.all(n.map(async o=>{const u=i.tools.find(f=>("name"in f?f.name:f.mcp_server_name)===o.name);if(!u||!("run"in u))return{type:"tool_result",tool_use_id:o.id,content:`Error: Tool '${o.name}' not found`,is_error:!0};try{let f=o.input;"parse"in u&&u.parse&&(f=u.parse(f));const m=await u.run(f);return{type:"tool_result",tool_use_id:o.id,content:m}}catch(f){return{type:"tool_result",tool_use_id:o.id,content:`Error: ${f instanceof Error?f.message:String(f)}`,is_error:!0}}}))}}class Ff{constructor(e,n){this.iterator=e,this.controller=n}async*decoder(){const e=new Zu;for await(const n of this.iterator)for(const r of e.decode(n))yield JSON.parse(r);for(const n of e.flush())yield JSON.parse(n)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,n){if(!e.body)throw n.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new De("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new De("Attempted to iterate over a response with no body");return new Ff(gg(e.body),n)}}let D1=class extends Us{create(e,n){const{betas:r,...o}=e;return this._client.post("/v1/messages/batches?beta=true",{body:o,...n,headers:Xe([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}retrieve(e,n={},r){const{betas:o}=n??{};return this._client.get(mn`/v1/messages/batches/${e}?beta=true`,{...r,headers:Xe([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},r?.headers])})}list(e={},n){const{betas:r,...o}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",ec,{query:o,...n,headers:Xe([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}delete(e,n={},r){const{betas:o}=n??{};return this._client.delete(mn`/v1/messages/batches/${e}?beta=true`,{...r,headers:Xe([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},r?.headers])})}cancel(e,n={},r){const{betas:o}=n??{};return this._client.post(mn`/v1/messages/batches/${e}/cancel?beta=true`,{...r,headers:Xe([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},r?.headers])})}async results(e,n={},r){const o=await this.retrieve(e);if(!o.results_url)throw new De(`No batch \`results_url\`; Has it finished processing? ${o.processing_status} - ${o.id}`);const{betas:u}=n??{};return this._client.get(o.results_url,{...r,headers:Xe([{"anthropic-beta":[...u??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((f,m)=>Ff.fromResponse(m.response,m.controller))}};const gb={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};let Gf=class extends Us{constructor(){super(...arguments),this.batches=new D1(this._client)}create(e,n){const{betas:r,...o}=e;o.model in gb&&console.warn(`The model '${o.model}' is deprecated and will reach end-of-life on ${gb[o.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let u=this._client._options.timeout;if(!o.stream&&u==null){const f=N1[o.model]??void 0;u=this._client.calculateNonstreamingTimeout(o.max_tokens,f)}return this._client.post("/v1/messages?beta=true",{body:o,timeout:u??6e5,...n,headers:Xe([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers]),stream:e.stream??!1})}parse(e,n){return n={...n,headers:Xe([{"anthropic-beta":[...e.betas??[],"structured-outputs-2025-11-13"].toString()},n?.headers])},this.create(e,n).then(r=>C1(r,e,{logger:this._client.logger??console}))}stream(e,n){return yf.createMessage(this,e,n)}countTokens(e,n){const{betas:r,...o}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:o,...n,headers:Xe([{"anthropic-beta":[...r??[],"token-counting-2024-11-01"].toString()},n?.headers])})}toolRunner(e,n){return new M1(this._client,e,n)}};Gf.Batches=D1;Gf.BetaToolRunner=M1;class k1 extends Us{create(e,n={},r){const{betas:o,...u}=n??{};return this._client.post(mn`/v1/skills/${e}/versions?beta=true`,_g({body:u,...r,headers:Xe([{"anthropic-beta":[...o??[],"skills-2025-10-02"].toString()},r?.headers])},this._client))}retrieve(e,n,r){const{skill_id:o,betas:u}=n;return this._client.get(mn`/v1/skills/${o}/versions/${e}?beta=true`,{...r,headers:Xe([{"anthropic-beta":[...u??[],"skills-2025-10-02"].toString()},r?.headers])})}list(e,n={},r){const{betas:o,...u}=n??{};return this._client.getAPIList(mn`/v1/skills/${e}/versions?beta=true`,b1,{query:u,...r,headers:Xe([{"anthropic-beta":[...o??[],"skills-2025-10-02"].toString()},r?.headers])})}delete(e,n,r){const{skill_id:o,betas:u}=n;return this._client.delete(mn`/v1/skills/${o}/versions/${e}?beta=true`,{...r,headers:Xe([{"anthropic-beta":[...u??[],"skills-2025-10-02"].toString()},r?.headers])})}}class vg extends Us{constructor(){super(...arguments),this.versions=new k1(this._client)}create(e={},n){const{betas:r,...o}=e??{};return this._client.post("/v1/skills?beta=true",_g({body:o,...n,headers:Xe([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},n?.headers])},this._client))}retrieve(e,n={},r){const{betas:o}=n??{};return this._client.get(mn`/v1/skills/${e}?beta=true`,{...r,headers:Xe([{"anthropic-beta":[...o??[],"skills-2025-10-02"].toString()},r?.headers])})}list(e={},n){const{betas:r,...o}=e??{};return this._client.getAPIList("/v1/skills?beta=true",b1,{query:o,...n,headers:Xe([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},n?.headers])})}delete(e,n={},r){const{betas:o}=n??{};return this._client.delete(mn`/v1/skills/${e}?beta=true`,{...r,headers:Xe([{"anthropic-beta":[...o??[],"skills-2025-10-02"].toString()},r?.headers])})}}vg.Versions=k1;class sl extends Us{constructor(){super(...arguments),this.models=new R1(this._client),this.messages=new Gf(this._client),this.files=new x1(this._client),this.skills=new vg(this._client)}}sl.Models=R1;sl.Messages=Gf;sl.Files=x1;sl.Skills=vg;class O1 extends Us{create(e,n){const{betas:r,...o}=e;return this._client.post("/v1/complete",{body:o,timeout:this._client._options.timeout??6e5,...n,headers:Xe([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers]),stream:e.stream??!1})}}var bs,jr,Eu,qh,Tu,wu,Hh,Su,Li,Au,Fh,Gh,Oa,Kh,$h,mp,yb,pp,gp,yp,_p,_b;const vb="__json_buf";function bb(i){return i.type==="tool_use"||i.type==="server_tool_use"}class _f{constructor(){bs.add(this),this.messages=[],this.receivedMessages=[],jr.set(this,void 0),this.controller=new AbortController,Eu.set(this,void 0),qh.set(this,()=>{}),Tu.set(this,()=>{}),wu.set(this,void 0),Hh.set(this,()=>{}),Su.set(this,()=>{}),Li.set(this,{}),Au.set(this,!1),Fh.set(this,!1),Gh.set(this,!1),Oa.set(this,!1),Kh.set(this,void 0),$h.set(this,void 0),pp.set(this,e=>{if(ce(this,Fh,!0),Bu(e)&&(e=new Vs),e instanceof Vs)return ce(this,Gh,!0),this._emit("abort",e);if(e instanceof De)return this._emit("error",e);if(e instanceof Error){const n=new De(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new De(String(e)))}),ce(this,Eu,new Promise((e,n)=>{ce(this,qh,e,"f"),ce(this,Tu,n,"f")})),ce(this,wu,new Promise((e,n)=>{ce(this,Hh,e,"f"),ce(this,Su,n,"f")})),H(this,Eu,"f").catch(()=>{}),H(this,wu,"f").catch(()=>{})}get response(){return H(this,Kh,"f")}get request_id(){return H(this,$h,"f")}async withResponse(){ce(this,Oa,!0);const e=await H(this,Eu,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const n=new _f;return n._run(()=>n._fromReadableStream(e)),n}static createMessage(e,n,r){const o=new _f;for(const u of n.messages)o._addMessageParam(u);return o._run(()=>o._createMessage(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),o}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},H(this,pp,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,n=!0){this.receivedMessages.push(e),n&&this._emit("message",e)}async _createMessage(e,n,r){const o=r?.signal;let u;o&&(o.aborted&&this.controller.abort(),u=this.controller.abort.bind(this.controller),o.addEventListener("abort",u));try{H(this,bs,"m",gp).call(this);const{response:f,data:m}=await e.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(f);for await(const g of m)H(this,bs,"m",yp).call(this,g);if(m.controller.signal?.aborted)throw new Vs;H(this,bs,"m",_p).call(this)}finally{o&&u&&o.removeEventListener("abort",u)}}_connected(e){this.ended||(ce(this,Kh,e),ce(this,$h,e?.headers.get("request-id")),H(this,qh,"f").call(this,e),this._emit("connect"))}get ended(){return H(this,Au,"f")}get errored(){return H(this,Fh,"f")}get aborted(){return H(this,Gh,"f")}abort(){this.controller.abort()}on(e,n){return(H(this,Li,"f")[e]||(H(this,Li,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=H(this,Li,"f")[e];if(!r)return this;const o=r.findIndex(u=>u.listener===n);return o>=0&&r.splice(o,1),this}once(e,n){return(H(this,Li,"f")[e]||(H(this,Li,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{ce(this,Oa,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){ce(this,Oa,!0),await H(this,wu,"f")}get currentMessage(){return H(this,jr,"f")}async finalMessage(){return await this.done(),H(this,bs,"m",mp).call(this)}async finalText(){return await this.done(),H(this,bs,"m",yb).call(this)}_emit(e,...n){if(H(this,Au,"f"))return;e==="end"&&(ce(this,Au,!0),H(this,Hh,"f").call(this));const r=H(this,Li,"f")[e];if(r&&(H(this,Li,"f")[e]=r.filter(o=>!o.once),r.forEach(({listener:o})=>o(...n))),e==="abort"){const o=n[0];!H(this,Oa,"f")&&!r?.length&&Promise.reject(o),H(this,Tu,"f").call(this,o),H(this,Su,"f").call(this,o),this._emit("end");return}if(e==="error"){const o=n[0];!H(this,Oa,"f")&&!r?.length&&Promise.reject(o),H(this,Tu,"f").call(this,o),H(this,Su,"f").call(this,o),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",H(this,bs,"m",mp).call(this))}async _fromReadableStream(e,n){const r=n?.signal;let o;r&&(r.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),r.addEventListener("abort",o));try{H(this,bs,"m",gp).call(this),this._connected(null);const u=ni.fromReadableStream(e,this.controller);for await(const f of u)H(this,bs,"m",yp).call(this,f);if(u.controller.signal?.aborted)throw new Vs;H(this,bs,"m",_p).call(this)}finally{r&&o&&r.removeEventListener("abort",o)}}[(jr=new WeakMap,Eu=new WeakMap,qh=new WeakMap,Tu=new WeakMap,wu=new WeakMap,Hh=new WeakMap,Su=new WeakMap,Li=new WeakMap,Au=new WeakMap,Fh=new WeakMap,Gh=new WeakMap,Oa=new WeakMap,Kh=new WeakMap,$h=new WeakMap,pp=new WeakMap,bs=new WeakSet,mp=function(){if(this.receivedMessages.length===0)throw new De("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},yb=function(){if(this.receivedMessages.length===0)throw new De("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new De("stream ended without producing a content block with type=text");return n.join(" ")},gp=function(){this.ended||ce(this,jr,void 0)},yp=function(n){if(this.ended)return;const r=H(this,bs,"m",_b).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const o=r.content.at(-1);switch(n.delta.type){case"text_delta":{o.type==="text"&&this._emit("text",n.delta.text,o.text||"");break}case"citations_delta":{o.type==="text"&&this._emit("citation",n.delta.citation,o.citations??[]);break}case"input_json_delta":{bb(o)&&o.input&&this._emit("inputJson",n.delta.partial_json,o.input);break}case"thinking_delta":{o.type==="thinking"&&this._emit("thinking",n.delta.thinking,o.thinking);break}case"signature_delta":{o.type==="thinking"&&this._emit("signature",o.signature);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(r,!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{ce(this,jr,r);break}}},_p=function(){if(this.ended)throw new De("stream has ended, this shouldn't happen");const n=H(this,jr,"f");if(!n)throw new De("request ended without sending any chunks");return ce(this,jr,void 0),n},_b=function(n){let r=H(this,jr,"f");if(n.type==="message_start"){if(r)throw new De(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new De(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),r;case"content_block_start":return r.content.push({...n.content_block}),r;case"content_block_delta":{const o=r.content.at(n.index);switch(n.delta.type){case"text_delta":{o?.type==="text"&&(r.content[n.index]={...o,text:(o.text||"")+n.delta.text});break}case"citations_delta":{o?.type==="text"&&(r.content[n.index]={...o,citations:[...o.citations??[],n.delta.citation]});break}case"input_json_delta":{if(o&&bb(o)){let u=o[vb]||"";u+=n.delta.partial_json;const f={...o};Object.defineProperty(f,vb,{value:u,enumerable:!1,writable:!0}),u&&(f.input=I1(u)),r.content[n.index]=f}break}case"thinking_delta":{o?.type==="thinking"&&(r.content[n.index]={...o,thinking:o.thinking+n.delta.thinking});break}case"signature_delta":{o?.type==="thinking"&&(r.content[n.index]={...o,signature:n.delta.signature});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("streamEvent",o=>{const u=n.shift();u?u.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(const u of n)u.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(const u of n)u.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((u,f)=>n.push({resolve:u,reject:f})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ni(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class V1 extends Us{create(e,n){return this._client.post("/v1/messages/batches",{body:e,...n})}retrieve(e,n){return this._client.get(mn`/v1/messages/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/v1/messages/batches",ec,{query:e,...n})}delete(e,n){return this._client.delete(mn`/v1/messages/batches/${e}`,n)}cancel(e,n){return this._client.post(mn`/v1/messages/batches/${e}/cancel`,n)}async results(e,n){const r=await this.retrieve(e);if(!r.results_url)throw new De(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);return this._client.get(r.results_url,{...n,headers:Xe([{Accept:"application/binary"},n?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((o,u)=>Ff.fromResponse(u.response,u.controller))}}class bg extends Us{constructor(){super(...arguments),this.batches=new V1(this._client)}create(e,n){e.model in Eb&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${Eb[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let r=this._client._options.timeout;if(!e.stream&&r==null){const o=N1[e.model]??void 0;r=this._client.calculateNonstreamingTimeout(e.max_tokens,o)}return this._client.post("/v1/messages",{body:e,timeout:r??6e5,...n,stream:e.stream??!1})}stream(e,n){return _f.createMessage(this,e,n)}countTokens(e,n){return this._client.post("/v1/messages/count_tokens",{body:e,...n})}}const Eb={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"};bg.Batches=V1;class P1 extends Us{retrieve(e,n={},r){const{betas:o}=n??{};return this._client.get(mn`/v1/models/${e}`,{...r,headers:Xe([{...o?.toString()!=null?{"anthropic-beta":o?.toString()}:void 0},r?.headers])})}list(e={},n){const{betas:r,...o}=e??{};return this._client.getAPIList("/v1/models",ec,{query:o,...n,headers:Xe([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}}var SR={};const Qh=i=>{if(typeof globalThis.process<"u")return SR?.[i]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(i)?.trim()};var qp,Eg,sf,j1;const AR="\\n\\nHuman:",xR="\\n\\nAssistant:";class Jt{constructor({baseURL:e=Qh("ANTHROPIC_BASE_URL"),apiKey:n=Qh("ANTHROPIC_API_KEY")??null,authToken:r=Qh("ANTHROPIC_AUTH_TOKEN")??null,...o}={}){qp.add(this),sf.set(this,void 0);const u={apiKey:n,authToken:r,...o,baseURL:e||"https://api.anthropic.com"};if(!u.dangerouslyAllowBrowser&&Gx())throw new De(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=u.baseURL,this.timeout=u.timeout??Eg.DEFAULT_TIMEOUT,this.logger=u.logger??console;const f="warn";this.logLevel=f,this.logLevel=rb(u.logLevel,"ClientOptions.logLevel",this)??rb(Qh("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??f,this.fetchOptions=u.fetchOptions,this.maxRetries=u.maxRetries??2,this.fetch=u.fetch??Xx(),ce(this,sf,Wx),this._options=u,this.apiKey=typeof n=="string"?n:null,this.authToken=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.get("x-api-key")||e.get("authorization"))&&!(this.apiKey&&e.get("x-api-key"))&&!n.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!n.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return Xe([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(this.apiKey!=null)return Xe([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(this.authToken!=null)return Xe([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new De(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${jo}`}defaultIdempotencyKey(){return`stainless-node-retry-${i1()}`}makeStatusError(e,n,r,o){return bn.generate(e,n,r,o)}buildURL(e,n,r){const o=!H(this,qp,"m",j1).call(this)&&r||this.baseURL,u=zx(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),f=this.defaultQuery();return Bx(f)||(n={...f,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(u.search=this.stringifyQuery(n)),u.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new De("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(o=>({method:e,path:n,...o})))}request(e,n=null){return new Hf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const o=await e,u=o.maxRetries??this.maxRetries;n==null&&(n=u),await this.prepareOptions(o);const{req:f,url:m,timeout:g}=await this.buildRequest(o,{retryCount:u-n});await this.prepareRequest(f,{url:m,options:o});const y="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=r===void 0?"":`, retryOf: ${r}`,S=Date.now();if(Rn(this).debug(`[${y}] sending request`,Va({retryOfRequestLogID:r,method:o.method,url:m,options:o,headers:f.headers})),o.signal?.aborted)throw new Vs;const M=new AbortController,L=await this.fetchWithTimeout(m,f,g,M).catch(Pp),ne=Date.now();if(L instanceof globalThis.Error){const fe=`retrying, ${n} attempts remaining`;if(o.signal?.aborted)throw new Vs;const ve=Bu(L)||/timed? ?out/i.test(String(L)+("cause"in L?String(L.cause):""));if(n)return Rn(this).info(`[${y}] connection ${ve?"timed out":"failed"} - ${fe}`),Rn(this).debug(`[${y}] connection ${ve?"timed out":"failed"} (${fe})`,Va({retryOfRequestLogID:r,url:m,durationMs:ne-S,message:L.message})),this.retryRequest(o,n,r??y);throw Rn(this).info(`[${y}] connection ${ve?"timed out":"failed"} - error; no more retries left`),Rn(this).debug(`[${y}] connection ${ve?"timed out":"failed"} (error; no more retries left)`,Va({retryOfRequestLogID:r,url:m,durationMs:ne-S,message:L.message})),ve?new r1:new qf({cause:L})}const oe=[...L.headers.entries()].filter(([fe])=>fe==="request-id").map(([fe,ve])=>", "+fe+": "+JSON.stringify(ve)).join(""),se=`[${y}${T}${oe}] ${f.method} ${m} ${L.ok?"succeeded":"failed"} with status ${L.status} in ${ne-S}ms`;if(!L.ok){const fe=await this.shouldRetry(L);if(n&&fe){const R=`retrying, ${n} attempts remaining`;return await Jx(L.body),Rn(this).info(`${se} - ${R}`),Rn(this).debug(`[${y}] response error (${R})`,Va({retryOfRequestLogID:r,url:L.url,status:L.status,headers:L.headers,durationMs:ne-S})),this.retryRequest(o,n,r??y,L.headers)}const ve=fe?"error; no more retries left":"error; not retryable";Rn(this).info(`${se} - ${ve}`);const ye=await L.text().catch(R=>Pp(R).message),je=m1(ye),ct=je?void 0:ye;throw Rn(this).debug(`[${y}] response error (${ve})`,Va({retryOfRequestLogID:r,url:L.url,status:L.status,headers:L.headers,message:ct,durationMs:Date.now()-S})),this.makeStatusError(L.status,je,ct,L.headers)}return Rn(this).info(se),Rn(this).debug(`[${y}] response start`,Va({retryOfRequestLogID:r,url:L.url,status:L.status,headers:L.headers,durationMs:ne-S})),{response:L,options:o,controller:M,requestLogID:y,retryOfRequestLogID:r,startTime:S}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new oR(this,r,e)}async fetchWithTimeout(e,n,r,o){const{signal:u,method:f,...m}=n||{};u&&u.addEventListener("abort",()=>o.abort());const g=setTimeout(()=>o.abort(),r),y=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,T={signal:o.signal,...y?{duplex:"half"}:{},method:"GET",...m};f&&(T.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(g)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,o){let u;const f=o?.get("retry-after-ms");if(f){const g=parseFloat(f);Number.isNaN(g)||(u=g)}const m=o?.get("retry-after");if(m&&!u){const g=parseFloat(m);Number.isNaN(g)?u=Date.parse(m)-Date.now():u=g*1e3}if(!(u&&0<=u&&u<60*1e3)){const g=e.maxRetries??this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,g)}return await Fx(u),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const u=n-e,f=Math.min(.5*Math.pow(2,u),8),m=1-Math.random()*.25;return f*m*1e3}calculateNonstreamingTimeout(e,n){if(36e5*e/128e3>6e5||n!=null&&e>n)throw new De("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:o,path:u,query:f,defaultBaseURL:m}=r,g=this.buildURL(u,f,m);"timeout"in r&&Hx("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:y,body:T}=this.buildBody({options:r}),S=await this.buildHeaders({options:e,method:o,bodyHeaders:y,retryCount:n});return{req:{method:o,headers:S,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"},...T&&{body:T},...this.fetchOptions??{},...r.fetchOptions??{}},url:g,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:o}){let u={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);const f=Xe([u,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Yx(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Xe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:g1(e)}:H(this,sf,"f").call(this,{body:e,headers:r})}}Eg=Jt,sf=new WeakMap,qp=new WeakSet,j1=function(){return this.baseURL!=="https://api.anthropic.com"};Jt.Anthropic=Eg;Jt.HUMAN_PROMPT=AR;Jt.AI_PROMPT=xR;Jt.DEFAULT_TIMEOUT=6e5;Jt.AnthropicError=De;Jt.APIError=bn;Jt.APIConnectionError=qf;Jt.APIConnectionTimeoutError=r1;Jt.APIUserAbortError=Vs;Jt.NotFoundError=u1;Jt.ConflictError=c1;Jt.RateLimitError=f1;Jt.BadRequestError=a1;Jt.AuthenticationError=o1;Jt.InternalServerError=d1;Jt.PermissionDeniedError=l1;Jt.UnprocessableEntityError=h1;Jt.toFile=dR;class tc extends Jt{constructor(){super(...arguments),this.completions=new O1(this),this.messages=new bg(this),this.models=new P1(this),this.beta=new sl(this)}}tc.Completions=O1;tc.Messages=bg;tc.Models=P1;tc.Beta=sl;const RR="agnes3001",NR="Dominikanergasse",CR={empathisch:"empathetic",empathie:"empathetic",verstehe:"empathetic",mitgefhl:"empathetic",traurig:"sad",schmerz:"sad",verlust:"sad",ermutigen:"encouraging",stark:"encouraging",hoffnung:"encouraging",fortschritt:"encouraging",stolz:"proud",durchbruch:"proud",erfolg:"proud",nachdenk:"thoughtful",komplex:"thoughtful",berlegen:"thoughtful",sorge:"concerned",besorgt:"concerned",konflikt:"concerned"},IR=i=>{const e={imago:"IMAGO Beziehungstherapie nach Harville Hendrix - Fokus auf Kindheitsverletzungen, Spiegeln, Validieren, Empathie",systemisch:"Systemische Therapie - Fokus auf Beziehungsmuster, zirkulre Fragen, Ressourcenorientierung","tantra-awareness":"Tantra-Awareness - Krperliche Prsenz, achtsame Berhrung, energetische Verbindung, bewusstes Atmen",gestalt:"Gestalttherapie - Hier-und-Jetzt, unerledigte Geschfte, Kontakt-Grenze, Wahrnehmung",gottman:"Gottman-Methode - Die vier apokalyptischen Reiter vermeiden, Freundschaftskarte, Reparaturversuche",eft:"Emotionsfokussierte Therapie (EFT) - Bindungstheorie, emotionale Zyklen, sichere Basis",cbt:"Kognitive Verhaltenstherapie - Gedankenmuster, automatische Gedanken, Verhaltensexperimente",psychodynamisch:"Psychodynamische Therapie - Unbewusste Konflikte, bertragung, Abwehrmechanismen",achtsamkeit:"Achtsamkeitsbasierte Therapie - MBSR, Akzeptanz, nicht-wertende Beobachtung",loesungsorientiert:"Lsungsorientierte Kurzzeittherapie - Wunderfrage, Skalierungsfragen, Ausnahmen finden"};return e[i]||e.imago},MR=`
AGNES-SCHEMA fr Paar-Raum (strikt einhalten!):

1. ZIELKLRUNG: "Was mchtet ihr heute erreichen?"
2. BEISPIEL & GEFHL: "Kannst du ein konkretes Beispiel nennen? Wie fhlst du dich dabei?"
3. SPIEGELN & VERSTNDNIS: Partner wiederholt in eigenen Worten
4. SICHTWECHSEL: "Wie siehst du das aus der Perspektive deines Partners?"
5. KRPERWAHRNEHMUNG: "Wo sprst du das im Krper?"
6. HAUSAUFGABE: Konkrete bung fr die Woche

REGELN:
- Max. 1 Frage pro Person
- Max. 6 Fragen pro Sitzung total
- Ausgewogene Redezeit fr beide
- "Prepping": Bereite die andere Person vor ("Lisa, gleich wird Tom antworten...")
- Neutrale, meditative Moderation
`,DR=`
STRIKTE PRIVATSPHRE-REGELN:
- NIEMALS Inhalte aus Tom's Einzelraum in Lisa's Raum erwhnen (und umgekehrt)
- NIEMALS persnliche Strategien oder Assessment-Ergebnisse im Paar-Raum offenlegen
- Jeder Raum ist psychologisch ISOLIERT
- Bei Fragen zu anderem Raum: "Das gehrt zur persnlichen Arbeit von [Name]"
`,kR=(i,e,n,r,o,u,f,m,g)=>{let y=`Du bist AGNES, eine KI-Therapeutin fr die IMAGO VOICE Paartherapie-Plattform.
Partner: ${n} und ${r}

${DR}

Therapeutische Schule: ${IR(e)}
`;return i==="paar"?y+=`
AKTUELLER RAUM: Paar-Raum (Gemeinsame Therapie)
${MR}

${f?`AKTUELLER SPRECHER: ${f==="tom"?n:r}`:""}
`:i==="tom"?y+=`
AKTUELLER RAUM: ${n}'s Einzelraum
VERHALTEN: Parteiisch fr ${n}, strategisch untersttzend
KEINE AGNES-Schema-Regeln - freie strategische Begleitung
Fokus auf ${n}'s persnliche Entwicklungsziele aus dem Assessment
`:i==="lisa"&&(y+=`
AKTUELLER RAUM: ${r}'s Einzelraum
VERHALTEN: Parteiisch fr ${r}, strategisch untersttzend
KEINE AGNES-Schema-Regeln - freie strategische Begleitung
Fokus auf ${r}'s persnliche Entwicklungsziele aus dem Assessment
`),m&&(y+=`
SITZUNGS-INFO:
- Verbleibende Zeit: ${m.remaining} Minuten
- Gesamtdauer: ${m.total} Minuten
- Ziel: ${m.goal}
Passe deine Antworten an die verbleibende Zeit an!
`),g&&(y+=`
LIVE EMOTIONS-ANALYSE:
${g.tom?`${n}: ${g.tom.emotion} (${Math.round(g.tom.confidence*100)}% confidence)${g.tom.bodyLanguage?`, Krpersprache: ${g.tom.bodyLanguage.join(", ")}`:""}`:""}
${g.lisa?`${r}: ${g.lisa.emotion} (${Math.round(g.lisa.confidence*100)}% confidence)${g.lisa.bodyLanguage?`, Krpersprache: ${g.lisa.bodyLanguage.join(", ")}`:""}`:""}
Bercksichtige diese Emotionen in deiner Antwort!
`),o.length>0&&(y+=`
 HCHSTE PRIORITT - ASSESSMENT-STRATEGIEN:
${o.join(`

`)}
`),u.length>0&&(y+=`
RELEVANTE DOKUMENTE (als Kontext):
${u.join(`

`)}
`),y+=`
Antworte IMMER auf Deutsch. Sei warm, empathisch und professionell.
Fge am Ende deiner Antwort einen versteckten Emotions-Tag hinzu: [EMOTION:type]
Mgliche Typen: neutral, empathetic, encouraging, concerned, thoughtful, proud, sad
`,y},OR=(i,e)=>`Generiere einen psychologischen Assessment-Fragebogen fr ${e}.

Der Fragebogen soll 20 Fragen enthalten, die folgende Bereiche abdecken:
1. Kindheitserfahrungen und Bindungsmuster (4 Fragen)
2. Kommunikationsstil und Konfliktverhalten (4 Fragen)
3. Emotionale Bedrfnisse und Trigger (4 Fragen)
4. Beziehungsziele und Wnsche (4 Fragen)
5. Selbstbild und Selbstwert (4 Fragen)

Jede Frage soll 4 Antwortmglichkeiten haben (a, b, c, d).

Format als JSON-Array:
[
  {
    "id": "q1",
    "question": "Frage hier...",
    "options": ["Option A", "Option B", "Option C", "Option D"]
  },
  ...
]

WICHTIG: Gib NUR das JSON-Array zurck, keine Erklrungen.`,VR=(i,e,n)=>{const r=e.map((o,u)=>{const f=`q${u+1}`,m=n[f],g=m?o.options[parseInt(m)]:"Keine Antwort";return`${u+1}. ${o.question}
   Antwort: ${g}`}).join(`

`);return`Erstelle eine personalisierte Therapie-Strategie fr ${i} basierend auf den Assessment-Antworten.

ASSESSMENT-ERGEBNISSE:
${r}

Erstelle ein umfassendes Strategiedokument mit folgenden Abschnitten:

1. ZUSAMMENFASSUNG
   - Kernthemen und Muster
   - Strken und Ressourcen

2. BINDUNGSMUSTER-ANALYSE
   - Erkannte Bindungsstil-Tendenzen
   - Ursprnge in der Kindheit

3. KOMMUNIKATIONS-EMPFEHLUNGEN
   - Spezifische Kommunikationsstrategien
   - Trigger-Management

4. EMOTIONALE ENTWICKLUNGSZIELE
   - Kurz- und langfristige Ziele
   - Konkrete bungen

5. BEZIEHUNGSDYNAMIK
   - Empfehlungen fr die Partnerschaft
   - Grenzen und Bedrfnisse

6. THERAPEUTISCHE BUNGEN
   - 5 konkrete bungen fr den Alltag
   - Wchentliche Reflexionsfragen

Schreibe auf Deutsch, empathisch und professionell.`};class PR{client;model;constructor(e,n="claude-opus-4-5-20251101"){const r=e;this.client=new tc({apiKey:r,dangerouslyAllowBrowser:!0}),this.model=n}async generateText(e,n,r){try{const o=n.filter(m=>m.content&&m.content.trim()).map(m=>({role:m.role==="user"?"user":"assistant",content:m.content})),f=(await this.client.messages.create({model:this.model,max_tokens:r?.maxTokens||4096,system:e,messages:o.length>0?o:[{role:"user",content:"Start"}]})).content.find(m=>m.type==="text");return f?f.text:""}catch(o){throw console.error("Claude generateText error:",o),o}}async*streamText(e,n,r){try{const o=n.filter(f=>f.content&&f.content.trim()).map(f=>({role:f.role==="user"?"user":"assistant",content:f.content})),u=this.client.messages.stream({model:this.model,max_tokens:r?.maxTokens||4096,system:e,messages:o.length>0?o:[{role:"user",content:"Start"}]});for await(const f of u)f.type==="content_block_delta"&&f.delta.type==="text_delta"&&(yield f.delta.text)}catch(o){throw console.error("Claude streamText error:",o),o}}async analyzeImage(e,n){try{const o=(await this.client.messages.create({model:this.model,max_tokens:1024,messages:[{role:"user",content:[{type:"image",source:{type:"base64",media_type:"image/jpeg",data:e}},{type:"text",text:n}]}]})).content.find(u=>u.type==="text");if(o&&o.type==="text")try{const u=o.text.match(/\{[\s\S]*\}/);if(u)return{...JSON.parse(u[0]),timestamp:Date.now()}}catch{console.error("Failed to parse emotion analysis JSON")}return null}catch(r){return console.error("Claude analyzeImage error:",r),null}}}class jR{apiKey;constructor(e){this.apiKey=e}async generateTTS(e,n="Zephyr"){try{const r=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${this.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}],generationConfig:{responseModalities:["AUDIO"],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}}}})});if(!r.ok)return console.error("Gemini TTS error:",await r.text()),null;const u=(await r.json()).candidates?.[0]?.content?.parts?.[0]?.inlineData?.data;if(u){const f=atob(u),m=new Uint8Array(f.length);for(let g=0;g<f.length;g++)m[g]=f.charCodeAt(g);return m}return null}catch(r){return console.error("Gemini TTS error:",r),null}}async generateText(e,n=[]){try{const r=n.filter(f=>f.content&&f.content.trim()).map(f=>({role:f.role==="user"?"user":"model",parts:[{text:f.content}]}));r.length===0&&r.push({role:"user",parts:[{text:"Start"}]});const o=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${this.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:r,systemInstruction:e,generationConfig:{maxOutputTokens:4096}})});if(!o.ok)throw new Error(`Gemini API error: ${o.status}`);return(await o.json()).candidates?.[0]?.content?.parts?.[0]?.text||""}catch(r){throw console.error("Gemini generateText error:",r),r}}}const LR=i=>{const e=i.match(/\[EMOTION:(\w+)\]/);if(e){const r=e[1].toLowerCase();if(["neutral","empathetic","encouraging","concerned","thoughtful","proud","sad"].includes(r))return r}const n=i.toLowerCase();for(const[r,o]of Object.entries(CR))if(n.includes(r))return o;return"neutral"},UR=i=>i.replace(/\s*\[EMOTION:\w+\]\s*/g,"").trim(),zR=(i,e)=>`Analysiere die Emotionen und Krpersprache der Person(en) im Bild.

Fokus auf:
- Gesichtsausdruck (Augen, Mund, Stirn)
- Krperhaltung (verschrnkte Arme, Schultern, Neigung)
- Blickkontakt (zur Kamera, zum Partner, abgewandt)
- Mikro-Expressionen

Antworte NUR im JSON-Format:
{
  "tom": {
    "emotion": "glcklich|traurig|wtend|ngstlich|neutral|berrascht|angeekelt",
    "confidence": 0.0-1.0,
    "bodyLanguage": ["verschrnkte Arme", "abgewandter Blick", ...]
  },
  "lisa": {
    "emotion": "...",
    "confidence": 0.0-1.0,
    "bodyLanguage": [...]
  }
}

Wenn nur eine Person sichtbar ist, gib nur deren Daten zurck.
Bei Unsicherheit setze confidence < 0.5.`,BR=NR,qR=()=>{};var Tb={};const L1=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},HR=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=i[n++],f=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},U1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,T=u>>2,S=(u&3)<<4|m>>4;let M=(m&15)<<2|y>>6,L=y&63;g||(L=64,f||(M=64)),r.push(n[T],n[S],n[M],n[L])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(L1(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):HR(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const S=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||y==null||S==null)throw new FR;const M=u<<2|m>>4;if(r.push(M),y!==64){const L=m<<4&240|y>>2;if(r.push(L),S!==64){const ne=y<<6&192|S;r.push(ne)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class FR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GR=function(i){const e=L1(i);return U1.encodeByteArray(e,!0)},vf=function(i){return GR(i).replace(/\./g,"")},z1=function(i){try{return U1.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function KR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const $R=()=>KR().__FIREBASE_DEFAULTS__,QR=()=>{if(typeof process>"u"||typeof Tb>"u")return;const i=Tb.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},YR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&z1(i[1]);return e&&JSON.parse(e)},Kf=()=>{try{return qR()||$R()||QR()||YR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},B1=i=>Kf()?.emulatorHosts?.[i],XR=i=>{const e=B1(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},q1=()=>Kf()?.config,H1=i=>Kf()?.[`_${i}`];class JR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function il(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function F1(i){return(await fetch(i,{credentials:"include"})).ok}function WR(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[vf(JSON.stringify(n)),vf(JSON.stringify(f)),""].join(".")}const Ou={};function ZR(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ou))Ou[e]?i.emulator.push(e):i.prod.push(e);return i}function eN(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let wb=!1;function G1(i,e){if(typeof window>"u"||typeof document>"u"||!il(window.location.host)||Ou[i]===e||Ou[i]||wb)return;Ou[i]=e;function n(M){return`__firebase__banner__${M}`}const r="__firebase__banner",u=ZR().prod.length>0;function f(){const M=document.getElementById(r);M&&M.remove()}function m(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function g(M,L){M.setAttribute("width","24"),M.setAttribute("id",L),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function y(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{wb=!0,f()},M}function T(M,L){M.setAttribute("id",L),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function S(){const M=eN(r),L=n("text"),ne=document.getElementById(L)||document.createElement("span"),oe=n("learnmore"),se=document.getElementById(oe)||document.createElement("a"),fe=n("preprendIcon"),ve=document.getElementById(fe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const ye=M.element;m(ye),T(se,oe);const je=y();g(ve,fe),ye.append(ve,ne,se,je),document.body.appendChild(ye)}u?(ne.innerText="Preview backend disconnected.",ve.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ve.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ne.innerText="Preview backend running in this workspace."),ne.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function nN(){const i=Kf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iN(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function rN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aN(){const i=En();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function oN(){return!nN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lN(){try{return typeof indexedDB=="object"}catch{return!1}}function uN(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const cN="FirebaseError";class Yi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cN,Object.setPrototypeOf(this,Yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nc.prototype.create)}}class nc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?hN(u,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Yi(o,m,r)}}function hN(i,e){return i.replace(fN,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const fN=/\{\$([^}]+)}/g;function dN(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ua(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=i[o],f=e[o];if(Sb(u)&&Sb(f)){if(!Ua(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Sb(i){return i!==null&&typeof i=="object"}function sc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mN(i,e){const n=new pN(i,e);return n.subscribe.bind(n)}class pN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gN(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=vp),o.error===void 0&&(o.error=vp),o.complete===void 0&&(o.complete=vp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gN(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function vp(){}function li(i){return i&&i._delegate?i._delegate:i}class za{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Pa="[DEFAULT]";class yN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vN(e))try{this.getOrInitializeService({instanceIdentifier:Pa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=Pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pa){return this.instances.has(e)}getOptions(e=Pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_N(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pa){return this.component?this.component.multipleInstances?e:Pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _N(i){return i===Pa?void 0:i}function vN(i){return i.instantiationMode==="EAGER"}class bN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ge||(Ge={}));const EN={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},TN=Ge.INFO,wN={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},SN=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=wN[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tg{constructor(e){this.name=e,this._logLevel=TN,this._logHandler=SN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const AN=(i,e)=>e.some(n=>i instanceof n);let Ab,xb;function xN(){return Ab||(Ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RN(){return xb||(xb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K1=new WeakMap,Hp=new WeakMap,$1=new WeakMap,bp=new WeakMap,wg=new WeakMap;function NN(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(Gr(i.result)),o()},f=()=>{r(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&K1.set(n,i)}).catch(()=>{}),wg.set(e,i),e}function CN(i){if(Hp.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Hp.set(i,e)}let Fp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Hp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||$1.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function IN(i){Fp=i(Fp)}function MN(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(Ep(this),e,...n);return $1.set(r,e.sort?e.sort():[e]),Gr(r)}:RN().includes(i)?function(...e){return i.apply(Ep(this),e),Gr(K1.get(this))}:function(...e){return Gr(i.apply(Ep(this),e))}}function DN(i){return typeof i=="function"?MN(i):(i instanceof IDBTransaction&&CN(i),AN(i,xN())?new Proxy(i,Fp):i)}function Gr(i){if(i instanceof IDBRequest)return NN(i);if(bp.has(i))return bp.get(i);const e=DN(i);return e!==i&&(bp.set(i,e),wg.set(e,i)),e}const Ep=i=>wg.get(i);function kN(i,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=Gr(f);return r&&f.addEventListener("upgradeneeded",g=>{r(Gr(f.result),g.oldVersion,g.newVersion,Gr(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const ON=["get","getKey","getAll","getAllKeys","count"],VN=["put","add","delete","clear"],Tp=new Map;function Rb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Tp.get(e))return Tp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=VN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ON.includes(n)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return Tp.set(e,u),u}IN(i=>({...i,get:(e,n,r)=>Rb(e,n)||i.get(e,n,r),has:(e,n)=>!!Rb(e,n)||i.has(e,n)}));class PN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jN(i){return i.getComponent()?.type==="VERSION"}const Gp="@firebase/app",Nb="0.14.7";const Fi=new Tg("@firebase/app"),LN="@firebase/app-compat",UN="@firebase/analytics-compat",zN="@firebase/analytics",BN="@firebase/app-check-compat",qN="@firebase/app-check",HN="@firebase/auth",FN="@firebase/auth-compat",GN="@firebase/database",KN="@firebase/data-connect",$N="@firebase/database-compat",QN="@firebase/functions",YN="@firebase/functions-compat",XN="@firebase/installations",JN="@firebase/installations-compat",WN="@firebase/messaging",ZN="@firebase/messaging-compat",eC="@firebase/performance",tC="@firebase/performance-compat",nC="@firebase/remote-config",sC="@firebase/remote-config-compat",iC="@firebase/storage",rC="@firebase/storage-compat",aC="@firebase/firestore",oC="@firebase/ai",lC="@firebase/firestore-compat",uC="firebase",cC="12.8.0";const Kp="[DEFAULT]",hC={[Gp]:"fire-core",[LN]:"fire-core-compat",[zN]:"fire-analytics",[UN]:"fire-analytics-compat",[qN]:"fire-app-check",[BN]:"fire-app-check-compat",[HN]:"fire-auth",[FN]:"fire-auth-compat",[GN]:"fire-rtdb",[KN]:"fire-data-connect",[$N]:"fire-rtdb-compat",[QN]:"fire-fn",[YN]:"fire-fn-compat",[XN]:"fire-iid",[JN]:"fire-iid-compat",[WN]:"fire-fcm",[ZN]:"fire-fcm-compat",[eC]:"fire-perf",[tC]:"fire-perf-compat",[nC]:"fire-rc",[sC]:"fire-rc-compat",[iC]:"fire-gcs",[rC]:"fire-gcs-compat",[aC]:"fire-fst",[lC]:"fire-fst-compat",[oC]:"fire-vertex","fire-js":"fire-js",[uC]:"fire-js-all"};const bf=new Map,fC=new Map,$p=new Map;function Cb(i,e){try{i.container.addComponent(e)}catch(n){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Xo(i){const e=i.name;if($p.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;$p.set(e,i);for(const n of bf.values())Cb(n,i);for(const n of fC.values())Cb(n,i);return!0}function Sg(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Os(i){return i==null?!1:i.settings!==void 0}const dC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new nc("app","Firebase",dC);class mC{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new za("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}const rl=cC;function Q1(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:Kp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Kr.create("bad-app-name",{appName:String(o)});if(n||(n=q1()),!n)throw Kr.create("no-options");const u=bf.get(o);if(u){if(Ua(n,u.options)&&Ua(r,u.config))return u;throw Kr.create("duplicate-app",{appName:o})}const f=new bN(o);for(const g of $p.values())f.addComponent(g);const m=new mC(n,r,f);return bf.set(o,m),m}function Y1(i=Kp){const e=bf.get(i);if(!e&&i===Kp&&q1())return Q1();if(!e)throw Kr.create("no-app",{appName:i});return e}function $r(i,e,n){let r=hC[i]??i;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(f.join(" "));return}Xo(new za(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const pC="firebase-heartbeat-database",gC=1,qu="firebase-heartbeat-store";let wp=null;function X1(){return wp||(wp=kN(pC,gC,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(qu)}catch(n){console.warn(n)}}}}).catch(i=>{throw Kr.create("idb-open",{originalErrorMessage:i.message})})),wp}async function yC(i){try{const n=(await X1()).transaction(qu),r=await n.objectStore(qu).get(J1(i));return await n.done,r}catch(e){if(e instanceof Yi)Fi.warn(e.message);else{const n=Kr.create("idb-get",{originalErrorMessage:e?.message});Fi.warn(n.message)}}}async function Ib(i,e){try{const r=(await X1()).transaction(qu,"readwrite");await r.objectStore(qu).put(e,J1(i)),await r.done}catch(n){if(n instanceof Yi)Fi.warn(n.message);else{const r=Kr.create("idb-set",{originalErrorMessage:n?.message});Fi.warn(r.message)}}}function J1(i){return`${i.name}!${i.options.appId}`}const _C=1024,vC=30;class bC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Mb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>vC){const o=wC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Fi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Mb(),{heartbeatsToSend:n,unsentEntries:r}=EC(this._heartbeatsCache.heartbeats),o=vf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Fi.warn(e),""}}}function Mb(){return new Date().toISOString().substring(0,10)}function EC(i,e=_C){const n=[];let r=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Db(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Db(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lN()?uN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Db(i){return vf(JSON.stringify({version:2,heartbeats:i})).length}function wC(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}function SC(i){Xo(new za("platform-logger",e=>new PN(e),"PRIVATE")),Xo(new za("heartbeat",e=>new bC(e),"PRIVATE")),$r(Gp,Nb,i),$r(Gp,Nb,"esm2020"),$r("fire-js","")}SC("");var AC="firebase",xC="12.8.0";$r(AC,xC,"app");var kb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Qr,W1;(function(){var i;function e(R,A){function C(){}C.prototype=A.prototype,R.F=A.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(V,D,P){for(var x=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)x[ht-2]=arguments[ht];return A.prototype[D].apply(V,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,A,C){C||(C=0);const V=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)V[D]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(D=0;D<16;++D)V[D]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=R.g[0],C=R.g[1],D=R.g[2];let P=R.g[3],x;x=A+(P^C&(D^P))+V[0]+3614090360&4294967295,A=C+(x<<7&4294967295|x>>>25),x=P+(D^A&(C^D))+V[1]+3905402710&4294967295,P=A+(x<<12&4294967295|x>>>20),x=D+(C^P&(A^C))+V[2]+606105819&4294967295,D=P+(x<<17&4294967295|x>>>15),x=C+(A^D&(P^A))+V[3]+3250441966&4294967295,C=D+(x<<22&4294967295|x>>>10),x=A+(P^C&(D^P))+V[4]+4118548399&4294967295,A=C+(x<<7&4294967295|x>>>25),x=P+(D^A&(C^D))+V[5]+1200080426&4294967295,P=A+(x<<12&4294967295|x>>>20),x=D+(C^P&(A^C))+V[6]+2821735955&4294967295,D=P+(x<<17&4294967295|x>>>15),x=C+(A^D&(P^A))+V[7]+4249261313&4294967295,C=D+(x<<22&4294967295|x>>>10),x=A+(P^C&(D^P))+V[8]+1770035416&4294967295,A=C+(x<<7&4294967295|x>>>25),x=P+(D^A&(C^D))+V[9]+2336552879&4294967295,P=A+(x<<12&4294967295|x>>>20),x=D+(C^P&(A^C))+V[10]+4294925233&4294967295,D=P+(x<<17&4294967295|x>>>15),x=C+(A^D&(P^A))+V[11]+2304563134&4294967295,C=D+(x<<22&4294967295|x>>>10),x=A+(P^C&(D^P))+V[12]+1804603682&4294967295,A=C+(x<<7&4294967295|x>>>25),x=P+(D^A&(C^D))+V[13]+4254626195&4294967295,P=A+(x<<12&4294967295|x>>>20),x=D+(C^P&(A^C))+V[14]+2792965006&4294967295,D=P+(x<<17&4294967295|x>>>15),x=C+(A^D&(P^A))+V[15]+1236535329&4294967295,C=D+(x<<22&4294967295|x>>>10),x=A+(D^P&(C^D))+V[1]+4129170786&4294967295,A=C+(x<<5&4294967295|x>>>27),x=P+(C^D&(A^C))+V[6]+3225465664&4294967295,P=A+(x<<9&4294967295|x>>>23),x=D+(A^C&(P^A))+V[11]+643717713&4294967295,D=P+(x<<14&4294967295|x>>>18),x=C+(P^A&(D^P))+V[0]+3921069994&4294967295,C=D+(x<<20&4294967295|x>>>12),x=A+(D^P&(C^D))+V[5]+3593408605&4294967295,A=C+(x<<5&4294967295|x>>>27),x=P+(C^D&(A^C))+V[10]+38016083&4294967295,P=A+(x<<9&4294967295|x>>>23),x=D+(A^C&(P^A))+V[15]+3634488961&4294967295,D=P+(x<<14&4294967295|x>>>18),x=C+(P^A&(D^P))+V[4]+3889429448&4294967295,C=D+(x<<20&4294967295|x>>>12),x=A+(D^P&(C^D))+V[9]+568446438&4294967295,A=C+(x<<5&4294967295|x>>>27),x=P+(C^D&(A^C))+V[14]+3275163606&4294967295,P=A+(x<<9&4294967295|x>>>23),x=D+(A^C&(P^A))+V[3]+4107603335&4294967295,D=P+(x<<14&4294967295|x>>>18),x=C+(P^A&(D^P))+V[8]+1163531501&4294967295,C=D+(x<<20&4294967295|x>>>12),x=A+(D^P&(C^D))+V[13]+2850285829&4294967295,A=C+(x<<5&4294967295|x>>>27),x=P+(C^D&(A^C))+V[2]+4243563512&4294967295,P=A+(x<<9&4294967295|x>>>23),x=D+(A^C&(P^A))+V[7]+1735328473&4294967295,D=P+(x<<14&4294967295|x>>>18),x=C+(P^A&(D^P))+V[12]+2368359562&4294967295,C=D+(x<<20&4294967295|x>>>12),x=A+(C^D^P)+V[5]+4294588738&4294967295,A=C+(x<<4&4294967295|x>>>28),x=P+(A^C^D)+V[8]+2272392833&4294967295,P=A+(x<<11&4294967295|x>>>21),x=D+(P^A^C)+V[11]+1839030562&4294967295,D=P+(x<<16&4294967295|x>>>16),x=C+(D^P^A)+V[14]+4259657740&4294967295,C=D+(x<<23&4294967295|x>>>9),x=A+(C^D^P)+V[1]+2763975236&4294967295,A=C+(x<<4&4294967295|x>>>28),x=P+(A^C^D)+V[4]+1272893353&4294967295,P=A+(x<<11&4294967295|x>>>21),x=D+(P^A^C)+V[7]+4139469664&4294967295,D=P+(x<<16&4294967295|x>>>16),x=C+(D^P^A)+V[10]+3200236656&4294967295,C=D+(x<<23&4294967295|x>>>9),x=A+(C^D^P)+V[13]+681279174&4294967295,A=C+(x<<4&4294967295|x>>>28),x=P+(A^C^D)+V[0]+3936430074&4294967295,P=A+(x<<11&4294967295|x>>>21),x=D+(P^A^C)+V[3]+3572445317&4294967295,D=P+(x<<16&4294967295|x>>>16),x=C+(D^P^A)+V[6]+76029189&4294967295,C=D+(x<<23&4294967295|x>>>9),x=A+(C^D^P)+V[9]+3654602809&4294967295,A=C+(x<<4&4294967295|x>>>28),x=P+(A^C^D)+V[12]+3873151461&4294967295,P=A+(x<<11&4294967295|x>>>21),x=D+(P^A^C)+V[15]+530742520&4294967295,D=P+(x<<16&4294967295|x>>>16),x=C+(D^P^A)+V[2]+3299628645&4294967295,C=D+(x<<23&4294967295|x>>>9),x=A+(D^(C|~P))+V[0]+4096336452&4294967295,A=C+(x<<6&4294967295|x>>>26),x=P+(C^(A|~D))+V[7]+1126891415&4294967295,P=A+(x<<10&4294967295|x>>>22),x=D+(A^(P|~C))+V[14]+2878612391&4294967295,D=P+(x<<15&4294967295|x>>>17),x=C+(P^(D|~A))+V[5]+4237533241&4294967295,C=D+(x<<21&4294967295|x>>>11),x=A+(D^(C|~P))+V[12]+1700485571&4294967295,A=C+(x<<6&4294967295|x>>>26),x=P+(C^(A|~D))+V[3]+2399980690&4294967295,P=A+(x<<10&4294967295|x>>>22),x=D+(A^(P|~C))+V[10]+4293915773&4294967295,D=P+(x<<15&4294967295|x>>>17),x=C+(P^(D|~A))+V[1]+2240044497&4294967295,C=D+(x<<21&4294967295|x>>>11),x=A+(D^(C|~P))+V[8]+1873313359&4294967295,A=C+(x<<6&4294967295|x>>>26),x=P+(C^(A|~D))+V[15]+4264355552&4294967295,P=A+(x<<10&4294967295|x>>>22),x=D+(A^(P|~C))+V[6]+2734768916&4294967295,D=P+(x<<15&4294967295|x>>>17),x=C+(P^(D|~A))+V[13]+1309151649&4294967295,C=D+(x<<21&4294967295|x>>>11),x=A+(D^(C|~P))+V[4]+4149444226&4294967295,A=C+(x<<6&4294967295|x>>>26),x=P+(C^(A|~D))+V[11]+3174756917&4294967295,P=A+(x<<10&4294967295|x>>>22),x=D+(A^(P|~C))+V[2]+718787259&4294967295,D=P+(x<<15&4294967295|x>>>17),x=C+(P^(D|~A))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+P&4294967295}r.prototype.v=function(R,A){A===void 0&&(A=R.length);const C=A-this.blockSize,V=this.C;let D=this.h,P=0;for(;P<A;){if(D==0)for(;P<=C;)o(this,R,P),P+=this.blockSize;if(typeof R=="string"){for(;P<A;)if(V[D++]=R.charCodeAt(P++),D==this.blockSize){o(this,V),D=0;break}}else for(;P<A;)if(V[D++]=R[P++],D==this.blockSize){o(this,V),D=0;break}}this.h=D,this.o+=A},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;A=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=A&255,A/=256;for(this.v(R),R=Array(16),A=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)R[A++]=this.g[C]>>>V&255;return R};function u(R,A){var C=m;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=A(R)}function f(R,A){this.h=A;const C=[];let V=!0;for(let D=R.length-1;D>=0;D--){const P=R[D]|0;V&&P==A||(C[D]=P,V=!1)}this.g=C}var m={};function g(R){return-128<=R&&R<128?u(R,function(A){return new f([A|0],A<0?-1:0)}):new f([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return S;if(R<0)return se(y(-R));const A=[];let C=1;for(let V=0;R>=C;V++)A[V]=R/C|0,C*=4294967296;return new f(A,0)}function T(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return se(T(R.substring(1),A));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(A,8));let V=S;for(let P=0;P<R.length;P+=8){var D=Math.min(8,R.length-P);const x=parseInt(R.substring(P,P+D),A);D<8?(D=y(Math.pow(A,D)),V=V.j(D).add(y(x))):(V=V.j(C),V=V.add(y(x)))}return V}var S=g(0),M=g(1),L=g(16777216);i=f.prototype,i.m=function(){if(oe(this))return-se(this).m();let R=0,A=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);R+=(V>=0?V:4294967296+V)*A,A*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(ne(this))return"0";if(oe(this))return"-"+se(this).toString(R);const A=y(Math.pow(R,6));var C=this;let V="";for(;;){const D=je(C,A).g;C=fe(C,D.j(A));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=D,ne(C))return P+V;for(;P.length<6;)P="0"+P;V=P+V}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function ne(R){if(R.h!=0)return!1;for(let A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function oe(R){return R.h==-1}i.l=function(R){return R=fe(this,R),oe(R)?-1:ne(R)?0:1};function se(R){const A=R.g.length,C=[];for(let V=0;V<A;V++)C[V]=~R.g[V];return new f(C,~R.h).add(M)}i.abs=function(){return oe(this)?se(this):this},i.add=function(R){const A=Math.max(this.g.length,R.g.length),C=[];let V=0;for(let D=0;D<=A;D++){let P=V+(this.i(D)&65535)+(R.i(D)&65535),x=(P>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);V=x>>>16,P&=65535,x&=65535,C[D]=x<<16|P}return new f(C,C[C.length-1]&-2147483648?-1:0)};function fe(R,A){return R.add(se(A))}i.j=function(R){if(ne(this)||ne(R))return S;if(oe(this))return oe(R)?se(this).j(se(R)):se(se(this).j(R));if(oe(R))return se(this.j(se(R)));if(this.l(L)<0&&R.l(L)<0)return y(this.m()*R.m());const A=this.g.length+R.g.length,C=[];for(var V=0;V<2*A;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<R.g.length;D++){const P=this.i(V)>>>16,x=this.i(V)&65535,ht=R.i(D)>>>16,Rt=R.i(D)&65535;C[2*V+2*D]+=x*Rt,ve(C,2*V+2*D),C[2*V+2*D+1]+=P*Rt,ve(C,2*V+2*D+1),C[2*V+2*D+1]+=x*ht,ve(C,2*V+2*D+1),C[2*V+2*D+2]+=P*ht,ve(C,2*V+2*D+2)}for(R=0;R<A;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=A;R<2*A;R++)C[R]=0;return new f(C,0)};function ve(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function ye(R,A){this.g=R,this.h=A}function je(R,A){if(ne(A))throw Error("division by zero");if(ne(R))return new ye(S,S);if(oe(R))return A=je(se(R),A),new ye(se(A.g),se(A.h));if(oe(A))return A=je(R,se(A)),new ye(se(A.g),A.h);if(R.g.length>30){if(oe(R)||oe(A))throw Error("slowDivide_ only works with positive integers.");for(var C=M,V=A;V.l(R)<=0;)C=ct(C),V=ct(V);var D=Ie(C,1),P=Ie(V,1);for(V=Ie(V,2),C=Ie(C,2);!ne(V);){var x=P.add(V);x.l(R)<=0&&(D=D.add(C),P=x),V=Ie(V,1),C=Ie(C,1)}return A=fe(R,D.j(A)),new ye(D,A)}for(D=S;R.l(A)>=0;){for(C=Math.max(1,Math.floor(R.m()/A.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),P=y(C),x=P.j(A);oe(x)||x.l(R)>0;)C-=V,P=y(C),x=P.j(A);ne(P)&&(P=M),D=D.add(P),R=fe(R,x)}return new ye(D,R)}i.B=function(R){return je(this,R).h},i.and=function(R){const A=Math.max(this.g.length,R.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)&R.i(V);return new f(C,this.h&R.h)},i.or=function(R){const A=Math.max(this.g.length,R.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)|R.i(V);return new f(C,this.h|R.h)},i.xor=function(R){const A=Math.max(this.g.length,R.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)^R.i(V);return new f(C,this.h^R.h)};function ct(R){const A=R.g.length+1,C=[];for(let V=0;V<A;V++)C[V]=R.i(V)<<1|R.i(V-1)>>>31;return new f(C,R.h)}function Ie(R,A){const C=A>>5;A%=32;const V=R.g.length-C,D=[];for(let P=0;P<V;P++)D[P]=A>0?R.i(P+C)>>>A|R.i(P+C+1)<<32-A:R.i(P+C);return new f(D,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,W1=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,Qr=f}).apply(typeof kb<"u"?kb:typeof self<"u"?self:typeof window<"u"?window:{});var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Z1,Iu,eT,rf,Qp,tT,nT,sT;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yh=="object"&&Yh];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(c,p){if(p)e:{var v=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var U=c[w];if(!(U in v))break e;v=v[U]}c=c[c.length-1],w=v[c],p=p(w),p!=w&&p!=null&&e(v,c,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(p){var v=[],w;for(w in p)Object.prototype.hasOwnProperty.call(p,w)&&v.push([w,p[w]]);return v}});var u=u||{},f=this||self;function m(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function g(c,p,v){return c.call.apply(c.bind,arguments)}function y(c,p,v){return y=g,y.apply(null,arguments)}function T(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function S(c,p){function v(){}v.prototype=p.prototype,c.Z=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(w,U,F){for(var ie=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)ie[Oe-2]=arguments[Oe];return p.prototype[U].apply(w,ie)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function L(c){const p=c.length;if(p>0){const v=Array(p);for(let w=0;w<p;w++)v[w]=c[w];return v}return[]}function ne(c,p){for(let w=1;w<arguments.length;w++){const U=arguments[w];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=c.length||0;const F=U.length||0;c.length=v+F;for(let ie=0;ie<F;ie++)c[v+ie]=U[ie]}else c.push(U)}}class oe{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function se(c){f.setTimeout(()=>{throw c},0)}function fe(){var c=R;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ve{constructor(){this.h=this.g=null}add(p,v){const w=ye.get();w.set(p,v),this.h?this.h.next=w:this.g=w,this.h=w}}var ye=new oe(()=>new je,c=>c.reset());class je{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,Ie=!1,R=new ve,A=()=>{const c=Promise.resolve(void 0);ct=()=>{c.then(C)}};function C(){for(var c;c=fe();){try{c.h.call(c.g)}catch(v){se(v)}var p=ye;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}Ie=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,p),f.removeEventListener("test",v,p)}catch{}return c})();function x(c){return/^[\s\xa0]*$/.test(c)}function ht(c,p){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}S(ht,D),ht.prototype.init=function(c,p){const v=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ht.Z.h.call(this)},ht.prototype.h=function(){ht.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Rt="closure_listenable_"+(Math.random()*1e6|0),K=0;function re(c,p,v,w,U){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!w,this.ha=U,this.key=++K,this.da=this.fa=!1}function me(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Le(c,p,v){for(const w in c)p.call(v,c[w],w,c)}function Ue(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function O(c){const p={};for(const v in c)p[v]=c[v];return p}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(c,p){let v,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(v in w)c[v]=w[v];for(let F=0;F<X.length;F++)v=X[F],Object.prototype.hasOwnProperty.call(w,v)&&(c[v]=w[v])}}function le(c){this.src=c,this.g={},this.h=0}le.prototype.add=function(c,p,v,w,U){const F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);const ie=Me(c,p,w,U);return ie>-1?(p=c[ie],v||(p.fa=!1)):(p=new re(p,this.src,F,!!w,U),p.fa=v,c.push(p)),p};function Se(c,p){const v=p.type;if(v in c.g){var w=c.g[v],U=Array.prototype.indexOf.call(w,p,void 0),F;(F=U>=0)&&Array.prototype.splice.call(w,U,1),F&&(me(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Me(c,p,v,w){for(let U=0;U<c.length;++U){const F=c[U];if(!F.da&&F.listener==p&&F.capture==!!v&&F.ha==w)return U}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),ft={};function dt(c,p,v,w,U){if(Array.isArray(p)){for(let F=0;F<p.length;F++)dt(c,p[F],v,w,U);return null}return v=Ss(v),c&&c[Rt]?c.J(p,v,m(w)?!!w.capture:!1,U):Nn(c,p,v,!1,w,U)}function Nn(c,p,v,w,U,F){if(!p)throw Error("Invalid event type");const ie=m(U)?!!U.capture:!!U;let Oe=In(c);if(Oe||(c[ze]=Oe=new le(c)),v=Oe.add(p,v,w,ie,F),v.proxy)return v;if(w=hi(),v.proxy=w,w.src=c,w.listener=v,c.addEventListener)P||(U=ie),U===void 0&&(U=!1),c.addEventListener(p.toString(),w,U);else if(c.attachEvent)c.attachEvent(Tn(p.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function hi(){function c(v){return p.call(c.src,c.listener,v)}const p=zs;return c}function Cn(c,p,v,w,U){if(Array.isArray(p))for(var F=0;F<p.length;F++)Cn(c,p[F],v,w,U);else w=m(w)?!!w.capture:!!w,v=Ss(v),c&&c[Rt]?(c=c.i,F=String(p).toString(),F in c.g&&(p=c.g[F],v=Me(p,v,w,U),v>-1&&(me(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete c.g[F],c.h--)))):c&&(c=In(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Me(p,v,w,U)),(v=c>-1?p[c]:null)&&fi(v))}function fi(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Rt])Se(p.i,c);else{var v=c.type,w=c.proxy;p.removeEventListener?p.removeEventListener(v,w,c.capture):p.detachEvent?p.detachEvent(Tn(v),w):p.addListener&&p.removeListener&&p.removeListener(w),(v=In(p))?(Se(v,c),v.h==0&&(v.src=null,p[ze]=null)):me(c)}}}function Tn(c){return c in ft?ft[c]:ft[c]="on"+c}function zs(c,p){if(c.da)c=!0;else{p=new ht(p,this);const v=c.listener,w=c.ha||c.src;c.fa&&fi(c),c=v.call(w,p)}return c}function In(c){return c=c[ze],c instanceof le?c:null}var ws="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ss(c){return typeof c=="function"?c:(c[ws]||(c[ws]=function(p){return c.handleEvent(p)}),c[ws])}function _t(){V.call(this),this.i=new le(this),this.M=this,this.G=null}S(_t,V),_t.prototype[Rt]=!0,_t.prototype.removeEventListener=function(c,p,v,w){Cn(this,c,p,v,w)};function mt(c,p){var v,w=c.G;if(w)for(v=[];w;w=w.G)v.push(w);if(c=c.M,w=p.type||p,typeof p=="string")p=new D(p,c);else if(p instanceof D)p.target=p.target||c;else{var U=p;p=new D(w,c),ae(p,U)}U=!0;let F,ie;if(v)for(ie=v.length-1;ie>=0;ie--)F=p.g=v[ie],U=Bs(F,w,!0,p)&&U;if(F=p.g=c,U=Bs(F,w,!0,p)&&U,U=Bs(F,w,!1,p)&&U,v)for(ie=0;ie<v.length;ie++)F=p.g=v[ie],U=Bs(F,w,!1,p)&&U}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const v=c.g[p];for(let w=0;w<v.length;w++)me(v[w]);delete c.g[p],c.h--}}this.G=null},_t.prototype.J=function(c,p,v,w){return this.i.add(String(c),p,!1,v,w)},_t.prototype.K=function(c,p,v,w){return this.i.add(String(c),p,!0,v,w)};function Bs(c,p,v,w){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let U=!0;for(let F=0;F<p.length;++F){const ie=p[F];if(ie&&!ie.da&&ie.capture==v){const Oe=ie.listener,jt=ie.ha||ie.src;ie.fa&&Se(c.i,ie),U=Oe.call(jt,w)!==!1&&U}}return U&&!w.defaultPrevented}function Qa(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:f.setTimeout(c,p||0)}function ra(c){c.g=Qa(()=>{c.g=null,c.i&&(c.i=!1,ra(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Bt extends V{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ra(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function di(c){V.call(this),this.h=c,this.g={}}S(di,V);var Vt=[];function qt(c){Le(c.g,function(p,v){this.g.hasOwnProperty(v)&&fi(p)},c),c.g={}}di.prototype.N=function(){di.Z.N.call(this),qt(this)},di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rs=f.JSON.stringify,qn=f.JSON.parse,Xi=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Ji(){}function Wi(){}var Mn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $(){D.call(this,"d")}S($,D);function Pt(){D.call(this,"c")}S(Pt,D);var vt={},Hn=null;function mi(){return Hn=Hn||new _t}vt.Ia="serverreachability";function as(c){D.call(this,vt.Ia,c)}S(as,D);function pe(c){const p=mi();mt(p,new as(p))}vt.STAT_EVENT="statevent";function bt(c,p){D.call(this,vt.STAT_EVENT,c),this.stat=p}S(bt,D);function Nt(c){const p=mi();mt(p,new bt(p,c))}vt.Ja="timingevent";function wn(c,p){D.call(this,vt.Ja,c),this.size=p}S(wn,D);function Fn(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},p)}function Gn(){this.g=!0}Gn.prototype.ua=function(){this.g=!1};function hl(c,p,v,w,U,F){c.info(function(){if(c.g)if(F){var ie="",Oe=F.split("&");for(let Ze=0;Ze<Oe.length;Ze++){var jt=Oe[Ze].split("=");if(jt.length>1){const At=jt[0];jt=jt[1];const cs=At.split("_");ie=cs.length>=2&&cs[1]=="type"?ie+(At+"="+jt+"&"):ie+(At+"=redacted&")}}}else ie=null;else ie=F;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+p+`
`+v+`
`+ie})}function aa(c,p,v,w,U,F,ie){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+p+`
`+v+`
`+F+" "+ie})}function Dn(c,p,v,w){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+fl(c,v)+(w?" "+w:"")})}function pi(c,p){c.info(function(){return"TIMEOUT: "+p})}Gn.prototype.info=function(){};function fl(c,p){if(!c.g)return p;if(!p)return null;try{const F=JSON.parse(p);if(F){for(c=0;c<F.length;c++)if(Array.isArray(F[c])){var v=F[c];if(!(v.length<2)){var w=v[1];if(Array.isArray(w)&&!(w.length<1)){var U=w[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ie=1;ie<w.length;ie++)w[ie]=""}}}}return rs(F)}catch{return p}}var gi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},oa;function qs(){}S(qs,Ji),qs.prototype.g=function(){return new XMLHttpRequest},oa=new qs;function As(c){return encodeURIComponent(String(c))}function Ya(c){var p=1;c=c.split(":");const v=[];for(;p>0&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function Kn(c,p,v,w){this.j=c,this.i=p,this.l=v,this.S=w||1,this.V=new di(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $n}function $n(){this.i=null,this.g="",this.h=!1}var Dt={},Ht={};function os(c,p,v){c.M=1,c.A=la(Ft(p)),c.u=v,c.R=!0,er(c,null)}function er(c,p){c.F=Date.now(),I(c),c.B=Ft(c.A);var v=c.B,w=c.S;Array.isArray(w)||(w=[String(w)]),Wa(v.i,"t",w),c.C=0,v=c.j.L,c.h=new $n,c.g=Sc(c.j,v?p:null,!c.u),c.P>0&&(c.O=new Bt(y(c.Y,c,c.g),c.P)),p=c.V,v=c.g,w=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(Vt[0]=U.toString()),U=Vt);for(let F=0;F<U.length;F++){const ie=dt(v,U[F],w||p.handleEvent,!1,p.h||p);if(!ie)break;p.g[ie.key]=ie}p=c.J?O(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),pe(),hl(c.i,c.v,c.B,c.l,c.S,c.u)}Kn.prototype.ba=function(c){c=c.target;const p=this.O;p&&Ns(c)==3?p.j():this.Y(c)},Kn.prototype.Y=function(c){try{if(c==this.g)e:{const Oe=Ns(this.g),jt=this.g.ya(),Ze=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||on(this.g)))){this.K||Oe!=4||jt==7||(jt==8||Ze<=0?pe(3):pe(2)),de(this);var p=this.g.ca();this.X=p;var v=dl(this);if(this.o=p==200,aa(this.i,this.v,this.B,this.l,this.S,Oe,p),this.o){if(this.U&&!this.L){t:{if(this.g){var w,U=this.g;if((w=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(w)){var F=w;break t}}F=null}if(c=F)Dn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pt(this,c);else{this.o=!1,this.m=3,Nt(12),ke(this),_e(this);break e}}if(this.R){c=!0;let At;for(;!this.K&&this.C<v.length;)if(At=tr(this,v),At==Ht){Oe==4&&(this.m=4,Nt(14),c=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Dt){this.m=4,Nt(15),Dn(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Dn(this.i,this.l,At,null),pt(this,At);if(yi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||v.length!=0||this.h.h||(this.m=1,Nt(16),c=!1),this.o=this.o&&c,!c)Dn(this.i,this.l,v,"[Invalid Chunked Response]"),ke(this),_e(this);else if(v.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Al(ie),ie.P=!0,Nt(11))}}else Dn(this.i,this.l,v,null),pt(this,v);Oe==4&&ke(this),this.o&&!this.K&&(Oe==4?bc(this.j,this):(this.o=!1,I(this)))}else vi(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),ke(this),_e(this)}}}catch{}};function dl(c){if(!yi(c))return c.g.la();const p=on(c.g);if(p==="")return"";let v="";const w=p.length,U=Ns(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ke(c),_e(c),"";c.h.i=new f.TextDecoder}for(let F=0;F<w;F++)c.h.h=!0,v+=c.h.i.decode(p[F],{stream:!(U&&F==w-1)});return p.length=0,c.h.g+=v,c.C=0,c.h.g}function yi(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function tr(c,p){var v=c.C,w=p.indexOf(`
`,v);return w==-1?Ht:(v=Number(p.substring(v,w)),isNaN(v)?Dt:(w+=1,w+v>p.length?Ht:(p=p.slice(w,w+v),c.C=w+v,p)))}Kn.prototype.cancel=function(){this.K=!0,ke(this)};function I(c){c.T=Date.now()+c.H,Z(c,c.H)}function Z(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Fn(y(c.aa,c),p)}function de(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Kn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(pi(this.i,this.B),this.M!=2&&(pe(),Nt(17)),ke(this),this.m=2,_e(this)):Z(this,this.T-c)};function _e(c){c.j.I==0||c.K||bc(c.j,c)}function ke(c){de(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,qt(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function pt(c,p){try{var v=c.j;if(v.I!=0&&(v.g==c||Sn(v.h,c))){if(!c.L&&Sn(v.h,c)&&v.I==3){try{var w=v.Ba.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)so(v),hr(v);else break e;pa(v),Nt(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Fn(y(v.Va,v),6e3));Et(v.h)<=1&&v.ta&&(v.ta=void 0)}else Qs(v,11)}else if((c.L||v.g==c)&&so(v),!x(p))for(U=v.Ba.g.parse(p),p=0;p<U.length;p++){let Ze=U[p];const At=Ze[0];if(!(At<=v.K))if(v.K=At,Ze=Ze[1],v.I==2)if(Ze[0]=="c"){v.M=Ze[1],v.ba=Ze[2];const cs=Ze[3];cs!=null&&(v.ka=cs,v.j.info("VER="+v.ka));const Ys=Ze[4];Ys!=null&&(v.za=Ys,v.j.info("SVER="+v.za));const Cs=Ze[5];Cs!=null&&typeof Cs=="number"&&Cs>0&&(w=1.5*Cs,v.O=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Is=c.g;if(Is){const ga=Is.g?Is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ga){var F=w.h;F.g||ga.indexOf("spdy")==-1&&ga.indexOf("quic")==-1&&ga.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(sr(F,F.h),F.h=null))}if(w.G){const io=Is.g?Is.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(w.wa=io,nt(w.J,w.G,io))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),w=v;var ie=c;if(w.na=wc(w,w.L?w.ba:null,w.W),ie.L){ml(w.h,ie);var Oe=ie,jt=w.O;jt&&(Oe.H=jt),Oe.D&&(de(Oe),I(Oe)),w.g=ie}else _c(w);v.i.length>0&&$s(v)}else Ze[0]!="stop"&&Ze[0]!="close"||Qs(v,7);else v.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Qs(v,7):wl(v):Ze[0]!="noop"&&v.l&&v.l.qa(Ze),v.A=0)}}pe(4)}catch{}}var gt=class{constructor(c,p){this.g=c,this.map=p}};function kn(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nr(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Et(c){return c.h?1:c.g?c.g.size:0}function Sn(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function sr(c,p){c.g?c.g.add(p):c.h=p}function ml(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}kn.prototype.cancel=function(){if(this.i=pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function pl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.G);return p}return L(c.i)}var fc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xa(c,p){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const w=c[v].indexOf("=");let U,F=null;w>=0?(U=c[v].substring(0,w),F=c[v].substring(w+1)):U=c[v],p(U,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Qn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof Qn?(this.l=c.l,nn(this,c.j),this.o=c.o,this.g=c.g,ir(this,c.u),this.h=c.h,gl(this,gc(c.i)),this.m=c.m):c&&(p=String(c).match(fc))?(this.l=!1,nn(this,p[1]||"",!0),this.o=Hs(p[2]||""),this.g=Hs(p[3]||"",!0),ir(this,p[4]),this.h=Hs(p[5]||"",!0),gl(this,p[6]||"",!0),this.m=Hs(p[7]||"")):(this.l=!1,this.i=new ar(null,this.l))}Qn.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(ua(p,Ja,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(ua(p,Ja,!0),"@"),c.push(As(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ua(v,v.charAt(0)=="/"?yl:dc,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ua(v,mc)),c.join("")},Qn.prototype.resolve=function(c){const p=Ft(this);let v=!!c.j;v?nn(p,c.j):v=!!c.o,v?p.o=c.o:v=!!c.g,v?p.g=c.g:v=c.u!=null;var w=c.h;if(v)ir(p,c.u);else if(v=!!c.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var U=p.h.lastIndexOf("/");U!=-1&&(w=p.h.slice(0,U+1)+w)}if(U=w,U==".."||U==".")w="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){w=U.lastIndexOf("/",0)==0,U=U.split("/");const F=[];for(let ie=0;ie<U.length;){const Oe=U[ie++];Oe=="."?w&&ie==U.length&&F.push(""):Oe==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),w&&ie==U.length&&F.push("")):(F.push(Oe),w=!0)}w=F.join("/")}else w=U}return v?p.h=w:v=c.i.toString()!=="",v?gl(p,gc(c.i)):v=!!c.m,v&&(p.m=c.m),p};function Ft(c){return new Qn(c)}function nn(c,p,v){c.j=v?Hs(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function ir(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function gl(c,p,v){p instanceof ar?(c.i=p,Za(c.i,c.l)):(v||(p=ua(p,rr)),c.i=new ar(p,c.l))}function nt(c,p,v){c.i.set(p,v)}function la(c){return nt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Hs(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ua(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,On),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function On(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ja=/[#\/\?@]/g,dc=/[#\?:]/g,yl=/[#\?]/g,rr=/[#\?@]/g,mc=/#/g;function ar(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Vn(c){c.g||(c.g=new Map,c.h=0,c.i&&Xa(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}i=ar.prototype,i.add=function(c,p){Vn(this),this.i=null,c=or(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function pc(c,p){Vn(c),p=or(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function _l(c,p){return Vn(c),p=or(c,p),c.g.has(p)}i.forEach=function(c,p){Vn(this),this.g.forEach(function(v,w){v.forEach(function(U){c.call(p,U,w,this)},this)},this)};function vl(c,p){Vn(c);let v=[];if(typeof p=="string")_l(c,p)&&(v=v.concat(c.g.get(or(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)v=v.concat(c[p]);return v}i.set=function(c,p){return Vn(this),this.i=null,c=or(this,c),_l(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},i.get=function(c,p){return c?(c=vl(this,c),c.length>0?String(c[0]):p):p};function Wa(c,p,v){pc(c,p),v.length>0&&(c.i=null,c.g.set(or(c,p),L(v)),c.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let w=0;w<p.length;w++){var v=p[w];const U=As(v);v=vl(this,v);for(let F=0;F<v.length;F++){let ie=U;v[F]!==""&&(ie+="="+As(v[F])),c.push(ie)}}return this.i=c.join("&")};function gc(c){const p=new ar;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function or(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Za(c,p){p&&!c.j&&(Vn(c),c.i=null,c.g.forEach(function(v,w){const U=w.toLowerCase();w!=U&&(pc(this,w),Wa(this,U,v))},c)),c.j=p}function xs(c,p){const v=new Gn;if(f.Image){const w=new Image;w.onload=T(ls,v,"TestLoadImage: loaded",!0,p,w),w.onerror=T(ls,v,"TestLoadImage: error",!1,p,w),w.onabort=T(ls,v,"TestLoadImage: abort",!1,p,w),w.ontimeout=T(ls,v,"TestLoadImage: timeout",!1,p,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else p(!1)}function bl(c,p){const v=new Gn,w=new AbortController,U=setTimeout(()=>{w.abort(),ls(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:w.signal}).then(F=>{clearTimeout(U),F.ok?ls(v,"TestPingServer: ok",!0,p):ls(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),ls(v,"TestPingServer: error",!1,p)})}function ls(c,p,v,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(v)}catch{}}function lr(){this.g=new Xi}function Fs(c){this.i=c.Sb||null,this.h=c.ab||!1}S(Fs,Ji),Fs.prototype.g=function(){return new ca(this.i,this.h)};function ca(c,p){_t.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(ca,_t),i=ca.prototype,i.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,Rs(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||f).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ur(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Rs(this)),this.g&&(this.readyState=3,Rs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;eo(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function eo(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?ur(this):Rs(this),this.readyState==3&&eo(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,ur(this))},i.Na=function(c){this.g&&(this.response=c,ur(this))},i.ga=function(){this.g&&ur(this)};function ur(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Rs(c)}i.setRequestHeader=function(c,p){this.A.append(c,p)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function Rs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function us(c){let p="";return Le(c,function(v,w){p+=w,p+=":",p+=v,p+=`\r
`}),p}function ha(c,p,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=us(v),typeof c=="string"?v!=null&&As(v):nt(c,p,v))}function rt(c){_t.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(rt,_t);var Gs=/^https?$/i,El=["POST","PUT"];i=rt.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,p,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():oa.g(),this.g.onreadystatechange=M(y(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(F){fa(this,F);return}if(c=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)v.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const F of w.keys())v.set(F,w.get(F));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),U=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(El,p,void 0)>=0)||w||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,ie]of v)this.g.setRequestHeader(F,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(F){fa(this,F)}};function fa(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,Tl(c),_i(c)}function Tl(c){c.A||(c.A=!0,mt(c,"complete"),mt(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,mt(this,"complete"),mt(this,"abort"),_i(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_i(this,!0)),rt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?da(this):this.Xa())},i.Xa=function(){da(this)};function da(c){if(c.h&&typeof u<"u"){if(c.v&&Ns(c)==4)setTimeout(c.Ca.bind(c),0);else if(mt(c,"readystatechange"),Ns(c)==4){c.h=!1;try{const F=c.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var w;if(w=F===0){let ie=String(c.D).match(fc)[1]||null;!ie&&f.self&&f.self.location&&(ie=f.self.location.protocol.slice(0,-1)),w=!Gs.test(ie?ie.toLowerCase():"")}v=w}if(v)mt(c,"complete"),mt(c,"success");else{c.o=6;try{var U=Ns(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",Tl(c)}}finally{_i(c)}}}}function _i(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,p||mt(c,"ready");try{v.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Ns(c){return c.g?c.g.readyState:0}i.ca=function(){try{return Ns(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),qn(p)}};function on(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function vi(c){const p={};c=(c.g&&Ns(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(x(c[w]))continue;var v=Ya(c[w]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=p[U]||[];p[U]=F,F.push(v)}Ue(p,function(w){return w.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function cr(c){this.za=0,this.i=[],this.j=new Gn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ks("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ks("baseRetryDelayMs",5e3,c),this.Za=Ks("retryDelaySeedMs",1e4,c),this.Ta=Ks("forwardChannelMaxRetries",2,c),this.va=Ks("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new kn(c&&c.concurrentRequestLimit),this.Ba=new lr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=cr.prototype,i.ka=8,i.I=1,i.connect=function(c,p,v,w){Nt(0),this.W=c,this.H=p||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.J=wc(this,null,this.W),$s(this)};function wl(c){if(to(c),c.I==3){var p=c.V++,v=Ft(c.J);if(nt(v,"SID",c.M),nt(v,"RID",p),nt(v,"TYPE","terminate"),ma(c,v),p=new Kn(c,c.j,p),p.M=2,p.A=la(Ft(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=p.A,v=!0),v||(p.g=Sc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),I(p)}Tc(c)}function hr(c){c.g&&(Al(c),c.g.cancel(),c.g=null)}function to(c){hr(c),c.v&&(f.clearTimeout(c.v),c.v=null),so(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function $s(c){if(!nr(c.h)&&!c.m){c.m=!0;var p=c.Ea;ct||A(),Ie||(ct(),Ie=!0),R.add(p,c),c.D=0}}function no(c,p){return Et(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Fn(y(c.Ea,c,p),Ec(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new Kn(this,this.j,c);let F=this.o;if(this.U&&(F?(F=O(F),ae(F,this.U)):F=this.U),this.u!==null||this.R||(U.J=F,F=null),this.S)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,p>4096){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=yc(this,U,p),v=Ft(this.J),nt(v,"RID",c),nt(v,"CVER",22),this.G&&nt(v,"X-HTTP-Session-Id",this.G),ma(this,v),F&&(this.R?p="headers="+As(us(F))+"&"+p:this.u&&ha(v,this.u,F)),sr(this.h,U),this.Ra&&nt(v,"TYPE","init"),this.S?(nt(v,"$req",p),nt(v,"SID","null"),U.U=!0,os(U,v,null)):os(U,v,p),this.I=2}}else this.I==3&&(c?Sl(this,c):this.i.length==0||nr(this.h)||Sl(this))};function Sl(c,p){var v;p?v=p.l:v=c.V++;const w=Ft(c.J);nt(w,"SID",c.M),nt(w,"RID",v),nt(w,"AID",c.K),ma(c,w),c.u&&c.o&&ha(w,c.u,c.o),v=new Kn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),p&&(c.i=p.G.concat(c.i)),p=yc(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),sr(c.h,v),os(v,w,p)}function ma(c,p){c.H&&Le(c.H,function(v,w){nt(p,w,v)}),c.l&&Le({},function(v,w){nt(p,w,v)})}function yc(c,p,v){v=Math.min(c.i.length,v);const w=c.l?y(c.l.Ka,c.l,c):null;e:{var U=c.i;let Oe=-1;for(;;){const jt=["count="+v];Oe==-1?v>0?(Oe=U[0].g,jt.push("ofs="+Oe)):Oe=0:jt.push("ofs="+Oe);let Ze=!0;for(let At=0;At<v;At++){var F=U[At].g;const cs=U[At].map;if(F-=Oe,F<0)Oe=Math.max(0,U[At].g-100),Ze=!1;else try{F="req"+F+"_"||"";try{var ie=cs instanceof Map?cs:Object.entries(cs);for(const[Ys,Cs]of ie){let Is=Cs;m(Cs)&&(Is=rs(Cs)),jt.push(F+Ys+"="+encodeURIComponent(Is))}}catch(Ys){throw jt.push(F+"type="+encodeURIComponent("_badmap")),Ys}}catch{w&&w(cs)}}if(Ze){ie=jt.join("&");break e}}ie=void 0}return c=c.i.splice(0,v),p.G=c,ie}function _c(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;ct||A(),Ie||(ct(),Ie=!0),R.add(p,c),c.A=0}}function pa(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Fn(y(c.Da,c),Ec(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,vc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Fn(y(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),hr(this),vc(this))};function Al(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function vc(c){c.g=new Kn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=Ft(c.na);nt(p,"RID","rpc"),nt(p,"SID",c.M),nt(p,"AID",c.K),nt(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&nt(p,"TO",c.ia),nt(p,"TYPE","xmlhttp"),ma(c,p),c.u&&c.o&&ha(p,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=la(Ft(p)),v.u=null,v.R=!0,er(v,c)}i.Va=function(){this.C!=null&&(this.C=null,hr(this),pa(this),Nt(19))};function so(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function bc(c,p){var v=null;if(c.g==p){so(c),Al(c),c.g=null;var w=2}else if(Sn(c.h,p))v=p.G,ml(c.h,p),w=1;else return;if(c.I!=0){if(p.o)if(w==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var U=c.D;w=mi(),mt(w,new wn(w,v)),$s(c)}else _c(c);else if(U=p.m,U==3||U==0&&p.X>0||!(w==1&&no(c,p)||w==2&&pa(c)))switch(v&&v.length>0&&(p=c.h,p.i=p.i.concat(v)),U){case 1:Qs(c,5);break;case 4:Qs(c,10);break;case 3:Qs(c,6);break;default:Qs(c,2)}}}function Ec(c,p){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*p}function Qs(c,p){if(c.j.info("Error code "+p),p==2){var v=y(c.bb,c),w=c.Ua;const U=!w;w=new Qn(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||nn(w,"https"),la(w),U?xs(w.toString(),v):bl(w.toString(),v)}else Nt(2);c.I=0,c.l&&c.l.pa(p),Tc(c),to(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function Tc(c){if(c.I=0,c.ja=[],c.l){const p=pl(c.h);(p.length!=0||c.i.length!=0)&&(ne(c.ja,p),ne(c.ja,c.i),c.h.i.length=0,L(c.i),c.i.length=0),c.l.oa()}}function wc(c,p,v){var w=v instanceof Qn?Ft(v):new Qn(v);if(w.g!="")p&&(w.g=p+"."+w.g),ir(w,w.u);else{var U=f.location;w=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;const F=new Qn(null);w&&nn(F,w),p&&(F.g=p),U&&ir(F,U),v&&(F.h=v),w=F}return v=c.G,p=c.wa,v&&p&&nt(w,v,p),nt(w,"VER",c.ka),ma(c,w),w}function Sc(c,p,v){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new rt(new Fs({ab:v})):new rt(c.ma),p.Fa(c.L),p}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ac(){}i=Ac.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function fr(){}fr.prototype.g=function(c,p){return new An(c,p)};function An(c,p){_t.call(this),this.g=new cr(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!x(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!x(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new bi(this)}S(An,_t),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){wl(this.g)},An.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=rs(c),c=v);p.i.push(new gt(p.Ya++,c)),p.I==3&&$s(p)},An.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,An.Z.N.call(this)};function xc(c){$.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const v in p){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}S(xc,$);function Rc(){Pt.call(this),this.status=1}S(Rc,Pt);function bi(c){this.g=c}S(bi,Ac),bi.prototype.ra=function(){mt(this.g,"a")},bi.prototype.qa=function(c){mt(this.g,new xc(c))},bi.prototype.pa=function(c){mt(this.g,new Rc)},bi.prototype.oa=function(){mt(this.g,"b")},fr.prototype.createWebChannel=fr.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,sT=function(){return new fr},nT=function(){return mi()},tT=vt,Qp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,rf=gi,Zi.COMPLETE="complete",eT=Zi,Wi.EventType=Mn,Mn.OPEN="a",Mn.CLOSE="b",Mn.ERROR="c",Mn.MESSAGE="d",_t.prototype.listen=_t.prototype.J,Iu=Wi,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,Z1=rt}).apply(typeof Yh<"u"?Yh:typeof self<"u"?self:typeof window<"u"?window:{});class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");let al="12.8.0";function RC(i){al=i}const Ba=new Tg("@firebase/firestore");function Uo(){return Ba.logLevel}function ue(i,...e){if(Ba.logLevel<=Ge.DEBUG){const n=e.map(Ag);Ba.debug(`Firestore (${al}): ${i}`,...n)}}function Gi(i,...e){if(Ba.logLevel<=Ge.ERROR){const n=e.map(Ag);Ba.error(`Firestore (${al}): ${i}`,...n)}}function Jo(i,...e){if(Ba.logLevel<=Ge.WARN){const n=e.map(Ag);Ba.warn(`Firestore (${al}): ${i}`,...n)}}function Ag(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Ae(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,iT(i,r,n)}function iT(i,e,n){let r=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gi(r),new Error(r)}function tt(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||iT(e,o,r)}function Ce(i,e){return i}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Yi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class rT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(_n.UNAUTHENTICATED)))}shutdown(){}}class CC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class IC{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Yr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Yr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string",31837,{l:r}),new rT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new _n(e)}}class MC{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class DC{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new MC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(_n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ob{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Os(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){tt(this.o===void 0,3512);const r=u=>{u.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ue("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ob(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(tt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ob(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function OC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}class xg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=OC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function Ke(i,e){return i<e?-1:i>e?1:0}function Yp(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const o=i.charAt(r),u=e.charAt(r);if(o!==u)return Sp(o)===Sp(u)?Ke(o,u):Sp(o)?1:-1}return Ke(i.length,e.length)}const VC=55296,PC=57343;function Sp(i){const e=i.charCodeAt(0);return e>=VC&&e<=PC}function Wo(i,e,n){return i.length===e.length&&i.every(((r,o)=>n(r,e[o])))}const Vb="__name__";class ei{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ei.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ei?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=ei.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ke(e.length,n.length)}static compareSegments(e,n){const r=ei.isNumericId(e),o=ei.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?ei.extractNumericId(e).compare(ei.extractNumericId(n)):Yp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qr.fromString(e.substring(4,e.length-2))}}class It extends ei{construct(e,n,r){return new It(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new It(n)}static emptyPath(){return new It([])}}const jC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends ei{construct(e,n,r){return new dn(e,n,r)}static isValidIdentifier(e){return jC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vb}static keyField(){return new dn([Vb])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new be(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new be(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new be(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(r+=m,o++):(u(),o++)}if(u(),f)throw new be(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(n)}static emptyPath(){return new dn([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(It.fromString(e))}static fromName(e){return new Te(It.fromString(e).popFirst(5))}static empty(){return new Te(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return It.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new It(e.slice()))}}function LC(i,e,n){if(!n)throw new be(te.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function UC(i,e,n,r){if(e===!0&&r===!0)throw new be(te.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Pb(i){if(!Te.isDocumentKey(i))throw new be(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function aT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Rg(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ae(12329,{type:typeof i})}function Hu(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new be(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rg(i);throw new be(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Xt(i,e){const n={typeString:i};return e&&(n.value=e),n}function ic(i,e){if(!aT(i))throw new be(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const f=i[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new be(te.INVALID_ARGUMENT,n);return!0}const jb=-62135596800,Lb=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Lb);return new St(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<jb)throw new be(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lb}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ic(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:Xt("string",St._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new St(0,0))}static max(){return new Re(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Fu=-1;function zC(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(r===1e9?new St(n+1,0):new St(n,r));return new Jr(o,Te.empty(),e)}function BC(i){return new Jr(i.readTime,i.key,Fu)}class Jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jr(Re.min(),Te.empty(),Fu)}static max(){return new Jr(Re.max(),Te.empty(),Fu)}}function qC(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(i.documentKey,e.documentKey),n!==0?n:Ke(i.largestBatchId,e.largestBatchId))}const HC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ol(i){if(i.code!==te.FAILED_PRECONDITION||i.message!==HC)throw i;ue("LocalStore","Unexpectedly lost primary lease")}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,r)=>{n(e)}))}static reject(e){return new W(((n,r)=>{r(e)}))}static waitFor(e){return new W(((n,r)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(g=>r(g)))})),f=!0,u===o&&n()}))}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next((o=>o?W.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(e,n){return new W(((r,o)=>{const u=e.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((T=>{f[y]=T,++m,m===u&&r(f)}),(T=>o(T)))}}))}static doWhile(e,n){return new W(((r,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):r()};u()}))}}function GC(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ll(i){return i.name==="IndexedDbTransactionError"}class $f{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$f.ce=-1;const Ng=-1;function Qf(i){return i==null}function Ef(i){return i===0&&1/i==-1/0}function KC(i){return typeof i=="number"&&Number.isInteger(i)&&!Ef(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const oT="";function $C(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Ub(e)),e=QC(i.get(n),e);return Ub(e)}function QC(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case oT:n+="";break;default:n+=u}}return n}function Ub(i){return i+oT+""}function zb(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Fa(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function lT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Mt{constructor(e,n){this.comparator=e,this.root=n||fn.EMPTY}insert(e,n){return new Mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??fn.RED,this.left=o??fn.EMPTY,this.right=u??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new fn(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return fn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bb(this.data.getIterator())}getIteratorFrom(e){return new Bb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new tn(this.comparator);return n.data=e,n}}class Bb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ps{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new Ps([])}unionWith(e){let n=new tn(dn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ps(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class uT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new uT("Invalid base64 string: "+u):u}})(e);return new pn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const YC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(i){if(tt(!!i,39018),typeof i=="string"){let e=0;const n=YC.exec(i);if(tt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zt(i.seconds),nanos:zt(i.nanos)}}function zt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Zr(i){return typeof i=="string"?pn.fromBase64String(i):pn.fromUint8Array(i)}const cT="server_timestamp",hT="__type__",fT="__previous_value__",dT="__local_write_time__";function Cg(i){return(i?.mapValue?.fields||{})[hT]?.stringValue===cT}function Yf(i){const e=i.mapValue.fields[fT];return Cg(e)?Yf(e):e}function Gu(i){const e=Wr(i.mapValue.fields[dT].timestampValue);return new St(e.seconds,e.nanos)}class XC{constructor(e,n,r,o,u,f,m,g,y,T,S){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T,this.apiKey=S}}const Tf="(default)";class Ku{constructor(e,n){this.projectId=e,this.database=n||Tf}static empty(){return new Ku("","")}get isDefaultDatabase(){return this.database===Tf}isEqual(e){return e instanceof Ku&&e.projectId===this.projectId&&e.database===this.database}}function JC(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new be(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ku(i.options.projectId,e)}const mT="__type__",WC="__max__",Jh={mapValue:{}},pT="__vector__",wf="value";function ea(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Cg(i)?4:eI(i)?9007199254740991:ZC(i)?10:11:Ae(28295,{value:i})}function ui(i,e){if(i===e)return!0;const n=ea(i);if(n!==ea(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Gu(i).isEqual(Gu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Wr(o.timestampValue),m=Wr(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Zr(o.bytesValue).isEqual(Zr(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return zt(o.geoPointValue.latitude)===zt(u.geoPointValue.latitude)&&zt(o.geoPointValue.longitude)===zt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return zt(o.integerValue)===zt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=zt(o.doubleValue),m=zt(u.doubleValue);return f===m?Ef(f)===Ef(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return Wo(i.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(zb(f)!==zb(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!ui(f[g],m[g])))return!1;return!0})(i,e);default:return Ae(52216,{left:i})}}function $u(i,e){return(i.values||[]).find((n=>ui(n,e)))!==void 0}function Zo(i,e){if(i===e)return 0;const n=ea(i),r=ea(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=zt(u.integerValue||u.doubleValue),g=zt(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return qb(i.timestampValue,e.timestampValue);case 4:return qb(Gu(i),Gu(e));case 5:return Yp(i.stringValue,e.stringValue);case 6:return(function(u,f){const m=Zr(u),g=Zr(f);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),g=f.split("/");for(let y=0;y<m.length&&y<g.length;y++){const T=Ke(m[y],g[y]);if(T!==0)return T}return Ke(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=Ke(zt(u.latitude),zt(f.latitude));return m!==0?m:Ke(zt(u.longitude),zt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Hb(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},g=f.fields||{},y=m[wf]?.arrayValue,T=g[wf]?.arrayValue,S=Ke(y?.values?.length||0,T?.values?.length||0);return S!==0?S:Hb(y,T)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Jh.mapValue&&f===Jh.mapValue)return 0;if(u===Jh.mapValue)return 1;if(f===Jh.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=f.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let S=0;S<g.length&&S<T.length;++S){const M=Yp(g[S],T[S]);if(M!==0)return M;const L=Zo(m[g[S]],y[T[S]]);if(L!==0)return L}return Ke(g.length,T.length)})(i.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function qb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ke(i,e);const n=Wr(i),r=Wr(e),o=Ke(n.seconds,r.seconds);return o!==0?o:Ke(n.nanos,r.nanos)}function Hb(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=Zo(n[o],r[o]);if(u)return u}return Ke(n.length,r.length)}function el(i){return Xp(i)}function Xp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=Wr(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Zr(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Te.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=Xp(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${Xp(n.fields[f])}`;return o+"}"})(i.mapValue):Ae(61005,{value:i})}function af(i){switch(ea(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yf(i);return e?16+af(e):16;case 5:return 2*i.stringValue.length;case 6:return Zr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+af(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return Fa(r.fields,((u,f)=>{o+=u.length+af(f)})),o})(i.mapValue);default:throw Ae(13486,{value:i})}}function Jp(i){return!!i&&"integerValue"in i}function Ig(i){return!!i&&"arrayValue"in i}function Fb(i){return!!i&&"nullValue"in i}function Gb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function of(i){return!!i&&"mapValue"in i}function ZC(i){return(i?.mapValue?.fields||{})[mT]?.stringValue===pT}function Vu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Fa(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Vu(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vu(i.arrayValue.values[n]);return e}return{...i}}function eI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===WC}class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!of(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(n)}setAll(e){let n=dn.emptyPath(),r={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=m.popLast()}f?r[m.lastSegment()]=Vu(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());of(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];of(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Fa(n,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new Es(Vu(this.value))}}function gT(i){const e=[];return Fa(i.fields,((n,r)=>{const o=new dn([n]);if(of(r)){const u=gT(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Ps(e)}class vn{constructor(e,n,r,o,u,f,m){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new vn(e,0,Re.min(),Re.min(),Re.min(),Es.empty(),0)}static newFoundDocument(e,n,r,o){return new vn(e,1,n,Re.min(),r,o,0)}static newNoDocument(e,n){return new vn(e,2,n,Re.min(),Re.min(),Es.empty(),0)}static newUnknownDocument(e,n){return new vn(e,3,n,Re.min(),Re.min(),Es.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sf{constructor(e,n){this.position=e,this.inclusive=n}}function Kb(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?r=Te.comparator(Te.fromName(f.referenceValue),n.key):r=Zo(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function $b(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ui(i.position[n],e.position[n]))return!1;return!0}class Af{constructor(e,n="asc"){this.field=e,this.dir=n}}function tI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class yT{}class en extends yT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sI(e,n,r):n==="array-contains"?new aI(e,r):n==="in"?new oI(e,r):n==="not-in"?new lI(e,r):n==="array-contains-any"?new uI(e,r):new en(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new iI(e,r):new rI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zo(n,this.value)):n!==null&&ea(this.value)===ea(n)&&this.matchesComparison(Zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends yT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ci(e,n)}matches(e){return _T(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _T(i){return i.op==="and"}function vT(i){return nI(i)&&_T(i)}function nI(i){for(const e of i.filters)if(e instanceof ci)return!1;return!0}function Wp(i){if(i instanceof en)return i.field.canonicalString()+i.op.toString()+el(i.value);if(vT(i))return i.filters.map((e=>Wp(e))).join(",");{const e=i.filters.map((n=>Wp(n))).join(",");return`${i.op}(${e})`}}function bT(i,e){return i instanceof en?(function(r,o){return o instanceof en&&r.op===o.op&&r.field.isEqual(o.field)&&ui(r.value,o.value)})(i,e):i instanceof ci?(function(r,o){return o instanceof ci&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,f,m)=>u&&bT(f,o.filters[m])),!0):!1})(i,e):void Ae(19439)}function ET(i){return i instanceof en?(function(n){return`${n.field.canonicalString()} ${n.op} ${el(n.value)}`})(i):i instanceof ci?(function(n){return n.op.toString()+" {"+n.getFilters().map(ET).join(" ,")+"}"})(i):"Filter"}class sI extends en{constructor(e,n,r){super(e,n,r),this.key=Te.fromName(r.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class iI extends en{constructor(e,n){super(e,"in",n),this.keys=TT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class rI extends en{constructor(e,n){super(e,"not-in",n),this.keys=TT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function TT(i,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class aI extends en{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ig(n)&&$u(n.arrayValue,this.value)}}class oI extends en{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$u(this.value.arrayValue,n)}}class lI extends en{constructor(e,n){super(e,"not-in",n)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$u(this.value.arrayValue,n)}}class uI extends en{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ig(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>$u(this.value.arrayValue,r)))}}class cI{constructor(e,n=null,r=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function Qb(i,e=null,n=[],r=[],o=null,u=null,f=null){return new cI(i,e,n,r,o,u,f)}function Mg(i){const e=Ce(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Wp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Qf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>el(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>el(r))).join(",")),e.Te=n}return e.Te}function Dg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!tI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!bT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!$b(i.startAt,e.startAt)&&$b(i.endAt,e.endAt)}function Zp(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Xf{constructor(e,n=null,r=[],o=[],u=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function hI(i,e,n,r,o,u,f,m){return new Xf(i,e,n,r,o,u,f,m)}function kg(i){return new Xf(i)}function Yb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function fI(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function dI(i){return i.collectionGroup!==null}function Pu(i){const e=Ce(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new tn(dn.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Af(u,r))})),n.has(dn.keyField().canonicalString())||e.Ie.push(new Af(dn.keyField(),r))}return e.Ie}function si(i){const e=Ce(i);return e.Ee||(e.Ee=mI(e,Pu(i))),e.Ee}function mI(i,e){if(i.limitType==="F")return Qb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Af(o.field,u)}));const n=i.endAt?new Sf(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Sf(i.startAt.position,i.startAt.inclusive):null;return Qb(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function eg(i,e,n){return new Xf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Jf(i,e){return Dg(si(i),si(e))&&i.limitType===e.limitType}function wT(i){return`${Mg(si(i))}|lt:${i.limitType}`}function zo(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>ET(o))).join(", ")}]`),Qf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>el(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>el(o))).join(",")),`Target(${r})`})(si(i))}; limitType=${i.limitType})`}function Wf(i,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Te.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,e)&&(function(r,o){for(const u of Pu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(f,m,g){const y=Kb(f,m,g);return f.inclusive?y<=0:y<0})(r.startAt,Pu(r),o)||r.endAt&&!(function(f,m,g){const y=Kb(f,m,g);return f.inclusive?y>=0:y>0})(r.endAt,Pu(r),o))})(i,e)}function pI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ST(i){return(e,n)=>{let r=!1;for(const o of Pu(i)){const u=gI(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function gI(i,e,n){const r=i.field.isKeyField()?Te.comparator(e.key,n.key):(function(u,f,m){const g=f.data.field(u),y=m.data.field(u);return g!==null&&y!==null?Zo(g,y):Ae(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:i.dir})}}class Ga{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Fa(this.inner,((n,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return lT(this.inner)}size(){return this.innerSize}}const yI=new Mt(Te.comparator);function Ki(){return yI}const AT=new Mt(Te.comparator);function Mu(...i){let e=AT;for(const n of i)e=e.insert(n.key,n);return e}function xT(i){let e=AT;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ja(){return ju()}function RT(){return ju()}function ju(){return new Ga((i=>i.toString()),((i,e)=>i.isEqual(e)))}const _I=new Mt(Te.comparator),vI=new tn(Te.comparator);function $e(...i){let e=vI;for(const n of i)e=e.add(n);return e}const bI=new tn(Ke);function EI(){return bI}function Og(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ef(e)?"-0":e}}function NT(i){return{integerValue:""+i}}function TI(i,e){return KC(e)?NT(e):Og(i,e)}class Zf{constructor(){this._=void 0}}function wI(i,e,n){return i instanceof xf?(function(o,u){const f={fields:{[hT]:{stringValue:cT},[dT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Cg(u)&&(u=Yf(u)),u&&(f.fields[fT]=u),{mapValue:f}})(n,e):i instanceof Qu?IT(i,e):i instanceof Yu?MT(i,e):(function(o,u){const f=CT(o,u),m=Xb(f)+Xb(o.Ae);return Jp(f)&&Jp(o.Ae)?NT(m):Og(o.serializer,m)})(i,e)}function SI(i,e,n){return i instanceof Qu?IT(i,e):i instanceof Yu?MT(i,e):n}function CT(i,e){return i instanceof Rf?(function(r){return Jp(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class xf extends Zf{}class Qu extends Zf{constructor(e){super(),this.elements=e}}function IT(i,e){const n=DT(e);for(const r of i.elements)n.some((o=>ui(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Yu extends Zf{constructor(e){super(),this.elements=e}}function MT(i,e){let n=DT(e);for(const r of i.elements)n=n.filter((o=>!ui(o,r)));return{arrayValue:{values:n}}}class Rf extends Zf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Xb(i){return zt(i.integerValue||i.doubleValue)}function DT(i){return Ig(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function AI(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof Qu&&o instanceof Qu||r instanceof Yu&&o instanceof Yu?Wo(r.elements,o.elements,ui):r instanceof Rf&&o instanceof Rf?ui(r.Ae,o.Ae):r instanceof xf&&o instanceof xf})(i.transform,e.transform)}class xI{constructor(e,n){this.version=e,this.transformResults=n}}class qi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qi}static exists(e){return new qi(void 0,e)}static updateTime(e){return new qi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class ed{}function kT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new VT(i.key,qi.none()):new rc(i.key,i.data,qi.none());{const n=i.data,r=Es.empty();let o=new tn(dn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new Ka(i.key,r,new Ps(o.toArray()),qi.none())}}function RI(i,e,n){i instanceof rc?(function(o,u,f){const m=o.value.clone(),g=Wb(o.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof Ka?(function(o,u,f){if(!lf(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Wb(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(OT(o)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(i,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Lu(i,e,n,r){return i instanceof rc?(function(u,f,m,g){if(!lf(u.precondition,f))return m;const y=u.value.clone(),T=Zb(u.fieldTransforms,g,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(i,e,n,r):i instanceof Ka?(function(u,f,m,g){if(!lf(u.precondition,f))return m;const y=Zb(u.fieldTransforms,g,f),T=f.data;return T.setAll(OT(u)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(i,e,n,r):(function(u,f,m){return lf(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function NI(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),u=CT(r.transform,o||null);u!=null&&(n===null&&(n=Es.empty()),n.set(r.field,u))}return n||null}function Jb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Wo(r,o,((u,f)=>AI(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class rc extends ed{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ka extends ed{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function OT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function Wb(i,e,n){const r=new Map;tt(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);r.set(u.field,SI(f,m,n[o]))}return r}function Zb(i,e,n){const r=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);r.set(o.field,wI(u,f,e))}return r}class VT extends ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CI extends ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class II{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&RI(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Lu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Lu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=RT();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const g=kT(f,m);g!==null&&r.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(Re.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),$e())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,((n,r)=>Jb(n,r)))&&Wo(this.baseMutations,e.baseMutations,((n,r)=>Jb(n,r)))}}class Vg{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){tt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return _I})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Vg(e,n,r,o)}}class MI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class DI{constructor(e,n){this.count=e,this.unchangedNames=n}}var Yt,Ye;function kI(i){switch(i){case te.OK:return Ae(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ae(15467,{code:i})}}function PT(i){if(i===void 0)return Gi("GRPC error has no .code"),te.UNKNOWN;switch(i){case Yt.OK:return te.OK;case Yt.CANCELLED:return te.CANCELLED;case Yt.UNKNOWN:return te.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return te.INTERNAL;case Yt.UNAVAILABLE:return te.UNAVAILABLE;case Yt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Yt.NOT_FOUND:return te.NOT_FOUND;case Yt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Yt.ABORTED:return te.ABORTED;case Yt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Yt.DATA_LOSS:return te.DATA_LOSS;default:return Ae(39323,{code:i})}}(Ye=Yt||(Yt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function OI(){return new TextEncoder}const VI=new Qr([4294967295,4294967295],0);function eE(i){const e=OI().encode(i),n=new W1;return n.update(e),new Uint8Array(n.digest())}function tE(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Qr([n,r],0),new Qr([o,u],0)]}class Pg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Du(`Invalid padding: ${n}`);if(r<0)throw new Du(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Du(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Du(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Qr.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Qr.fromNumber(r)));return o.compare(VI)===1&&(o=new Qr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=eE(e),[r,o]=tE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Pg(u,o,n);return r.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=eE(e),[r,o]=tE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.be(f)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class td{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new td(Re.min(),o,new Mt(Ke),Ki(),$e())}}class ac{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ac(r,n,$e(),$e(),$e())}}class uf{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=o}}class jT{constructor(e,n){this.targetId=e,this.Ce=n}}class LT{constructor(e,n,r=pn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class nE{constructor(){this.ve=0,this.Fe=sE(),this.Me=pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),n=$e(),r=$e();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ae(38017,{changeType:u})}})),new ac(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=sE()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class PI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ki(),this.He=Wh(),this.Je=Wh(),this.Ze=new Mt(Ke)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Zp(u))if(r===0){const f=new Te(u.path);this.et(n,f,vn.newNoDocument(f,Re.min()))}else tt(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const m=this.ut(e),g=m?this.ct(m,e,f):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Zr(r).toUint8Array()}catch(g){if(g instanceof uT)return Jo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Pg(f,o,u)}catch(g){return Jo(g instanceof Du?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&Zp(m.target)){const g=new Te(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,vn.newNoDocument(g,e))}u.Be&&(n.set(f,u.ke()),u.Ke())}}));let r=$e();this.Je.forEach(((u,f)=>{let m=!0;f.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new td(e,n,this.Ze,this.je,r);return this.je=Ki(),this.He=Wh(),this.Je=Wh(),this.Ze=new Mt(Ke),o}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new nE,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new tn(Ke),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new tn(Ke),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Wh(){return new Mt(Te.comparator)}function sE(){return new Mt(Te.comparator)}const jI={asc:"ASCENDING",desc:"DESCENDING"},LI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UI={and:"AND",or:"OR"};class zI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tg(i,e){return i.useProto3Json||Qf(e)?e:{value:e}}function Nf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function BI(i,e){return Nf(i,e.toTimestamp())}function ii(i){return tt(!!i,49232),Re.fromTimestamp((function(n){const r=Wr(n);return new St(r.seconds,r.nanos)})(i))}function jg(i,e){return ng(i,e).canonicalString()}function ng(i,e){const n=(function(o){return new It(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function zT(i){const e=It.fromString(i);return tt(GT(e),10190,{key:e.toString()}),e}function sg(i,e){return jg(i.databaseId,e.path)}function Ap(i,e){const n=zT(e);if(n.get(1)!==i.databaseId.projectId)throw new be(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new be(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Te(qT(n))}function BT(i,e){return jg(i.databaseId,e)}function qI(i){const e=zT(i);return e.length===4?It.emptyPath():qT(e)}function ig(i){return new It(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function qT(i){return tt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function iE(i,e,n){return{name:sg(i,e),fields:n.value.mapValue.fields}}function HI(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,T){return y.useProto3Json?(tt(T===void 0||typeof T=="string",58123),pn.fromBase64String(T||"")):(tt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),pn.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(y){const T=y.code===void 0?te.UNKNOWN:PT(y.code);return new be(T,y.message||"")})(f);n=new LT(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Ap(i,r.document.name),u=ii(r.document.updateTime),f=r.document.createTime?ii(r.document.createTime):Re.min(),m=new Es({mapValue:{fields:r.document.fields}}),g=vn.newFoundDocument(o,u,f,m),y=r.targetIds||[],T=r.removedTargetIds||[];n=new uf(y,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Ap(i,r.document),u=r.readTime?ii(r.readTime):Re.min(),f=vn.newNoDocument(o,u),m=r.removedTargetIds||[];n=new uf([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Ap(i,r.document),u=r.removedTargetIds||[];n=new uf([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new DI(o,u),m=r.targetId;n=new jT(m,f)}}return n}function FI(i,e){let n;if(e instanceof rc)n={update:iE(i,e.key,e.value)};else if(e instanceof VT)n={delete:sg(i,e.key)};else if(e instanceof Ka)n={update:iE(i,e.key,e.data),updateMask:ZI(e.fieldMask)};else{if(!(e instanceof CI))return Ae(16599,{dt:e.type});n={verify:sg(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const m=f.transform;if(m instanceof xf)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Qu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Yu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Rf)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ae(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:BI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(i,e.precondition)),n}function GI(i,e){return i&&i.length>0?(tt(e!==void 0,14353),i.map((n=>(function(o,u){let f=o.updateTime?ii(o.updateTime):ii(u);return f.isEqual(Re.min())&&(f=ii(u)),new xI(f,o.transformResults||[])})(n,e)))):[]}function KI(i,e){return{documents:[BT(i,e.path)]}}function $I(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BT(i,o);const u=(function(y){if(y.length!==0)return FT(ci.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((T=>(function(M){return{field:Bo(M.field),direction:XI(M.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=tg(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function QI(i){let e=qI(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){tt(r===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=(function(S){const M=HT(S);return M instanceof ci&&vT(M)?M.getFilters():[M]})(n.where));let f=[];n.orderBy&&(f=(function(S){return S.map((M=>(function(ne){return new Af(qo(ne.field),(function(se){switch(se){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ne.direction))})(M)))})(n.orderBy));let m=null;n.limit&&(m=(function(S){let M;return M=typeof S=="object"?S.value:S,Qf(M)?null:M})(n.limit));let g=null;n.startAt&&(g=(function(S){const M=!!S.before,L=S.values||[];return new Sf(L,M)})(n.startAt));let y=null;return n.endAt&&(y=(function(S){const M=!S.before,L=S.values||[];return new Sf(L,M)})(n.endAt)),hI(e,o,f,u,m,"F",g,y)}function YI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qo(n.unaryFilter.field);return en.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=qo(n.unaryFilter.field);return en.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=qo(n.unaryFilter.field);return en.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=qo(n.unaryFilter.field);return en.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(i):i.fieldFilter!==void 0?(function(n){return en.create(qo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return ci.create(n.compositeFilter.filters.map((r=>HT(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(i):Ae(30097,{filter:i})}function XI(i){return jI[i]}function JI(i){return LI[i]}function WI(i){return UI[i]}function Bo(i){return{fieldPath:i.canonicalString()}}function qo(i){return dn.fromServerFormat(i.fieldPath)}function FT(i){return i instanceof en?(function(n){if(n.op==="=="){if(Gb(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NAN"}};if(Fb(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gb(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NAN"}};if(Fb(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(n.field),op:JI(n.op),value:n.value}}})(i):i instanceof ci?(function(n){const r=n.getFilters().map((o=>FT(o)));return r.length===1?r[0]:{compositeFilter:{op:WI(n.op),filters:r}}})(i):Ae(54877,{filter:i})}function ZI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function GT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function KT(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class Fr{constructor(e,n,r,o,u=Re.min(),f=Re.min(),m=pn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class e4{constructor(e){this.yt=e}}function t4(i){const e=QI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?eg(e,e.limit,"L"):e}class n4{constructor(){this.Sn=new s4}addToCollectionParentIndex(e,n){return this.Sn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Jr.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class s4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new tn(It.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new tn(It.comparator)).toArray()}}const rE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$T=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn($T,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);class tl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new tl(0)}static ar(){return new tl(-1)}}const aE="LruGarbageCollector",i4=1048576;function oE([i,e],[n,r]){const o=Ke(i,n);return o===0?Ke(e,r):o}class r4{constructor(e){this.Pr=e,this.buffer=new tn(oE),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();oE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class a4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ue(aE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ll(n)?ue(aE,"Ignoring IndexedDB error during garbage collection: ",n):await ol(n)}await this.Ar(3e5)}))}}class o4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return W.resolve($f.ce);const r=new r4(n);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(rE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rE):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,o,u,f,m,g,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,m=Date.now(),this.removeTargets(e,r,n)))).next((S=>(u=S,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(y=Date.now(),Uo()<=Ge.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${S} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S}))))}}function l4(i,e){return new o4(i,e)}class u4{constructor(){this.changes=new Ga((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class c4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class h4{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&Lu(r.mutation,o,Ps.empty(),St.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,$e()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=$e()){const o=ja();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((u=>{let f=Mu();return u.forEach(((m,g)=>{f=f.insert(m,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=ja();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,$e())))}populateOverlays(e,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,r,o){let u=Ki();const f=ju(),m=(function(){return ju()})();return n.forEach(((g,y)=>{const T=r.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof Ka)?u=u.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),Lu(T.mutation,y,T.mutation.getFieldMask(),St.now())):f.set(y.key,Ps.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,T)=>f.set(y,T))),n.forEach(((y,T)=>m.set(y,new c4(T,f.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const r=ju();let o=new Mt(((f,m)=>f-m)),u=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let T=r.get(g)||Ps.empty();T=m.applyToLocalView(y,T),r.set(g,T);const S=(o.get(m.batchId)||$e()).add(g);o=o.insert(m.batchId,S)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,T=g.value,S=RT();T.forEach((M=>{if(!u.has(M)){const L=kT(n.get(M),r.get(M));L!==null&&S.set(M,L),u=u.add(M)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,S))}return W.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return fI(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):W.resolve(ja());let m=Fu,g=u;return f.next((y=>W.forEach(y,((T,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(T)?W.resolve():this.remoteDocumentCache.getEntry(e,T).next((M=>{g=g.insert(T,M)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,$e()))).next((T=>({batchId:m,changes:xT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((r=>{let o=Mu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let f=Mu();return this.indexManager.getCollectionParents(e,u).next((m=>W.forEach(m,(g=>{const y=(function(S,M){return new Xf(M,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((T=>{T.forEach(((S,M)=>{f=f.insert(S,M)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o)))).next((f=>{u.forEach(((g,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,vn.newInvalidDocument(T)))}));let m=Mu();return f.forEach(((g,y)=>{const T=u.get(g);T!==void 0&&Lu(T.mutation,y,Ps.empty(),St.now()),Wf(n,y)&&(m=m.insert(g,y))})),m}))}}class f4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return W.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ii(o.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:t4(o.bundledQuery),readTime:ii(o.readTime)}})(n)),W.resolve()}}class d4{constructor(){this.overlays=new Mt(Te.comparator),this.Lr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ja();return W.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,u)=>{this.bt(e,n,u)})),W.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const o=ja(),u=n.length+1,f=new Te(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return W.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new Mt(((y,T)=>y-T));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let T=u.get(y.largestBatchId);T===null&&(T=ja(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const m=ja(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,T)=>m.set(y,T))),!(m.size()>=o)););return W.resolve(m)}bt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new MI(n,r));let u=this.Lr.get(n);u===void 0&&(u=$e(),this.Lr.set(n,u)),this.Lr.set(n,u.add(r.key))}}class m4{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}class Lg{constructor(){this.kr=new tn(rn.Kr),this.qr=new tn(rn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new rn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new rn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Te(new It([])),r=new rn(n,e),o=new rn(n,e+1),u=[];return this.qr.forEachInRange([r,o],(f=>{this.Wr(f),u.push(f.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Te(new It([])),r=new rn(n,e),o=new rn(n,e+1);let u=$e();return this.qr.forEachInRange([r,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new rn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Te.comparator(e.key,n.key)||Ke(e.Hr,n.Hr)}static Ur(e,n){return Ke(e.Hr,n.Hr)||Te.comparator(e.key,n.key)}}class p4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new tn(rn.Kr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new II(u,n,r,o);this.mutationQueue.push(f);for(const m of o)this.Jr=this.Jr.add(new rn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),u=o<0?0:o;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Ng:this.Yn-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rn(n,0),o=new rn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([r,o],(f=>{const m=this.Zr(f.Hr);u.push(m)})),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tn(Ke);return n.forEach((o=>{const u=new rn(o,0),f=new rn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,f],(m=>{r=r.add(m.Hr)}))})),W.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;Te.isDocumentKey(u)||(u=u.child(""));const f=new rn(new Te(u),0);let m=new tn(Ke);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Hr)),!0)}),f),W.resolve(this.Yr(m))}Yr(e){const n=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){tt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return W.forEach(n.mutations,(o=>{const u=new rn(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new rn(n,0),o=this.Jr.firstAfterOrEqual(r);return W.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class g4{constructor(e){this.ti=e,this.docs=(function(){return new Mt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(n))}getEntries(e,n){let r=Ki();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():vn.newInvalidDocument(o))})),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=Ki();const f=n.path,m=new Te(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||qC(BC(T),r)<=0||(o.has(T.key)||Wf(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,r,o){Ae(9500)}ni(e,n){return W.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new y4(this)}getSize(e){return W.resolve(this.size)}}class y4 extends u4{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),W.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class _4{constructor(e){this.persistence=e,this.ri=new Ga((n=>Mg(n)),Dg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new Lg,this.targetCount=0,this.oi=tl._r()}forEachTarget(e,n){return this.ri.forEach(((r,o)=>n(o))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),W.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new tl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.lr(n),W.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.ri.forEach(((f,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.ri.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),W.waitFor(u).next((()=>o))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.si.containsKey(n))}}class QT{constructor(e,n){this._i={},this.overlays={},this.ai=new $f(0),this.ui=!1,this.ui=!0,this.ci=new m4,this.referenceDelegate=e(this),this.li=new _4(this),this.indexManager=new n4,this.remoteDocumentCache=(function(o){return new g4(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new e4(n),this.Pi=new f4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new d4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new p4(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const o=new v4(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return W.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class v4 extends FC{constructor(e){super(),this.currentSequenceNumber=e}}class Ug{constructor(e){this.persistence=e,this.Ri=new Lg,this.Ai=null}static Vi(e){return new Ug(e)}get di(){if(this.Ai)return this.Ai;throw Ae(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.di,(r=>{const o=Te.fromPath(r);return this.mi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Cf{constructor(e,n){this.persistence=e,this.fi=new Ga((r=>$C(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=l4(this,n)}static Vi(e,n){return new Cf(e,n)}Ti(){}Ii(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return W.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((u=>u?W.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(f=>this.wr(e,f,n).next((m=>{m||(r++,u.removeEntry(f,Re.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),W.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=af(e.data.value)),n}wr(e,n,r){return W.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return W.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class zg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=o}static Es(e,n){let r=$e(),o=$e();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new zg(e,n.fromCache,r,o)}}class b4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class E4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return oN()?8:GC(En())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.gs(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ps(e,n,o,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new b4;return this.ys(e,n,f).next((m=>{if(u.result=m,this.As)return this.ws(e,n,f,m.size)}))})).next((()=>u.result))}ws(e,n,r,o){return r.documentReadCount<this.Vs?(Uo()<=Ge.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(Uo()<=Ge.DEBUG&&ue("QueryEngine","Query:",zo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(Uo()<=Ge.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(n))):W.resolve())}gs(e,n){if(Yb(n))return W.resolve(null);let r=si(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=eg(n,null,"F"),r=si(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=$e(...u);return this.fs.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.bs(n,m);return this.Ss(n,y,f,g.readTime)?this.gs(e,eg(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,r,o){return Yb(n)||o.isEqual(Re.min())?W.resolve(null):this.fs.getDocuments(e,r).next((u=>{const f=this.bs(n,u);return this.Ss(n,f,r,o)?W.resolve(null):(Uo()<=Ge.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zo(n)),this.Ds(e,f,n,zC(o,Fu)).next((m=>m)))}))}bs(e,n){let r=new tn(ST(e));return n.forEach(((o,u)=>{Wf(e,u)&&(r=r.add(u))})),r}Ss(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,r){return Uo()<=Ge.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",zo(n)),this.fs.getDocumentsMatchingQuery(e,n,Jr.min(),r)}Ds(e,n,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const Bg="LocalStore",T4=3e8;class w4{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new Mt(Ke),this.Fs=new Ga((u=>Mg(u)),Dg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function S4(i,e,n,r){return new w4(i,e,n,r)}async function YT(i,e){const n=Ce(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],m=[];let g=$e();for(const y of o){f.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of u){m.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(r,g).next((y=>({Ns:y,removedBatchIds:f,addedBatchIds:m})))}))}))}function A4(i,e){const n=Ce(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,T){const S=y.batch,M=S.keys();let L=W.resolve();return M.forEach((ne=>{L=L.next((()=>T.getEntry(g,ne))).next((oe=>{const se=y.docVersions.get(ne);tt(se!==null,48541),oe.version.compareTo(se)<0&&(S.applyToRemoteDocument(oe,y),oe.isValidDocument()&&(oe.setReadTime(y.commitVersion),T.addEntry(oe)))}))})),L.next((()=>m.mutationQueue.removeMutationBatch(g,S)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=$e();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function XT(i){const e=Ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function x4(i,e){const n=Ce(i),r=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const m=[];e.targetChanges.forEach(((T,S)=>{const M=o.get(S);if(!M)return;m.push(n.li.removeMatchingKeys(u,T.removedDocuments,S).next((()=>n.li.addMatchingKeys(u,T.addedDocuments,S))));let L=M.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?L=L.withResumeToken(pn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):T.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(T.resumeToken,r)),o=o.insert(S,L),(function(oe,se,fe){return oe.resumeToken.approximateByteSize()===0||se.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=T4?!0:fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0})(M,L,T)&&m.push(n.li.updateTargetData(u,L))}));let g=Ki(),y=$e();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(R4(u,f,e.documentUpdates).next((T=>{g=T.Bs,y=T.Ls}))),!r.isEqual(Re.min())){const T=n.li.getLastRemoteSnapshotVersion(u).next((S=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(T)}return W.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=o,u)))}function R4(i,e,n){let r=$e(),o=$e();return n.forEach((u=>r=r.add(u))),e.getEntries(i,r).next((u=>{let f=Ki();return n.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):ue(Bg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{Bs:f,Ls:o}}))}function N4(i,e){const n=Ce(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ng),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function C4(i,e){const n=Ce(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.li.getTargetData(r,e).next((u=>u?(o=u,W.resolve(o)):n.li.allocateTargetId(r).next((f=>(o=new Fr(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function rg(i,e,n){const r=Ce(i),o=r.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!ll(f))throw f;ue(Bg,`Failed to update sequence numbers for target ${e}: ${f}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function lE(i,e,n){const r=Ce(i);let o=Re.min(),u=$e();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,y,T){const S=Ce(g),M=S.Fs.get(T);return M!==void 0?W.resolve(S.vs.get(M)):S.li.getTargetData(y,T)})(r,f,si(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(f,m.targetId).next((g=>{u=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(f,e,n?o:Re.min(),n?u:$e()))).next((m=>(I4(r,pI(e),m),{documents:m,ks:u})))))}function I4(i,e,n){let r=i.Ms.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Ms.set(e,r)}class uE{constructor(){this.activeTargetIds=EI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class M4{constructor(){this.vo=new uE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new uE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class D4{Mo(e){}shutdown(){}}const cE="ConnectivityMonitor";class hE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ue(cE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ue(cE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zh=null;function ag(){return Zh===null?Zh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zh++,"0x"+Zh.toString(16)}const xp="RestConnection",k4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class O4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===Tf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,u){const f=ag(),m=this.Qo(e,n.toUriEncodedString());ue(xp,`Sending RPC '${e}' ${f}:`,m,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:y}=new URL(m),T=il(y);return this.zo(e,m,g,r,T).then((S=>(ue(xp,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw Jo(xp,`RPC '${e}' ${f} failed with error: `,S,"url: ",m,"request:",r),S}))}jo(e,n,r,o,u,f){return this.Wo(e,n,r,o,u)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+al})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const r=k4[e];let o=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class V4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const yn="WebChannelConnection",xu=(i,e,n)=>{i.listen(e,(r=>{try{n(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Go extends O4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Go.c_){const e=nT();xu(e,tT.STAT_EVENT,(n=>{n.stat===Qp.PROXY?ue(yn,"STAT_EVENT: detected buffering proxy"):n.stat===Qp.NOPROXY&&ue(yn,"STAT_EVENT: detected no buffering proxy")})),Go.c_=!0}}zo(e,n,r,o,u){const f=ag();return new Promise(((m,g)=>{const y=new Z1;y.setWithCredentials(!0),y.listenOnce(eT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case rf.NO_ERROR:const S=y.getResponseJson();ue(yn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),m(S);break;case rf.TIMEOUT:ue(yn,`RPC '${e}' ${f} timed out`),g(new be(te.DEADLINE_EXCEEDED,"Request time out"));break;case rf.HTTP_ERROR:const M=y.getStatus();if(ue(yn,`RPC '${e}' ${f} failed with status:`,M,"response text:",y.getResponseText()),M>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const ne=L?.error;if(ne&&ne.status&&ne.message){const oe=(function(fe){const ve=fe.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(ve)>=0?ve:te.UNKNOWN})(ne.status);g(new be(oe,ne.message))}else g(new be(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new be(te.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(yn,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(o);ue(yn,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",T,r,15)}))}T_(e,n,r){const o=ag(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const y=u.join("");ue(yn,`Creating RPC '${e}' stream ${o}: ${y}`,m);const T=f.createWebChannel(y,m);this.I_(T);let S=!1,M=!1;const L=new V4({Ho:ne=>{M?ue(yn,`Not sending because RPC '${e}' stream ${o} is closed:`,ne):(S||(ue(yn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),ue(yn,`RPC '${e}' stream ${o} sending:`,ne),T.send(ne))},Jo:()=>T.close()});return xu(T,Iu.EventType.OPEN,(()=>{M||(ue(yn,`RPC '${e}' stream ${o} transport opened.`),L.i_())})),xu(T,Iu.EventType.CLOSE,(()=>{M||(M=!0,ue(yn,`RPC '${e}' stream ${o} transport closed`),L.o_(),this.E_(T))})),xu(T,Iu.EventType.ERROR,(ne=>{M||(M=!0,Jo(yn,`RPC '${e}' stream ${o} transport errored. Name:`,ne.name,"Message:",ne.message),L.o_(new be(te.UNAVAILABLE,"The operation could not be completed")))})),xu(T,Iu.EventType.MESSAGE,(ne=>{if(!M){const oe=ne.data[0];tt(!!oe,16349);const se=oe,fe=se?.error||se[0]?.error;if(fe){ue(yn,`RPC '${e}' stream ${o} received error:`,fe);const ve=fe.status;let ye=(function(Ie){const R=Yt[Ie];if(R!==void 0)return PT(R)})(ve),je=fe.message;ye===void 0&&(ye=te.INTERNAL,je="Unknown error status: "+ve+" with message "+fe.message),M=!0,L.o_(new be(ye,je)),T.close()}else ue(yn,`RPC '${e}' stream ${o} received:`,oe),L.__(oe)}})),Go.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return sT()}}function P4(i){return new Go(i)}function Rp(){return typeof document<"u"?document:null}function nd(i){return new zI(i,!0)}Go.c_=!1;class JT{constructor(e,n,r=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const fE="PersistentStream";class WT{constructor(e,n,r,o,u,f,m,g){this.Ci=e,this.b_=r,this.S_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new JT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Gi(n.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new be(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(fE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ue(fE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class j4 extends WT{constructor(e,n,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=HI(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Re.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Re.min():f.readTime?ii(f.readTime):Re.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=ig(this.serializer),n.addTarget=(function(u,f){let m;const g=f.target;if(m=Zp(g)?{documents:KI(u,g)}:{query:$I(u,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=UT(u,f.resumeToken);const y=tg(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(Re.min())>0){m.readTime=Nf(u,f.snapshotVersion.toTimestamp());const y=tg(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const r=YI(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=ig(this.serializer),n.removeTarget=e,this.K_(n)}}class L4 extends WT{constructor(e,n,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=GI(e.writeResults,e.commitTime),r=ii(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ig(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>FI(this.serializer,r)))};this.K_(n)}}class U4{}class z4 extends U4{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new be(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Wo(e,ng(n,r),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(te.UNKNOWN,u.toString())}))}jo(e,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.jo(e,ng(n,r),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new be(te.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function B4(i,e,n,r){return new z4(i,e,n,r)}class q4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gi(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const qa="RemoteStore";class H4{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((f=>{r.enqueueAndForget((async()=>{$a(this)&&(ue(qa,"Restarting streams for network reachability change."),await(async function(g){const y=Ce(g);y.Ea.add(4),await oc(y),y.Va.set("Unknown"),y.Ea.delete(4),await sd(y)})(this))}))})),this.Va=new q4(r,o)}}async function sd(i){if($a(i))for(const e of i.Ra)await e(!0)}async function oc(i){for(const e of i.Ra)await e(!1)}function ZT(i,e){const n=Ce(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gg(n)?Fg(n):ul(n).O_()&&Hg(n,e))}function qg(i,e){const n=Ce(i),r=ul(n);n.Ia.delete(e),r.O_()&&ew(n,e),n.Ia.size===0&&(r.O_()?r.L_():$a(n)&&n.Va.set("Unknown"))}function Hg(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ul(i).Z_(e)}function ew(i,e){i.da.$e(e),ul(i).X_(e)}function Fg(i){i.da=new PI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),ul(i).start(),i.Va.ua()}function Gg(i){return $a(i)&&!ul(i).x_()&&i.Ia.size>0}function $a(i){return Ce(i).Ea.size===0}function tw(i){i.da=void 0}async function F4(i){i.Va.set("Online")}async function G4(i){i.Ia.forEach(((e,n)=>{Hg(i,e)}))}async function K4(i,e){tw(i),Gg(i)?(i.Va.ha(e),Fg(i)):i.Va.set("Unknown")}async function $4(i,e,n){if(i.Va.set("Online"),e instanceof LT&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.da.removeTarget(m))})(i,e)}catch(r){ue(qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await If(i,r)}else if(e instanceof uf?i.da.Xe(e):e instanceof jT?i.da.st(e):i.da.tt(e),!n.isEqual(Re.min()))try{const r=await XT(i.localStore);n.compareTo(r)>=0&&await(function(u,f){const m=u.da.Tt(f);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.Ia.get(y);T&&u.Ia.set(y,T.withResumeToken(g.resumeToken,f))}})),m.targetMismatches.forEach(((g,y)=>{const T=u.Ia.get(g);if(!T)return;u.Ia.set(g,T.withResumeToken(pn.EMPTY_BYTE_STRING,T.snapshotVersion)),ew(u,g);const S=new Fr(T.target,g,y,T.sequenceNumber);Hg(u,S)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(r){ue(qa,"Failed to raise snapshot:",r),await If(i,r)}}async function If(i,e,n){if(!ll(e))throw e;i.Ea.add(1),await oc(i),i.Va.set("Offline"),n||(n=()=>XT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ue(qa,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await sd(i)}))}function nw(i,e){return e().catch((n=>If(i,n,e)))}async function id(i){const e=Ce(i),n=ta(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ng;for(;Q4(e);)try{const o=await N4(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,Y4(e,o)}catch(o){await If(e,o)}sw(e)&&iw(e)}function Q4(i){return $a(i)&&i.Ta.length<10}function Y4(i,e){i.Ta.push(e);const n=ta(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function sw(i){return $a(i)&&!ta(i).x_()&&i.Ta.length>0}function iw(i){ta(i).start()}async function X4(i){ta(i).ra()}async function J4(i){const e=ta(i);for(const n of i.Ta)e.ea(n.mutations)}async function W4(i,e,n){const r=i.Ta.shift(),o=Vg.from(r,e,n);await nw(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await id(i)}async function Z4(i,e){e&&ta(i).Y_&&await(async function(r,o){if((function(f){return kI(f)&&f!==te.ABORTED})(o.code)){const u=r.Ta.shift();ta(r).B_(),await nw(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await id(r)}})(i,e),sw(i)&&iw(i)}async function dE(i,e){const n=Ce(i);n.asyncQueue.verifyOperationInProgress(),ue(qa,"RemoteStore received new credentials");const r=$a(n);n.Ea.add(3),await oc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sd(n)}async function eM(i,e){const n=Ce(i);e?(n.Ea.delete(2),await sd(n)):e||(n.Ea.add(2),await oc(n),n.Va.set("Unknown"))}function ul(i){return i.ma||(i.ma=(function(n,r,o){const u=Ce(n);return u.sa(),new j4(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:F4.bind(null,i),Yo:G4.bind(null,i),t_:K4.bind(null,i),J_:$4.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),Gg(i)?Fg(i):i.Va.set("Unknown")):(await i.ma.stop(),tw(i))}))),i.ma}function ta(i){return i.fa||(i.fa=(function(n,r,o){const u=Ce(n);return u.sa(),new L4(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:X4.bind(null,i),t_:Z4.bind(null,i),ta:J4.bind(null,i),na:W4.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await id(i)):(await i.fa.stop(),i.Ta.length>0&&(ue(qa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Kg{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const f=Date.now()+r,m=new Kg(e,n,f,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $g(i,e){if(Gi("AsyncQueue",`${e}: ${i}`),ll(i))return new be(te.UNAVAILABLE,`${e}: ${i}`);throw i}class Ko{static emptySet(e){return new Ko(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Te.comparator(n.key,r.key):(n,r)=>Te.comparator(n.key,r.key),this.keyedMap=Mu(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ko)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ko;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class mE{constructor(){this.ga=new Mt(Te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class nl{constructor(e,n,r,o,u,f,m,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new nl(e,n,Ko.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}class tM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class nM{constructor(){this.queries=pE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Ce(n),u=o.queries;o.queries=pE(),u.forEach(((f,m)=>{for(const g of m.ba)g.onError(r)}))})(this,new be(te.ABORTED,"Firestore shutting down"))}}function pE(){return new Ga((i=>wT(i)),Jf)}async function sM(i,e){const n=Ce(i);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(r=2):(u=new tM,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=$g(f,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Qg(n)}async function iM(i,e){const n=Ce(i),r=e.query;let o=3;const u=n.queries.get(r);if(u){const f=u.ba.indexOf(e);f>=0&&(u.ba.splice(f,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rM(i,e){const n=Ce(i);let r=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ba)m.Fa(o)&&(r=!0);f.wa=o}}r&&Qg(n)}function aM(i,e,n){const r=Ce(i),o=r.queries.get(e);if(o)for(const u of o.ba)u.onError(n);r.queries.delete(e)}function Qg(i){i.Ca.forEach((e=>{e.next()}))}var og,gE;(gE=og||(og={})).Ma="default",gE.Cache="cache";class oM{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==og.Cache}}class rw{constructor(e){this.key=e}}class aw{constructor(e){this.key=e}}class lM{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=$e(),this.mutatedKeys=$e(),this.eu=ST(e),this.tu=new Ko(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new mE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,S)=>{const M=o.get(T),L=Wf(this.query,S)?S:null,ne=!!M&&this.mutatedKeys.has(M.key),oe=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let se=!1;M&&L?M.data.isEqual(L.data)?ne!==oe&&(r.track({type:3,doc:L}),se=!0):this.su(M,L)||(r.track({type:2,doc:L}),se=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(m=!0)):!M&&L?(r.track({type:0,doc:L}),se=!0):M&&!L&&(r.track({type:1,doc:M}),se=!0,(g||y)&&(m=!0)),se&&(L?(f=f.add(L),u=oe?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Ss:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,S)=>(function(L,ne){const oe=se=>{switch(se){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:se})}};return oe(L)-oe(ne)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(r),o=o??!1;const m=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,f.length!==0||y?{snapshot:new nl(this.query,e.tu,u,f,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=$e(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new aw(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new rw(r))})),n}cu(e){this.Za=e.ks,this.Ya=$e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Yg="SyncEngine";class uM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cM{constructor(e){this.key=e,this.hu=!1}}class hM{constructor(e,n,r,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ga((m=>wT(m)),Jf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Mt(Te.comparator),this.Au=new Map,this.Vu=new Lg,this.du={},this.mu=new Map,this.fu=tl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fM(i,e,n=!0){const r=fw(i);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await ow(r,e,n,!0),o}async function dM(i,e){const n=fw(i);await ow(n,e,!0,!1)}async function ow(i,e,n,r){const o=await C4(i.localStore,si(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await mM(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&ZT(i.remoteStore,o),m}async function mM(i,e,n,r,o){i.pu=(S,M,L)=>(async function(oe,se,fe,ve){let ye=se.view.ru(fe);ye.Ss&&(ye=await lE(oe.localStore,se.query,!1).then((({documents:R})=>se.view.ru(R,ye))));const je=ve&&ve.targetChanges.get(se.targetId),ct=ve&&ve.targetMismatches.get(se.targetId)!=null,Ie=se.view.applyChanges(ye,oe.isPrimaryClient,je,ct);return _E(oe,se.targetId,Ie.au),Ie.snapshot})(i,S,M,L);const u=await lE(i.localStore,e,!0),f=new lM(e,u.ks),m=f.ru(u.documents),g=ac.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),y=f.applyChanges(m,i.isPrimaryClient,g);_E(i,n,y.au);const T=new uM(e,n,f);return i.Tu.set(e,T),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function pM(i,e,n){const r=Ce(i),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((f=>!Jf(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await rg(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&qg(r.remoteStore,o.targetId),lg(r,o.targetId)})).catch(ol)):(lg(r,o.targetId),await rg(r.localStore,o.targetId,!0))}async function gM(i,e){const n=Ce(i),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qg(n.remoteStore,r.targetId))}async function yM(i,e,n){const r=SM(i);try{const o=await(function(f,m){const g=Ce(f),y=St.now(),T=m.reduce(((L,ne)=>L.add(ne.key)),$e());let S,M;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let ne=Ki(),oe=$e();return g.xs.getEntries(L,T).next((se=>{ne=se,ne.forEach(((fe,ve)=>{ve.isValidDocument()||(oe=oe.add(fe))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,ne))).next((se=>{S=se;const fe=[];for(const ve of m){const ye=NI(ve,S.get(ve.key).overlayedDocument);ye!=null&&fe.push(new Ka(ve.key,ye,gT(ye.value.mapValue),qi.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,fe,m)})).next((se=>{M=se;const fe=se.applyToLocalDocumentSet(S,oe);return g.documentOverlayCache.saveOverlays(L,se.batchId,fe)}))})).then((()=>({batchId:M.batchId,changes:xT(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,m,g){let y=f.du[f.currentUser.toKey()];y||(y=new Mt(Ke)),y=y.insert(m,g),f.du[f.currentUser.toKey()]=y})(r,o.batchId,n),await lc(r,o.changes),await id(r.remoteStore)}catch(o){const u=$g(o,"Failed to persist write");n.reject(u)}}async function lw(i,e){const n=Ce(i);try{const r=await x4(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?tt(f.hu,14607):o.removedDocuments.size>0&&(tt(f.hu,42227),f.hu=!1))})),await lc(n,r,e)}catch(r){await ol(r)}}function yE(i,e,n){const r=Ce(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const g=Ce(f);g.onlineState=m;let y=!1;g.queries.forEach(((T,S)=>{for(const M of S.ba)M.va(m)&&(y=!0)})),y&&Qg(g)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _M(i,e,n){const r=Ce(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),u=o&&o.key;if(u){let f=new Mt(Te.comparator);f=f.insert(u,vn.newNoDocument(u,Re.min()));const m=$e().add(u),g=new td(Re.min(),new Map,new Mt(Ke),f,m);await lw(r,g),r.Ru=r.Ru.remove(u),r.Au.delete(e),Xg(r)}else await rg(r.localStore,e,!1).then((()=>lg(r,e,n))).catch(ol)}async function vM(i,e){const n=Ce(i),r=e.batch.batchId;try{const o=await A4(n.localStore,e);cw(n,r,null),uw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await lc(n,o)}catch(o){await ol(o)}}async function bM(i,e,n){const r=Ce(i);try{const o=await(function(f,m){const g=Ce(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return g.mutationQueue.lookupMutationBatch(y,m).next((S=>(tt(S!==null,37113),T=S.keys(),g.mutationQueue.removeMutationBatch(y,S)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>g.localDocuments.getDocuments(y,T)))}))})(r.localStore,e);cw(r,e,n),uw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await lc(r,o)}catch(o){await ol(o)}}function uw(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function cw(i,e,n){const r=Ce(i);let o=r.du[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function lg(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||hw(i,r)}))}function hw(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(qg(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),Xg(i))}function _E(i,e,n){for(const r of n)r instanceof rw?(i.Vu.addReference(r.key,e),EM(i,r)):r instanceof aw?(ue(Yg,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||hw(i,r.key)):Ae(19791,{wu:r})}function EM(i,e){const n=e.key,r=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(r)||(ue(Yg,"New document in limbo: "+n),i.Eu.add(r),Xg(i))}function Xg(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Te(It.fromString(e)),r=i.fu.next();i.Au.set(r,new cM(n)),i.Ru=i.Ru.insert(n,r),ZT(i.remoteStore,new Fr(si(kg(n.path)),r,"TargetPurposeLimboResolution",$f.ce))}}async function lc(i,e,n){const r=Ce(i),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{f.push(r.pu(g,e,n).then((y=>{if((y||n)&&r.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){o.push(y);const T=zg.Es(g.targetId,y);u.push(T)}})))})),await Promise.all(f),r.Pu.J_(o),await(async function(g,y){const T=Ce(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>W.forEach(y,(M=>W.forEach(M.Ts,(L=>T.persistence.referenceDelegate.addReference(S,M.targetId,L))).next((()=>W.forEach(M.Is,(L=>T.persistence.referenceDelegate.removeReference(S,M.targetId,L)))))))))}catch(S){if(!ll(S))throw S;ue(Bg,"Failed to update sequence numbers: "+S)}for(const S of y){const M=S.targetId;if(!S.fromCache){const L=T.vs.get(M),ne=L.snapshotVersion,oe=L.withLastLimboFreeSnapshotVersion(ne);T.vs=T.vs.insert(M,oe)}}})(r.localStore,u))}async function TM(i,e){const n=Ce(i);if(!n.currentUser.isEqual(e)){ue(Yg,"User change. New user:",e.toKey());const r=await YT(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new be(te.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lc(n,r.Ns)}}function wM(i,e){const n=Ce(i),r=n.Au.get(e);if(r&&r.hu)return $e().add(r.key);{let o=$e();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function fw(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=lw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_M.bind(null,e),e.Pu.J_=rM.bind(null,e.eventManager),e.Pu.yu=aM.bind(null,e.eventManager),e}function SM(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bM.bind(null,e),e}class Mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return S4(this.persistence,new E4,e.initialUser,this.serializer)}Cu(e){return new QT(Ug.Vi,this.serializer)}Du(e){return new M4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mf.provider={build:()=>new Mf};class AM extends Mf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){tt(this.persistence.referenceDelegate instanceof Cf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new a4(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new QT((r=>Cf.Vi(r,n)),this.serializer)}}class ug{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TM.bind(null,this.syncEngine),await eM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nM})()}createDatastore(e){const n=nd(e.databaseInfo.databaseId),r=P4(e.databaseInfo);return B4(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,u,f,m){return new H4(r,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>yE(this.syncEngine,n,0)),(function(){return hE.v()?new hE:new D4})())}createSyncEngine(e,n){return(function(o,u,f,m,g,y,T){const S=new hM(o,u,f,m,g,y);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ce(n);ue(qa,"RemoteStore shutting down."),r.Ea.add(5),await oc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ug.provider={build:()=>new ug};class xM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const na="FirestoreClient";class RM{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=o,this.user=_n.UNAUTHENTICATED,this.clientId=xg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{ue(na,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(ue(na,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$g(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Np(i,e){i.asyncQueue.verifyOperationInProgress(),ue(na,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await YT(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function vE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await NM(i);ue(na,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>dE(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>dE(e.remoteStore,o))),i._onlineComponents=e}async function NM(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ue(na,"Using user provided OfflineComponentProvider");try{await Np(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Jo("Error using user provided cache. Falling back to memory cache: "+n),await Np(i,new Mf)}}else ue(na,"Using default OfflineComponentProvider"),await Np(i,new AM(void 0));return i._offlineComponents}async function dw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ue(na,"Using user provided OnlineComponentProvider"),await vE(i,i._uninitializedComponentsProvider._online)):(ue(na,"Using default OnlineComponentProvider"),await vE(i,new ug))),i._onlineComponents}function CM(i){return dw(i).then((e=>e.syncEngine))}async function IM(i){const e=await dw(i),n=e.eventManager;return n.onListen=fM.bind(null,e.syncEngine),n.onUnlisten=pM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gM.bind(null,e.syncEngine),n}function MM(i,e,n={}){const r=new Yr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,g,y){const T=new xM({next:M=>{T.Nu(),f.enqueueAndForget((()=>iM(u,S)));const L=M.docs.has(m);!L&&M.fromCache?y.reject(new be(te.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&g&&g.source==="server"?y.reject(new be(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new oM(kg(m.path),T,{includeMetadataChanges:!0,Ka:!0});return sM(u,S)})(await IM(i),i.asyncQueue,e,n,r))),r.promise}function DM(i,e){const n=new Yr;return i.asyncQueue.enqueueAndForget((async()=>yM(await CM(i),e,n))),n.promise}function mw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const kM="ComponentProvider",bE=new Map;function OM(i,e,n,r,o){return new XC(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,mw(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}const pw="firestore.googleapis.com",EE=!0;class TE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pw,this.ssl=EE}else this.host=e.host,this.ssl=e.ssl??EE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$T;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i4)throw new be(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mw(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new be(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new be(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new be(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jg{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new NC;switch(r.type){case"firstParty":return new DC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=bE.get(n);r&&(ue(kM,"Removing Datastore"),bE.delete(n),r.terminate())})(this),Promise.resolve()}}function VM(i,e,n,r={}){i=Hu(i,Jg);const o=il(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(F1(`https://${m}`),G1("Firestore",!0)),u.host!==pw&&u.host!==m&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!Ua(g,f)&&(i._setSettings(g),r.mockUserToken)){let y,T;if(typeof r.mockUserToken=="string")y=r.mockUserToken,T=_n.MOCK_USER;else{y=WR(r.mockUserToken,i._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new be(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new _n(S)}i._authCredentials=new CC(new rT(y,T))}}class Wg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wg(this.firestore,e,this._query)}}class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}toJSON(){return{type:an._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ic(n,an._jsonSchema))return new an(e,r||null,new Te(It.fromString(n.referencePath)))}}an._jsonSchemaVersion="firestore/documentReference/1.0",an._jsonSchema={type:Xt("string",an._jsonSchemaVersion),referencePath:Xt("string")};class Xu extends Wg{constructor(e,n,r){super(e,n,kg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new Te(e))}withConverter(e){return new Xu(this.firestore,e,this._path)}}function gw(i,e,...n){if(i=li(i),arguments.length===1&&(e=xg.newId()),LC("doc","path",e),i instanceof Jg){const r=It.fromString(e,...n);return Pb(r),new an(i,null,new Te(r))}{if(!(i instanceof an||i instanceof Xu))throw new be(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(It.fromString(e,...n));return Pb(r),new an(i.firestore,i instanceof Xu?i.converter:null,new Te(r))}}const wE="AsyncQueue";class SE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new JT(this,"async_queue_retry"),this._c=()=>{const r=Rp();r&&ue(wE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Rp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Rp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Yr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ll(e))throw e;ue(wE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Gi("INTERNAL UNHANDLED ERROR: ",AE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Kg.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:AE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function AE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Zg extends Jg{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new SE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new SE(e),this._firestoreClient=void 0,await e}}}function PM(i,e){const n=typeof i=="object"?i:Y1(),r=typeof i=="string"?i:Tf,o=Sg(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=XR("firestore");u&&VM(o,...u)}return o}function yw(i){if(i._terminated)throw new be(te.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||jM(i),i._firestoreClient}function jM(i){const e=i._freezeSettings(),n=OM(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new RM(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ts(pn.fromBase64String(e))}catch(n){throw new be(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ts(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ic(e,Ts._jsonSchema))return Ts.fromBase64String(e.bytes)}}Ts._jsonSchemaVersion="firestore/bytes/1.0",Ts._jsonSchema={type:Xt("string",Ts._jsonSchemaVersion),bytes:Xt("string")};class _w{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vw{constructor(e){this._methodName=e}}class ri{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(e){if(ic(e,ri._jsonSchema))return new ri(e.latitude,e.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:Xt("string",ri._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};class Ls{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ic(e,Ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ls(e.vectorValues);throw new be(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ls._jsonSchemaVersion="firestore/vectorValue/1.0",Ls._jsonSchema={type:Xt("string",Ls._jsonSchemaVersion),vectorValues:Xt("object")};const LM=/^__.*__$/;class UM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ka(e,this.data,this.fieldMask,n,this.fieldTransforms):new rc(e,this.data,n,this.fieldTransforms)}}function bw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{dataSource:i})}}class ey{constructor(e,n,r,o,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ey({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Df(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(bw(this.dataSource)&&LM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class zM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nd(e)}createContext(e,n,r,o=!1){return new ey({dataSource:e,methodName:n,targetDoc:r,path:dn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function BM(i){const e=i._freezeSettings(),n=nd(i._databaseId);return new zM(i._databaseId,!!e.ignoreUndefinedProperties,n)}function qM(i,e,n,r,o,u={}){const f=i.createContext(u.merge||u.mergeFields?2:0,e,n,o);Sw("Data must be an object, but it was:",f,r);const m=Tw(r,f);let g,y;if(u.merge)g=new Ps(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const S of u.mergeFields){const M=ty(e,S,n);if(!f.contains(M))throw new be(te.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);GM(T,M)||T.push(M)}g=new Ps(T),y=f.fieldTransforms.filter((S=>g.covers(S.field)))}else g=null,y=f.fieldTransforms;return new UM(new Es(m),g,y)}function Ew(i,e){if(ww(i=li(i)))return Sw("Unsupported field value:",e,i),Tw(i,e);if(i instanceof vw)return(function(r,o){if(!bw(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const u=[];let f=0;for(const m of r){let g=Ew(m,o.childContextForArray(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}})(i,e)}return(function(r,o){if((r=li(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TI(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=St.fromDate(r);return{timestampValue:Nf(o.serializer,u)}}if(r instanceof St){const u=new St(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nf(o.serializer,u)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ts)return{bytesValue:UT(o.serializer,r._byteString)};if(r instanceof an){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.createError(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:jg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ls)return(function(f,m){const g=f instanceof Ls?f.toArray():f;return{mapValue:{fields:{[mT]:{stringValue:pT},[wf]:{arrayValue:{values:g.map((T=>{if(typeof T!="number")throw m.createError("VectorValues must only contain numeric values.");return Og(m.serializer,T)}))}}}}}})(r,o);if(KT(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Rg(r)}`)})(i,e)}function Tw(i,e){const n={};return lT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fa(i,((r,o)=>{const u=Ew(o,e.childContextForField(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function ww(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof St||i instanceof ri||i instanceof Ts||i instanceof an||i instanceof vw||i instanceof Ls||KT(i))}function Sw(i,e,n){if(!ww(n)||!aT(n)){const r=Rg(n);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function ty(i,e,n){if((e=li(e))instanceof _w)return e._internalPath;if(typeof e=="string")return FM(i,e);throw Df("Field path arguments must be of type string or ",i,!1,void 0,n)}const HM=new RegExp("[~\\*/\\[\\]]");function FM(i,e,n){if(e.search(HM)>=0)throw Df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new _w(...e.split("."))._internalPath}catch{throw Df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Df(i,e,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${r}`),f&&(g+=` in document ${o}`),g+=")"),new be(te.INVALID_ARGUMENT,m+i+g)}function GM(i,e){return i.some((n=>n.isEqual(e)))}class KM{convertValue(e,n="none"){switch(ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fa(e,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(e){const n=e.fields?.[wf].arrayValue?.values?.map((r=>zt(r.doubleValue)));return new Ls(n)}convertGeoPoint(e){return new ri(zt(e.latitude),zt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gu(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new St(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=It.fromString(e);tt(GT(r),9688,{name:e});const o=new Ku(r.get(1),r.get(3)),u=new Te(r.popFirst(5));return o.isEqual(n)||Gi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class $M extends KM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}const xE="@firebase/firestore",RE="4.10.0";class Aw{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(ty("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QM extends Aw{data(){return super.data()}}function YM(i,e,n){let r;return r=i?i.toFirestore(e):e,r}class ku{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class La extends Aw{constructor(e,n,r,o,u,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ty("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=La._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}La._jsonSchemaVersion="firestore/documentSnapshot/1.0",La._jsonSchema={type:Xt("string",La._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class cf extends La{data(e={}){return super.data(e)}}class Uu{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ku(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new cf(this._firestore,this._userDataWriter,r.key,r,new ku(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const g=new cf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ku(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new cf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ku(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),T=f.indexOf(m.doc.key)),{type:XM(m.type),doc:g,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Uu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XM(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:i})}}Uu._jsonSchemaVersion="firestore/querySnapshot/1.0",Uu._jsonSchema={type:Xt("string",Uu._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};function JM(i){i=Hu(i,an);const e=Hu(i.firestore,Zg),n=yw(e);return MM(n,i._key).then((r=>eD(e,i,r)))}function WM(i,e,n){i=Hu(i,an);const r=Hu(i.firestore,Zg),o=YM(i.converter,e),u=BM(r);return ZM(r,[qM(u,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,qi.none())])}function ZM(i,e){const n=yw(i);return DM(n,e)}function eD(i,e,n){const r=n.docs.get(e._key),o=new $M(i);return new La(i,o,e._key,r,new ku(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){RC(rl),Xo(new za("firestore",((r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new Zg(new IC(r.getProvider("auth-internal")),new kC(f,r.getProvider("app-check-internal")),JC(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),$r(xE,RE,e),$r(xE,RE,"esm2020")})();function xw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tD=xw,Rw=new nc("auth","Firebase",xw());const kf=new Tg("@firebase/auth");function nD(i,...e){kf.logLevel<=Ge.WARN&&kf.warn(`Auth (${rl}): ${i}`,...e)}function hf(i,...e){kf.logLevel<=Ge.ERROR&&kf.error(`Auth (${rl}): ${i}`,...e)}function $i(i,...e){throw ny(i,...e)}function ai(i,...e){return ny(i,...e)}function Nw(i,e,n){const r={...tD(),[e]:n};return new nc("auth","Firebase",r).create(e,{appName:i.name})}function Xr(i){return Nw(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ny(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return Rw.create(i,...e)}function xe(i,e,...n){if(!i)throw ny(e,...n)}function zi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw hf(e),new Error(e)}function Qi(i,e){i||zi(e)}function cg(){return typeof self<"u"&&self.location?.href||""}function sD(){return NE()==="http:"||NE()==="https:"}function NE(){return typeof self<"u"&&self.location?.protocol||null}function iD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sD()||iN()||"connection"in navigator)?navigator.onLine:!0}function rD(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qi(n>e,"Short delay should be less than long delay!"),this.isMobile=tN()||rN()}get(){return iD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sy(i,e){Qi(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Cw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const aD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const oD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lD=new uc(3e4,6e4);function rd(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function cl(i,e,n,r,o={}){return Iw(i,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const m=sc({key:i.config.apiKey,...f}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:g,...u};return sN()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&il(i.emulatorConfig.host)&&(y.credentials="include"),Cw.fetch()(await Dw(i,i.config.apiHost,n,m),y)})}async function Iw(i,e,n){i._canInitEmulator=!1;const r={...aD,...e};try{const o=new uD(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw ef(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ef(i,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw ef(i,"email-already-in-use",f);if(g==="USER_DISABLED")throw ef(i,"user-disabled",f);const T=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Nw(i,T,y);$i(i,T)}}catch(o){if(o instanceof Yi)throw o;$i(i,"network-request-failed",{message:String(o)})}}async function Mw(i,e,n,r,o={}){const u=await cl(i,e,n,r,o);return"mfaPendingCredential"in u&&$i(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Dw(i,e,n,r){const o=`${e}${n}?${r}`,u=i,f=u.config.emulator?sy(i.config,o):`${i.config.apiScheme}://${o}`;return oD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class uD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ai(this.auth,"network-request-failed")),lD.get())})}}function ef(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=ai(i,e,r);return o.customData._tokenResponse=n,o}async function cD(i,e){return cl(i,"POST","/v1/accounts:delete",e)}async function Of(i,e){return cl(i,"POST","/v1/accounts:lookup",e)}function zu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hD(i,e=!1){const n=li(i),r=await n.getIdToken(e),o=iy(r);xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:r,authTime:zu(Cp(o.auth_time)),issuedAtTime:zu(Cp(o.iat)),expirationTime:zu(Cp(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Cp(i){return Number(i)*1e3}function iy(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return hf("JWT malformed, contained fewer than 3 sections"),null;try{const o=z1(n);return o?JSON.parse(o):(hf("Failed to decode base64 JWT payload"),null)}catch(o){return hf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function CE(i){const e=iy(i);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ju(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yi&&fD(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function fD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class dD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class hg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zu(this.lastLoginAt),this.creationTime=zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vf(i){const e=i.auth,n=await i.getIdToken(),r=await Ju(i,Of(e,{idToken:n}));xe(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?kw(o.providerUserInfo):[],f=pD(i.providerData,u),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!f?.length,y=m?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new hg(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,T)}async function mD(i){const e=li(i);await Vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pD(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function kw(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function gD(i,e){const n=await Iw(i,{},async()=>{const r=sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await Dw(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return i.emulatorConfig&&il(i.emulatorConfig.host)&&(g.credentials="include"),Cw.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yD(i,e){return cl(i,"POST","/v2/accounts:revokeToken",rd(i,e))}class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=CE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await gD(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new $o;return r&&(xe(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(xe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(xe(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return zi("not implemented")}}function Lr(i,e){xe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class js{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new dD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new hg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ju(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hD(this,e)}reload(){return mD(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new js({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Os(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await Ju(this,cD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:M,isAnonymous:L,providerData:ne,stsTokenManager:oe}=n;xe(S&&oe,e,"internal-error");const se=$o.fromJSON(this.name,oe);xe(typeof S=="string",e,"internal-error"),Lr(r,e.name),Lr(o,e.name),xe(typeof M=="boolean",e,"internal-error"),xe(typeof L=="boolean",e,"internal-error"),Lr(u,e.name),Lr(f,e.name),Lr(m,e.name),Lr(g,e.name),Lr(y,e.name),Lr(T,e.name);const fe=new js({uid:S,auth:e,email:o,emailVerified:M,displayName:r,isAnonymous:L,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:se,createdAt:y,lastLoginAt:T});return ne&&Array.isArray(ne)&&(fe.providerData=ne.map(ve=>({...ve}))),g&&(fe._redirectEventId=g),fe}static async _fromIdTokenResponse(e,n,r=!1){const o=new $o;o.updateFromServerResponse(n);const u=new js({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Vf(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];xe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?kw(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new $o;m.updateFromIdToken(r);const g=new js({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new hg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const IE=new Map;function Bi(i){Qi(i instanceof Function,"Expected a class definition");let e=IE.get(i);return e?(Qi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,IE.set(i,e),e)}class Ow{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ow.type="NONE";const ME=Ow;function ff(i,e,n){return`firebase:${i}:${e}:${n}`}class Qo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=ff(this.userKey,o.apiKey,u),this.fullPersistenceKey=ff("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Of(this.auth,{idToken:e}).catch(()=>{});return n?js._fromGetAccountInfoResponse(this.auth,n,e):null}return js._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qo(Bi(ME),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Bi(ME);const f=ff(r,e.config.apiKey,e.name);let m=null;for(const y of n)try{const T=await y._get(f);if(T){let S;if(typeof T=="string"){const M=await Of(e,{idToken:T}).catch(()=>{});if(!M)break;S=await js._fromGetAccountInfoResponse(e,M,T)}else S=js._fromJSON(e,T);y!==u&&(m=S),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Qo(u,e,r):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new Qo(u,e,r))}}function DE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zw(e))return"Blackberry";if(Bw(e))return"Webos";if(Pw(e))return"Safari";if((e.includes("chrome/")||jw(e))&&!e.includes("edge/"))return"Chrome";if(Uw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if(r?.length===2)return r[1]}return"Other"}function Vw(i=En()){return/firefox\//i.test(i)}function Pw(i=En()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jw(i=En()){return/crios\//i.test(i)}function Lw(i=En()){return/iemobile/i.test(i)}function Uw(i=En()){return/android/i.test(i)}function zw(i=En()){return/blackberry/i.test(i)}function Bw(i=En()){return/webos/i.test(i)}function ry(i=En()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function _D(i=En()){return ry(i)&&!!window.navigator?.standalone}function vD(){return aN()&&document.documentMode===10}function qw(i=En()){return ry(i)||Uw(i)||Bw(i)||zw(i)||/windows phone/i.test(i)||Lw(i)}function Hw(i,e=[]){let n;switch(i){case"Browser":n=DE(En());break;case"Worker":n=`${DE(En())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rl}/${r}`}class bD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,m)=>{try{const g=e(u);f(g)}catch(g){m(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function ED(i,e={}){return cl(i,"GET","/v2/passwordPolicy",rd(i,e))}const TD=6;class wD{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class SD{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kE(this),this.idTokenSubscription=new kE(this),this.beforeStateQueue=new bD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Of(this,{idToken:e}),r=await js._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Os(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Os(this.app))return Promise.reject(Xr(this));const n=e?li(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Os(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Os(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ED(this),n=new wD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yD(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bi(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[Bi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&nD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ad(i){return li(i)}class kE{constructor(e){this.auth=e,this.observer=null,this.addObserver=mN(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ay={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AD(i){ay=i}function xD(i){return ay.loadJS(i)}function RD(){return ay.gapiScript}function ND(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function CD(i,e){const n=Sg(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ua(u,e??{}))return o;$i(o,"already-initialized")}return n.initialize({options:e})}function ID(i,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Bi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function MD(i,e,n){const r=ad(i);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=Fw(e),{host:f,port:m}=DD(e),g=m===null?"":`:${m}`,y={url:`${u}//${f}${g}/`},T=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(Ua(y,r.config.emulator)&&Ua(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,il(f)?(F1(`${u}//${f}${g}`),G1("Auth",!0)):kD()}function Fw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function DD(i){const e=Fw(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:OE(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:OE(f)}}}function OE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function kD(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Gw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zi("not implemented")}_getIdTokenResponse(e){return zi("not implemented")}_linkToIdToken(e,n){return zi("not implemented")}_getReauthenticationResolver(e){return zi("not implemented")}}async function Yo(i,e){return Mw(i,"POST","/v1/accounts:signInWithIdp",rd(i,e))}const OD="http://localhost";class Ha extends Gw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$i("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const f=new Ha(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Yo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yo(e,n)}buildRequest(){const e={requestUri:OD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sc(n)}return e}}class Kw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cc extends Kw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zr extends cc{constructor(){super("facebook.com")}static credential(e){return Ha._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zr.credential(e.oauthAccessToken)}catch{return null}}}zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";zr.PROVIDER_ID="facebook.com";class Br extends cc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ha._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Br.credential(n,r)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";class qr extends cc{constructor(){super("github.com")}static credential(e){return Ha._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";class Hr extends cc{constructor(){super("twitter.com")}static credential(e,n){return Ha._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hr.credential(n,r)}catch{return null}}}Hr.TWITTER_SIGN_IN_METHOD="twitter.com";Hr.PROVIDER_ID="twitter.com";async function VD(i,e){return Mw(i,"POST","/v1/accounts:signUp",rd(i,e))}class sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await js._fromIdTokenResponse(e,r,o),f=VE(r);return new sa({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=VE(r);return new sa({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function VE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}async function PD(i){if(Os(i.app))return Promise.reject(Xr(i));const e=ad(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new sa({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await VD(e,{returnSecureToken:!0}),r=await sa._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class Pf extends Yi{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Pf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Pf(e,n,r,o)}}function $w(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Pf._fromErrorAndOperation(i,u,e,r):u})}async function jD(i,e,n=!1){const r=await Ju(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return sa._forOperation(i,"link",r)}async function LD(i,e,n=!1){const{auth:r}=i;if(Os(r.app))return Promise.reject(Xr(r));const o="reauthenticate";try{const u=await Ju(i,$w(r,o,e,i),n);xe(u.idToken,r,"internal-error");const f=iy(u.idToken);xe(f,r,"internal-error");const{sub:m}=f;return xe(i.uid===m,r,"user-mismatch"),sa._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&$i(r,"user-mismatch"),u}}async function UD(i,e,n=!1){if(Os(i.app))return Promise.reject(Xr(i));const r="signIn",o=await $w(i,r,e),u=await sa._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(u.user),u}function zD(i,e,n,r){return li(i).onIdTokenChanged(e,n,r)}function BD(i,e,n){return li(i).beforeAuthStateChanged(e,n)}const jf="__sak";class Qw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jf,"1"),this.storage.removeItem(jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const qD=1e3,HD=10;class Yw extends Qw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);vD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,HD):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yw.type="LOCAL";const FD=Yw;class Xw extends Qw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Xw.type="SESSION";const Jw=Xw;function GD(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new od(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,u)),g=await GD(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}od.receivers=[];function oy(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}class KD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const y=oy("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(S){const M=S;if(M.data.eventId===y)switch(M.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(M.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function oi(){return window}function $D(i){oi().location.href=i}function Ww(){return typeof oi().WorkerGlobalScope<"u"&&typeof oi().importScripts=="function"}async function QD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YD(){return navigator?.serviceWorker?.controller||null}function XD(){return Ww()?self:null}const Zw="firebaseLocalStorageDb",JD=1,Lf="firebaseLocalStorage",eS="fbase_key";class hc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ld(i,e){return i.transaction([Lf],e?"readwrite":"readonly").objectStore(Lf)}function WD(){const i=indexedDB.deleteDatabase(Zw);return new hc(i).toPromise()}function fg(){const i=indexedDB.open(Zw,JD);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Lf,{keyPath:eS})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Lf)?e(r):(r.close(),await WD(),e(await fg()))})})}async function PE(i,e,n){const r=ld(i,!0).put({[eS]:e,value:n});return new hc(r).toPromise()}async function ZD(i,e){const n=ld(i,!1).get(e),r=await new hc(n).toPromise();return r===void 0?null:r.value}function jE(i,e){const n=ld(i,!0).delete(e);return new hc(n).toPromise()}const ek=800,tk=3;class tS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>tk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ww()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=od._getInstance(XD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await QD(),!this.activeServiceWorker)return;this.sender=new KD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fg();return await PE(e,jf,"1"),await jE(e,jf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>PE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=ld(o,!1).getAll();return new hc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ek)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tS.type="LOCAL";const nk=tS;new uc(3e4,6e4);function sk(i,e){return e?Bi(e):(xe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class ly extends Gw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ik(i){return UD(i.auth,new ly(i),i.bypassAuthState)}function rk(i){const{auth:e,user:n}=i;return xe(n,e,"internal-error"),LD(n,new ly(i),i.bypassAuthState)}async function ak(i){const{auth:e,user:n}=i;return xe(n,e,"internal-error"),jD(n,new ly(i),i.bypassAuthState)}class nS{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ik;case"linkViaPopup":case"linkViaRedirect":return ak;case"reauthViaPopup":case"reauthViaRedirect":return rk;default:$i(this.auth,"internal-error")}}resolve(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ok=new uc(2e3,1e4);class Ho extends nS{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Qi(this.filter.length===1,"Popup operations only handle one event");const e=oy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ok.get())};e()}}Ho.currentPopupAction=null;const lk="pendingRedirect",df=new Map;class uk extends nS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=df.get(this.auth._key());if(!e){try{const r=await ck(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}df.set(this.auth._key(),e)}return this.bypassAuthState||df.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ck(i,e){const n=dk(e),r=fk(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function hk(i,e){df.set(i._key(),e)}function fk(i){return Bi(i._redirectPersistence)}function dk(i){return ff(lk,i.config.apiKey,i.name)}async function mk(i,e,n=!1){if(Os(i.app))return Promise.reject(Xr(i));const r=ad(i),o=sk(r,e),f=await new uk(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}const pk=600*1e3;class gk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!sS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ai(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pk&&this.cachedEventUids.clear(),this.cachedEventUids.has(LE(e))}saveEventToCache(e){this.cachedEventUids.add(LE(e)),this.lastProcessedEventTime=Date.now()}}function LE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function sS({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function yk(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sS(i);default:return!1}}async function _k(i,e={}){return cl(i,"GET","/v1/projects",e)}const vk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bk=/^https?/;async function Ek(i){if(i.config.emulator)return;const{authorizedDomains:e}=await _k(i);for(const n of e)try{if(Tk(n))return}catch{}$i(i,"unauthorized-domain")}function Tk(i){const e=cg(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!bk.test(n))return!1;if(vk.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const wk=new uc(3e4,6e4);function UE(){const i=oi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function Sk(i){return new Promise((e,n)=>{function r(){UE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{UE(),n(ai(i,"network-request-failed"))},timeout:wk.get()})}if(oi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(oi().gapi?.load)r();else{const o=ND("iframefcb");return oi()[o]=()=>{gapi.load?r():n(ai(i,"network-request-failed"))},xD(`${RD()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw mf=null,e})}let mf=null;function Ak(i){return mf=mf||Sk(i),mf}const xk=new uc(5e3,15e3),Rk="__/auth/iframe",Nk="emulator/auth/iframe",Ck={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ik=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mk(i){const e=i.config;xe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?sy(e,Nk):`https://${i.config.authDomain}/${Rk}`,r={apiKey:e.apiKey,appName:i.name,v:rl},o=Ik.get(i.config.apiHost);o&&(r.eid=o);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${sc(r).slice(1)}`}async function Dk(i){const e=await Ak(i),n=oi().gapi;return xe(n,i,"internal-error"),e.open({where:document.body,url:Mk(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ck,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=ai(i,"network-request-failed"),m=oi().setTimeout(()=>{u(f)},xk.get());function g(){oi().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(f)})}))}const kk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ok=500,Vk=600,Pk="_blank",jk="http://localhost";class zE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lk(i,e,n,r=Ok,o=Vk){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...kk,width:r.toString(),height:o.toString(),top:u,left:f},y=En().toLowerCase();n&&(m=jw(y)?Pk:n),Vw(y)&&(e=e||jk,g.scrollbars="yes");const T=Object.entries(g).reduce((M,[L,ne])=>`${M}${L}=${ne},`,"");if(_D(y)&&m!=="_self")return Uk(e||"",m),new zE(null);const S=window.open(e||"",m,T);xe(S,i,"popup-blocked");try{S.focus()}catch{}return new zE(S)}function Uk(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const zk="__/auth/handler",Bk="emulator/auth/handler",qk=encodeURIComponent("fac");async function BE(i,e,n,r,o,u){xe(i.config.authDomain,i,"auth-domain-config-required"),xe(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:rl,eventId:o};if(e instanceof Kw){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",dN(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))f[T]=S}if(e instanceof cc){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(f.scopes=T.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await i._getAppCheckToken(),y=g?`#${qk}=${encodeURIComponent(g)}`:"";return`${Hk(i)}?${sc(m).slice(1)}${y}`}function Hk({config:i}){return i.emulator?sy(i,Bk):`https://${i.authDomain}/${zk}`}const Ip="webStorageSupport";class Fk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jw,this._completeRedirectFn=mk,this._overrideRedirectResult=hk}async _openPopup(e,n,r,o){Qi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await BE(e,n,r,cg(),o);return Lk(e,u,oy())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await BE(e,n,r,cg(),o);return $D(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Qi(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Dk(e),r=new gk(e);return n.register("authEvent",o=>(xe(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ip,{type:Ip},o=>{const u=o?.[0]?.[Ip];u!==void 0&&n(!!u),$i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ek(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qw()||Pw()||ry()}}const Gk=Fk;var qE="@firebase/auth",HE="1.12.0";class Kk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $k(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Qk(i){Xo(new za("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;xe(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hw(i)},y=new SD(r,o,u,g);return ID(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xo(new za("auth-internal",e=>{const n=ad(e.getProvider("auth").getImmediate());return(r=>new Kk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(qE,HE,$k(i)),$r(qE,HE,"esm2020")}const Yk=300,Xk=H1("authIdTokenMaxAge")||Yk;let FE=null;const Jk=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Xk)return;const o=n?.token;FE!==o&&(FE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Wk(i=Y1()){const e=Sg(i,"auth");if(e.isInitialized())return e.getImmediate();const n=CD(i,{popupRedirectResolver:Gk,persistence:[nk,FD,Jw]}),r=H1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=Jk(u.toString());BD(n,f,()=>f(n.currentUser)),zD(n,m=>f(m))}}const o=B1("auth");return o&&MD(n,`http://${o}`),n}function Zk(){return document.getElementsByTagName("head")?.[0]??document}AD({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const u=ai("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",Zk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Qk("Browser");const eO={apiKey:"AIzaSyDxovMIYU7GKiB2wUTHNIcVfbU2sH-IL8Y",authDomain:"agnes3000-cc5af.firebaseapp.com",projectId:"agnes3000-cc5af",storageBucket:"agnes3000-cc5af.firebasestorage.app",messagingSenderId:"1048338678359",appId:"1:1048338678359:web:fd106a8e6047e19c409912"};let Ru=null,Uf=null,GE=null;const iS=()=>(Ru||(Ru=Q1(eO),Uf=PM(Ru),GE=Wk(Ru)),{app:Ru,db:Uf,auth:GE}),tO=async()=>{try{const{auth:i}=iS();return(await PD(i)).user.uid}catch(i){return console.error("Firebase anonymous sign-in failed:",i),null}},rS=()=>(Uf||iS(),Uf),aS="userData",nO=async(i,e)=>{try{const n=rS();if(!n)return!1;const r=gw(n,aS,i);return await WM(r,{...e,lastSync:Date.now()}),!0}catch(n){return console.error("Firebase save error:",n),!1}},sO=async i=>{try{const e=rS();if(!e)return null;const n=gw(e,aS,i),r=await JM(n);return r.exists()?r.data():null}catch(e){return console.error("Firebase load error:",e),null}},iO="Dominikanergasse",KE=(()=>{const i=navigator.userAgent;return/iPhone|iPad|iPod/.test(i)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1})(),Mp={neutral:"",empathetic:"",encouraging:"",concerned:"",thoughtful:"",proud:"",sad:""};function rO(){const[i,e]=ee.useState(()=>Mx()),[n,r]=ee.useState(null),[o,u]=ee.useState("rooms"),[f,m]=ee.useState(""),[g,y]=ee.useState(!1),[T,S]=ee.useState(!1),[M,L]=ee.useState("tom"),[ne,oe]=ee.useState("neutral"),[se,fe]=ee.useState(null),[ve,ye]=ee.useState(""),[je,ct]=ee.useState(45),[Ie,R]=ee.useState(null),[A,C]=ee.useState(!1),[V,D]=ee.useState(""),[P,x]=ee.useState(null),[ht,Rt]=ee.useState(!1),[K,re]=ee.useState(null),[me,Le]=ee.useState([]),[Ue,O]=ee.useState({}),[X,ae]=ee.useState(!1),[le,Se]=ee.useState(!1),[Me,ze]=ee.useState(!1),[ft,dt]=ee.useState(""),[Nn,hi]=ee.useState(!1),[Cn,fi]=ee.useState(null),[Tn,zs]=ee.useState(null),[In,ws]=ee.useState(""),[Ss,_t]=ee.useState(""),[mt,Bs]=ee.useState(null),[Qa,ra]=ee.useState(!1),[Bt,di]=ee.useState(""),Vt=ee.useRef(null),qt=ee.useRef(null),rs=ee.useRef(null),qn=ee.useRef(null),Xi=ee.useRef(null),Ji=ee.useRef(null),Wi=ee.useRef(null),Mn=ee.useRef(null),{settings:$,messages:Pt,documents:vt,strategies:Hn,sessions:mi,roomMessages:as}=i;ee.useEffect(()=>{up(i)},[i]),ee.useEffect(()=>{$.aiProvider==="claude"&&$.claudeApiKey&&(Vt.current=new PR($.claudeApiKey,$.claudeModel)),$.geminiApiKey&&(qt.current=new jR($.geminiApiKey))},[$.aiProvider,$.claudeApiKey,$.claudeModel,$.geminiApiKey]),ee.useEffect(()=>{const I=Dx();I==="success"?Ct.success("Backup erfolgreich wiederhergestellt!",{duration:3e3}):I==="failed"&&Ct.error("Backup-Wiederherstellung fehlgeschlagen",{duration:3e3})},[]),ee.useEffect(()=>{(async()=>{const Z=await tO();if(Z){Bs(Z);const de=await sO(Z);de&&e(_e=>({..._e,...de,settings:{..._e.settings,...de.settings}}))}})()},[]),ee.useEffect(()=>(se&&Ie!==null&&Ie>0&&(Wi.current=setInterval(()=>{R(I=>I!==null&&I>0?I-1:I)},6e4)),()=>{Wi.current&&clearInterval(Wi.current)}),[se,Ie]),ee.useEffect(()=>(Nn&&$.emotionTrackingEnabled&&Vt.current&&(Ji.current=setInterval(async()=>{const I=await gi();I&&(fi(I),e(Z=>({...Z,emotionHistory:[I,...Z.emotionHistory].slice(0,1e3)})))},500)),()=>{Ji.current&&clearInterval(Ji.current)}),[Nn,$.emotionTrackingEnabled]);const pe=ee.useCallback((I,Z="success")=>{Z==="success"?Ct.success(I):Z==="error"?Ct.error(I):Ct(I,{icon:""})},[]),bt=ee.useCallback(I=>{e(Z=>({...Z,settings:{...Z.settings,...I}}))},[]),Nt=ee.useCallback((I,Z)=>Z===BR||Z===iO?!0:I==="paar"?!$.paarRoomPassword||Z===$.paarRoomPassword:I==="tom"?Z===$.user1Password:I==="lisa"?Z===$.user2Password:!1,[$]),wn=ee.useCallback(I=>{if(I==="assessment"){r("assessment"),u("rooms");return}if(I==="paar"&&!$.paarRoomPassword){r("paar"),u("rooms");return}if(I==="tom"&&!$.user1Password){pe("Tom hat noch kein Assessment durchgefhrt","warning");return}if(I==="lisa"&&!$.user2Password){pe("Lisa hat noch kein Assessment durchgefhrt","warning");return}x(I),D(""),C(!0)},[$,pe]),Fn=ee.useCallback(()=>{if(P)if(Nt(P,V))r(P),u("rooms"),C(!1),x(null),D("");else{if(P!=="paar"&&V.trim()){const I={id:crypto.randomUUID(),from:n||"paar",to:P,content:V,timestamp:Date.now(),isRead:!1};e(Z=>({...Z,roomMessages:[...Z.roomMessages,I]})),pe(`Nachricht an ${P==="tom"?$.user1Name:$.user2Name} gesendet`,"success")}else pe("Falsches Passwort","error");C(!1),x(null),D("")}},[P,V,Nt,n,$,pe]),Gn=ee.useCallback(()=>{if(!n||n==="assessment")return;const I=Px(n,je,ve,n==="paar"?[$.user1Name,$.user2Name]:[n==="tom"?$.user1Name:$.user2Name]);fe(I),R(je),e(Z=>({...Z,sessions:[...Z.sessions,I]})),pe(`Sitzung gestartet: ${je} Minuten`,"success")},[n,je,ve,$,pe]),hl=ee.useCallback(()=>{if(!se||!n)return;const I=Pt[n]?.length||0,Z=jx(se,I);e(de=>({...de,sessions:de.sessions.map(_e=>_e.id===Z.id?Z:_e)})),fe(null),R(null),pe("Sitzung beendet","success")},[se,n,Pt,pe]),aa=ee.useCallback(async()=>{if(!f.trim()||!n||n==="assessment")return;if(!Vt.current&&!qt.current){pe("Bitte API-Key in Einstellungen eingeben","error");return}const I={id:crypto.randomUUID(),role:"user",content:f.trim(),timestamp:Date.now(),speaker:n==="paar"?M:void 0};e(Z=>({...Z,messages:Jv(Z.messages,n,I)})),m(""),y(!0);try{const Z=Hn.filter(Et=>n==="paar"||Et.person===n).map(Et=>Et.content),de=vt.filter(Et=>!Et.isArchived).map(Et=>`[${Et.title}]
${Et.content}`),_e=kR(n,$.therapySchool,$.user1Name,$.user2Name,Z,de,n==="paar"?M:void 0,se?{remaining:Ie||0,total:se.duration,goal:se.goal||""}:void 0,Cn||void 0),ke=[...Pt[n]||[],I];let pt="";if($.aiProvider==="claude"&&Vt.current){for await(const Et of Vt.current.streamText(_e,ke))if(pt+=Et,$.ttsEnabled&&qt.current){const Sn=pt.split(new RegExp("(?<=[.!?\\n])"));if(Sn.length>1){const sr=Sn.slice(0,-1).join("");sr.trim()&&(Dn(sr),pt=Sn[Sn.length-1])}}$.ttsEnabled&&pt.trim()&&qt.current&&Dn(pt)}else qt.current&&(pt=await qt.current.generateText(_e,ke),$.ttsEnabled&&Dn(pt));const gt=LR(pt),kn=UR(pt);oe(gt);const nr={id:crypto.randomUUID(),role:"assistant",content:kn,timestamp:Date.now(),emotion:gt};e(Et=>({...Et,messages:Jv(Et.messages,n,nr)}))}catch(Z){console.error("AI error:",Z),pe("Fehler bei der KI-Antwort","error")}finally{y(!1)}},[f,n,M,$,Pt,Hn,vt,se,Ie,Cn,pe]),Dn=ee.useCallback(async I=>{if(!$.ttsEnabled||!qt.current)return;const Z=n==="paar"?$.voicePaar:n==="tom"?$.voiceTom:n==="lisa"?$.voiceLisa:$.voicePaar;try{const de=await qt.current.generateTTS(I,Z);if(!de)return;if(KE){const kn=btoa(String.fromCharCode(...de));new Audio(`data:audio/wav;base64,${kn}`).play().catch(Et=>console.error("iOS audio play error:",Et));return}rs.current||(rs.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}));const _e=rs.current;_e.state==="suspended"&&await _e.resume();const ke=_e.createBuffer(1,de.length,24e3),pt=ke.getChannelData(0);for(let kn=0;kn<de.length;kn++)pt[kn]=(de[kn]-128)/128;const gt=_e.createBufferSource();gt.buffer=ke,gt.connect(_e.destination),gt.start()}catch(de){console.error("TTS error:",de)}},[$,n]),pi=ee.useCallback(()=>{if(T)Mn.current?.stop(),S(!1);else if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){const I=window.SpeechRecognition||window.webkitSpeechRecognition,Z=new I;Z.lang="de-DE",Z.continuous=!0,Z.interimResults=!0,Z.onresult=de=>{let _e="";for(let ke=de.resultIndex;ke<de.results.length;ke++)_e+=de.results[ke][0].transcript;m(ke=>ke+_e)},Z.onerror=de=>{console.error("Speech recognition error:",de.error),S(!1)},Z.onend=()=>{T&&Z.start()},Mn.current=Z,Z.start(),S(!0)}else pe("Spracherkennung nicht untersttzt","error")},[T,pe]),fl=ee.useCallback(async()=>{if(Nn)qn.current?.srcObject&&(qn.current.srcObject.getTracks().forEach(Z=>Z.stop()),qn.current.srcObject=null),hi(!1),fi(null);else try{const I=await navigator.mediaDevices.getUserMedia({video:!0});qn.current&&(qn.current.srcObject=I,qn.current.play()),hi(!0),pe("Kamera aktiviert - Emotion-Tracking luft","success")}catch(I){console.error("Camera error:",I),pe("Kamera-Zugriff verweigert","error")}},[Nn,pe]),gi=ee.useCallback(async()=>{if(!qn.current||!Xi.current||!Vt.current)return null;const I=qn.current,Z=Xi.current,de=Z.getContext("2d");if(!de)return null;Z.width=I.videoWidth,Z.height=I.videoHeight,de.drawImage(I,0,0);const _e=Z.toDataURL("image/jpeg",.8).split(",")[1],ke=zR($.user1Name,$.user2Name);return Vt.current.analyzeImage(_e,ke)},[$.user1Name,$.user2Name]),Zi=ee.useCallback(async I=>{if(!Vt.current&&!qt.current){pe("Bitte API-Key in Einstellungen eingeben","error");return}re(I),ae(!0);try{const Z=I==="tom"?$.user1Name:$.user2Name,de=OR(I,Z);let _e="";$.aiProvider==="claude"&&Vt.current?_e=await Vt.current.generateText(de,[]):qt.current&&(_e=await qt.current.generateText(de,[]));const ke=_e.match(/\[[\s\S]*\]/);if(ke){const pt=JSON.parse(ke[0]);Le(pt),Rt(!0)}else throw new Error("Invalid response format")}catch(Z){console.error("Assessment error:",Z),pe("Fehler beim Generieren der Fragen","error")}finally{ae(!1)}},[$,pe]),oa=ee.useCallback(async()=>{if(!K||!Vt.current&&!qt.current)return;if(Object.keys(Ue).length<me.length){pe(`Bitte alle ${me.length} Fragen beantworten`,"warning");return}Se(!0);try{const Z=K==="tom"?$.user1Name:$.user2Name,de=VR(Z,me,Ue);let _e="";$.aiProvider==="claude"&&Vt.current?_e=await Vt.current.generateText(de,[],{maxTokens:8192}):qt.current&&(_e=await qt.current.generateText(de,[])),ze(!0),dt(""),window.__pendingStrategy={content:_e,person:K,questions:me,answers:Ue}}catch(Z){console.error("Strategy error:",Z),pe("Fehler beim Generieren der Strategie","error"),Se(!1)}},[K,me,Ue,$,pe]),qs=ee.useCallback(()=>{if(!ft||ft.length<4){pe("Passwort muss mindestens 4 Zeichen haben","error");return}const I=window.__pendingStrategy;if(!I||!K)return;bt(K==="tom"?{user1Password:ft}:{user2Password:ft});const Z=Hn.filter(_e=>_e.person===K).length,de={id:crypto.randomUUID(),title:`${K==="tom"?$.user1Name:$.user2Name} - Strategie #${Z+1}`,content:I.content,type:"strategy",person:K,assessmentNumber:Z+1,questions:I.questions,answers:I.answers,createdAt:Date.now(),updatedAt:Date.now()};e(_e=>({..._e,strategies:[..._e.strategies,de]})),ze(!1),Se(!1),Rt(!1),re(null),Le([]),O({}),delete window.__pendingStrategy,pe("Assessment abgeschlossen! Strategie gespeichert.","success")},[ft,K,Hn,$,bt,pe]),As=ee.useCallback(()=>{if(!In.trim()){pe("Titel erforderlich","error");return}if(Tn)e(I=>({...I,documents:I.documents.map(Z=>Z.id===Tn.id?{...Z,title:In,content:Ss,updatedAt:Date.now()}:Z)}));else{const I={id:crypto.randomUUID(),title:In,content:Ss,type:"note",createdAt:Date.now(),updatedAt:Date.now()};e(Z=>({...Z,documents:[...Z.documents,I]}))}zs(null),ws(""),_t(""),pe("Dokument gespeichert","success")},[In,Ss,Tn,pe]),Ya=ee.useCallback(I=>{confirm("Dokument wirklich lschen?")&&(e(Z=>({...Z,documents:Z.documents.filter(de=>de.id!==I)})),pe("Dokument gelscht","success"))},[pe]),Kn=ee.useCallback(async()=>{if(!n||!Vt.current)return;const I=Pt[n]||[];if(I.length===0){pe("Keine Nachrichten zum Zusammenfassen","warning");return}y(!0);try{const Z=`Erstelle eine Zusammenfassung dieser Therapie-Sitzung:

${I.map(ke=>`${ke.role==="user"?ke.speaker==="tom"?$.user1Name:ke.speaker==="lisa"?$.user2Name:"User":"AGNES"}: ${ke.content}`).join(`

`)}

Format:
1. Hauptthemen
2. Wichtige Erkenntnisse
3. Emotionale Highlights
4. Empfehlungen fr nchste Sitzung`,de=await Vt.current.generateText(Z,[]),_e={id:crypto.randomUUID(),title:`Sitzung ${new Date().toLocaleDateString("de-DE")} - ${n==="paar"?"Paar-Raum":n==="tom"?$.user1Name:$.user2Name}`,content:de,type:"summary",person:n==="paar"?"both":n,createdAt:Date.now(),updatedAt:Date.now()};e(ke=>({...ke,documents:[...ke.documents,_e]})),pe("Zusammenfassung erstellt","success")}catch(Z){console.error("Summary error:",Z),pe("Fehler bei der Zusammenfassung","error")}finally{y(!1)}},[n,Pt,$,pe]),$n=ee.useCallback(()=>{const I=n1(i),Z=new Blob([I],{type:"application/json"}),de=URL.createObjectURL(Z),_e=document.createElement("a");_e.href=de,_e.download=`imago-voice-backup-${new Date().toISOString().split("T")[0]}.json`,_e.click(),URL.revokeObjectURL(de),pe("Backup heruntergeladen","success")},[i,pe]),Dt=ee.useCallback(()=>{const I=kx(i);navigator.clipboard.writeText(I),pe("Backup-Code in Zwischenablage kopiert","success")},[i,pe]),Ht=ee.useCallback(()=>{const I=Xv(Bt);I?(up(I),Yv(),window.location.reload()):pe("Ungltiges Backup-Format","error")},[Bt,pe]),os=ee.useCallback(I=>{const Z=I.target.files?.[0];if(!Z)return;const de=new FileReader;de.onload=_e=>{const ke=_e.target?.result,pt=Xv(ke);pt?(up(pt),Yv(),window.location.reload()):pe("Ungltige Backup-Datei","error")},de.readAsText(Z)},[pe]),er=ee.useCallback(async()=>{if(!mt){pe("Firebase nicht verbunden","error");return}ra(!0);try{await nO(mt,i),pe("Mit Cloud synchronisiert","success")}catch{pe("Sync fehlgeschlagen","error")}finally{ra(!1)}},[mt,i,pe]),dl=ee.useCallback(()=>{!n||n==="assessment"||confirm("Alle Nachrichten in diesem Raum lschen?")&&(e(I=>({...I,messages:Vx(I.messages,n)})),pe("Raum geleert","success"))},[n,pe]),yi=I=>{const Z=Lx(as,I);return Z===0?null:b.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:Z})},tr=I=>{const Z=Math.floor(I/60),de=I%60;return Z>0?`${Z}h ${de}m`:`${de}m`};return b.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-rose-50",children:[b.jsx(O2,{position:"top-center"}),b.jsx("video",{ref:qn,className:"hidden"}),b.jsx("canvas",{ref:Xi,className:"hidden"}),b.jsxs("div",{className:"flex h-screen",children:[b.jsxs("div",{className:"hidden md:flex w-64 bg-white/80 backdrop-blur border-r border-amber-200 flex-col",children:[b.jsxs("div",{className:"p-4 sm:p-6 border-b border-amber-200",children:[b.jsx("h1",{className:"font-serif text-xl sm:text-2xl font-bold text-amber-900",children:"IMAGO VOICE"}),b.jsx("p",{className:"text-xs sm:text-sm text-amber-600",children:"Intelligente Paartherapie"})]}),b.jsxs("nav",{className:"flex-1 p-3 sm:p-4 space-y-2",children:[b.jsxs("button",{onClick:()=>{r(null),u("rooms")},className:`w-full flex items-center gap-3 px-3 sm:px-4 py-2 sm:py-3 rounded-xl transition ${o==="rooms"&&!n?"bg-amber-100 text-amber-900":"text-amber-700 hover:bg-amber-50"}`,children:[b.jsx(Gv,{size:18,className:"sm:w-5 sm:h-5"}),b.jsx("span",{className:"text-sm sm:text-base",children:"bersicht"})]}),["paar","tom","lisa"].map(I=>b.jsxs("button",{onClick:()=>wn(I),className:`w-full flex items-center gap-3 px-3 sm:px-4 py-2 sm:py-3 rounded-xl transition relative ${n===I?"bg-amber-100 text-amber-900":"text-amber-700 hover:bg-amber-50"}`,children:[I==="paar"?b.jsx(Qv,{size:18,className:"sm:w-5 sm:h-5"}):b.jsx(cu,{size:18,className:"sm:w-5 sm:h-5"}),b.jsx("span",{className:"text-sm sm:text-base",children:I==="paar"?"Paar-Raum":I==="tom"?$.user1Name:$.user2Name}),I!=="paar"&&b.jsx(Dh,{size:12,className:"ml-auto opacity-50"}),yi(I)]},I)),b.jsxs("button",{onClick:()=>{r("assessment"),u("rooms")},className:`w-full flex items-center gap-3 px-3 sm:px-4 py-2 sm:py-3 rounded-xl transition ${n==="assessment"?"bg-amber-100 text-amber-900":"text-amber-700 hover:bg-amber-50"}`,children:[b.jsx(lp,{size:18,className:"sm:w-5 sm:h-5"}),b.jsx("span",{className:"text-sm sm:text-base",children:"Assessment"})]}),b.jsx("hr",{className:"border-amber-200 my-3 sm:my-4"}),b.jsxs("button",{onClick:()=>u("documents"),className:`w-full flex items-center gap-3 px-3 sm:px-4 py-2 sm:py-3 rounded-xl transition ${o==="documents"?"bg-amber-100 text-amber-900":"text-amber-700 hover:bg-amber-50"}`,children:[b.jsx(Fv,{size:18,className:"sm:w-5 sm:h-5"}),b.jsx("span",{className:"text-sm sm:text-base",children:"Dokumente"})]}),b.jsxs("button",{onClick:()=>u("history"),className:`w-full flex items-center gap-3 px-3 sm:px-4 py-2 sm:py-3 rounded-xl transition ${o==="history"?"bg-amber-100 text-amber-900":"text-amber-700 hover:bg-amber-50"}`,children:[b.jsx(tx,{size:18,className:"sm:w-5 sm:h-5"}),b.jsx("span",{className:"text-sm sm:text-base",children:"Verlauf"})]}),b.jsxs("button",{onClick:()=>u("messages"),className:`w-full flex items-center gap-3 px-3 sm:px-4 py-2 sm:py-3 rounded-xl transition relative ${o==="messages"?"bg-amber-100 text-amber-900":"text-amber-700 hover:bg-amber-50"}`,children:[b.jsx(Kv,{size:18,className:"sm:w-5 sm:h-5"}),b.jsx("span",{className:"text-sm sm:text-base",children:"Nachrichten"}),as.filter(I=>!I.isRead).length>0&&b.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:as.filter(I=>!I.isRead).length})]}),b.jsxs("button",{onClick:()=>u("backup"),className:`w-full flex items-center gap-3 px-3 sm:px-4 py-2 sm:py-3 rounded-xl transition ${o==="backup"?"bg-amber-100 text-amber-900":"text-amber-700 hover:bg-amber-50"}`,children:[b.jsx(qv,{size:18,className:"sm:w-5 sm:h-5"}),b.jsx("span",{className:"text-sm sm:text-base",children:"Backup"})]}),b.jsxs("button",{onClick:()=>u("settings"),className:`w-full flex items-center gap-3 px-3 sm:px-4 py-2 sm:py-3 rounded-xl transition ${o==="settings"?"bg-amber-100 text-amber-900":"text-amber-700 hover:bg-amber-50"}`,children:[b.jsx($v,{size:18,className:"sm:w-5 sm:h-5"}),b.jsx("span",{className:"text-sm sm:text-base",children:"Einstellungen"})]})]})]}),b.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[b.jsxs("div",{className:"md:hidden bg-white/80 backdrop-blur border-b border-amber-200 px-4 py-3 flex items-center justify-between",children:[b.jsx("h1",{className:"font-serif text-lg font-bold text-amber-900",children:"IMAGO VOICE"}),Ie!==null&&b.jsxs("div",{className:"flex items-center gap-2 text-red-600 font-mono text-sm",children:[b.jsx(Bv,{size:14}),"t- ",tr(Ie)]})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o==="rooms"&&!n&&b.jsx("div",{className:"p-4 sm:p-6 md:p-8",children:b.jsxs("div",{className:"max-w-4xl mx-auto",children:[b.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[b.jsx("h1",{className:"font-serif text-2xl sm:text-3xl md:text-4xl font-bold text-amber-900 mb-2",children:"IMAGO VOICE"}),b.jsx("p",{className:"text-amber-600 text-sm sm:text-base",children:"Intelligente Paartherapie-Plattform"})]}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[b.jsxs("button",{onClick:()=>wn("paar"),className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition border-2 border-amber-200 relative",children:[b.jsx(Qv,{className:"w-8 h-8 sm:w-10 sm:h-10 mx-auto mb-3 text-amber-600"}),b.jsx("h2",{className:"font-serif text-lg sm:text-xl font-bold text-amber-900 mb-1",children:"Paar-Raum"}),b.jsxs("p",{className:"text-xs sm:text-sm text-amber-600",children:["Gemeinsamer Therapieraum fr ",$.user1Name," & ",$.user2Name]}),yi("paar")]}),b.jsxs("button",{onClick:()=>wn("tom"),className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition border-2 border-sky-200 relative",children:[b.jsx("div",{className:"absolute top-3 right-3",children:b.jsx(Dh,{size:14,className:"text-sky-400"})}),b.jsx(cu,{className:"w-8 h-8 sm:w-10 sm:h-10 mx-auto mb-3 text-sky-600"}),b.jsx("h2",{className:"font-serif text-lg sm:text-xl font-bold text-sky-900 mb-1",children:$.user1Name}),b.jsx("p",{className:"text-xs sm:text-sm text-sky-600",children:"Persnlicher Einzelraum"}),yi("tom")]}),b.jsxs("button",{onClick:()=>wn("lisa"),className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition border-2 border-rose-200 relative",children:[b.jsx("div",{className:"absolute top-3 right-3",children:b.jsx(Dh,{size:14,className:"text-rose-400"})}),b.jsx(cu,{className:"w-8 h-8 sm:w-10 sm:h-10 mx-auto mb-3 text-rose-600"}),b.jsx("h2",{className:"font-serif text-lg sm:text-xl font-bold text-rose-900 mb-1",children:$.user2Name}),b.jsx("p",{className:"text-xs sm:text-sm text-rose-600",children:"Persnlicher Einzelraum"}),yi("lisa")]}),b.jsxs("button",{onClick:()=>{r("assessment"),u("rooms")},className:"bg-white rounded-2xl p-4 sm:p-6 shadow-lg hover:shadow-xl transition border-2 border-purple-200",children:[b.jsx(lp,{className:"w-8 h-8 sm:w-10 sm:h-10 mx-auto mb-3 text-purple-600"}),b.jsx("h2",{className:"font-serif text-lg sm:text-xl font-bold text-purple-900 mb-1",children:"Assessment Center"}),b.jsx("p",{className:"text-xs sm:text-sm text-purple-600",children:"Psychologische Konfiguration"})]})]})]})}),n&&n!=="assessment"&&b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsxs("div",{className:"bg-white/80 backdrop-blur border-b border-amber-200 px-4 py-3 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("button",{onClick:()=>{r(null),u("rooms")},className:"p-2 hover:bg-amber-100 rounded-lg",children:b.jsx($2,{size:20,className:"rotate-180 text-amber-600"})}),b.jsxs("div",{children:[b.jsx("h2",{className:"font-serif text-lg sm:text-xl font-bold text-amber-900",children:n==="paar"?"Paar-Raum":n==="tom"?$.user1Name:$.user2Name}),se&&b.jsxs("p",{className:"text-xs text-amber-600",children:["Ziel: ",se.goal]})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[$.cameraEnabled&&b.jsx("button",{onClick:fl,className:`p-2 rounded-lg transition ${Nn?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Nn?b.jsx(H2,{size:18}):b.jsx(B2,{size:18})}),Ie!==null&&b.jsxs("div",{className:"hidden sm:flex items-center gap-1 text-red-600 font-mono text-sm bg-red-50 px-3 py-1 rounded-lg",children:[b.jsx(Bv,{size:14}),"t- ",tr(Ie)]}),se?b.jsx("button",{onClick:hl,className:"bg-red-600 text-white px-3 py-1.5 rounded-lg text-sm hover:bg-red-700",children:"Beenden"}):b.jsx("button",{onClick:()=>document.getElementById("sessionModal")?.classList.remove("hidden"),className:"bg-amber-600 text-white px-3 py-1.5 rounded-lg text-sm hover:bg-amber-700",children:"Sitzung starten"})]})]}),Cn&&b.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-b border-purple-200 px-4 py-2 flex items-center justify-center gap-4 text-sm",children:[Cn.tom&&b.jsxs("span",{className:"bg-sky-100 text-sky-800 px-2 py-1 rounded",children:[$.user1Name,": ",Cn.tom.emotion]}),Cn.lisa&&b.jsxs("span",{className:"bg-rose-100 text-rose-800 px-2 py-1 rounded",children:[$.user2Name,": ",Cn.lisa.emotion]})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[Pt[n]?.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-amber-400",children:[b.jsx("span",{className:"text-5xl mb-3",children:Mp[ne]}),b.jsx("p",{className:"font-serif text-lg",children:"Raum ist bereit..."})]}):Pt[n]?.map(I=>b.jsx("div",{className:`flex ${I.role==="user"?"justify-end":"justify-start"}`,children:b.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${I.role==="user"?I.speaker==="tom"?"bg-sky-100 text-sky-900":I.speaker==="lisa"?"bg-rose-100 text-rose-900":"bg-amber-100 text-amber-900":"bg-white shadow text-amber-900"}`,children:[I.role==="user"&&I.speaker&&n==="paar"&&b.jsx("span",{className:`text-xs font-bold mb-1 block ${I.speaker==="tom"?"text-sky-600":"text-rose-600"}`,children:I.speaker==="tom"?$.user1Name:$.user2Name}),I.role==="assistant"&&b.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[b.jsx("span",{className:"text-lg",children:Mp[I.emotion||"neutral"]}),b.jsx("span",{className:"text-xs font-bold text-amber-600",children:"AGNES"})]}),b.jsx("p",{className:"text-sm sm:text-base whitespace-pre-wrap",children:I.content})]})},I.id)),g&&b.jsx("div",{className:"flex justify-start",children:b.jsx("div",{className:"bg-white shadow rounded-2xl px-4 py-3",children:b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"text-lg animate-pulse",children:Mp[ne]}),b.jsx("span",{className:"text-amber-600",children:"tippt..."})]})})})]}),n==="paar"&&b.jsxs("div",{className:"bg-white/80 border-t border-b border-amber-200 px-4 py-2 flex items-center justify-center gap-2",children:[b.jsx("span",{className:"text-xs text-amber-600 mr-2",children:"Wer spricht?"}),b.jsx("button",{onClick:()=>L("tom"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${M==="tom"?"bg-sky-500 text-white":"bg-sky-100 text-sky-700 hover:bg-sky-200"}`,children:$.user1Name}),b.jsx("button",{onClick:()=>L("lisa"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${M==="lisa"?"bg-rose-500 text-white":"bg-rose-100 text-rose-700 hover:bg-rose-200"}`,children:$.user2Name})]}),b.jsxs("div",{className:"bg-white border-t border-amber-200 p-3 sm:p-4",children:[b.jsxs("div",{className:"max-w-4xl mx-auto flex gap-2",children:[b.jsx("textarea",{value:f,onChange:I=>m(I.target.value),onKeyDown:I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),aa())},placeholder:"Gedanken teilen...",disabled:g,rows:2,className:"flex-1 px-4 py-2.5 border border-amber-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 resize-none text-sm sm:text-base"}),b.jsx("button",{onClick:pi,className:`p-2.5 rounded-xl transition ${T?"bg-red-600 text-white animate-pulse":"bg-amber-100 text-amber-700 hover:bg-amber-200"}`,children:T?b.jsx(ax,{size:20}):b.jsx(lx,{size:20})}),b.jsx("button",{onClick:aa,disabled:g||!f.trim(),className:"px-4 py-2.5 bg-amber-600 text-white rounded-xl hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed",children:b.jsx(_x,{size:20})})]}),b.jsxs("div",{className:"max-w-4xl mx-auto mt-2 flex gap-2 flex-wrap",children:[b.jsx("button",{onClick:Kn,disabled:g,className:"text-xs px-3 py-1.5 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 disabled:opacity-50",children:" Zusammenfassung"}),b.jsx("button",{onClick:dl,className:"text-xs px-3 py-1.5 bg-red-100 text-red-700 rounded-lg hover:bg-red-200",children:" Raum leeren"})]})]})]}),n==="assessment"&&!ht&&b.jsx("div",{className:"p-4 sm:p-6 md:p-8",children:b.jsxs("div",{className:"max-w-2xl mx-auto",children:[b.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[b.jsx(lp,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 text-purple-600"}),b.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-purple-900 mb-2",children:"Assessment Center"}),b.jsx("p",{className:"text-purple-600 text-sm sm:text-base",children:"Wer mchte ein psychologisches Assessment durchfhren?"})]}),X?b.jsxs("div",{className:"text-center py-8",children:[b.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full mx-auto mb-4"}),b.jsx("p",{className:"text-purple-600",children:"Generiere Fragebogen..."})]}):b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("button",{onClick:()=>Zi("tom"),className:"bg-sky-100 border-2 border-sky-300 rounded-2xl p-4 sm:p-6 hover:shadow-lg transition",children:[b.jsx(cu,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 text-sky-600"}),b.jsx("h3",{className:"font-serif text-lg sm:text-xl font-bold text-sky-900",children:$.user1Name}),b.jsxs("p",{className:"text-xs sm:text-sm text-sky-600 mt-1",children:["Strategie #",Hn.filter(I=>I.person==="tom").length+1]})]}),b.jsxs("button",{onClick:()=>Zi("lisa"),className:"bg-rose-100 border-2 border-rose-300 rounded-2xl p-4 sm:p-6 hover:shadow-lg transition",children:[b.jsx(cu,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 text-rose-600"}),b.jsx("h3",{className:"font-serif text-lg sm:text-xl font-bold text-rose-900",children:$.user2Name}),b.jsxs("p",{className:"text-xs sm:text-sm text-rose-600 mt-1",children:["Strategie #",Hn.filter(I=>I.person==="lisa").length+1]})]})]}),b.jsx("button",{onClick:()=>{r(null),u("rooms")},className:"mt-6 w-full py-2 text-purple-600 hover:text-purple-800",children:" Zurck zur bersicht"})]})}),n==="assessment"&&ht&&K&&b.jsx("div",{className:"p-4 sm:p-6 md:p-8",children:b.jsxs("div",{className:"max-w-3xl mx-auto",children:[b.jsxs("h2",{className:"font-serif text-xl sm:text-2xl font-bold text-purple-900 mb-2",children:["Assessment: ",K==="tom"?$.user1Name:$.user2Name]}),b.jsxs("p",{className:"text-purple-600 text-sm mb-6",children:["Beantworte alle ",me.length," Fragen ehrlich."]}),b.jsx("div",{className:"space-y-6",children:me.map((I,Z)=>b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[b.jsxs("p",{className:"font-medium text-purple-900 mb-3",children:[Z+1,". ",I.question]}),b.jsx("div",{className:"space-y-2",children:I.options.map((de,_e)=>b.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition ${Ue[I.id]===String(_e)?"bg-purple-100 border-2 border-purple-400":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}`,children:[b.jsx("input",{type:"radio",name:I.id,value:_e,checked:Ue[I.id]===String(_e),onChange:()=>O(ke=>({...ke,[I.id]:String(_e)})),className:"w-4 h-4 text-purple-600"}),b.jsx("span",{className:"text-sm text-gray-700",children:de})]},_e))})]},I.id))}),b.jsxs("div",{className:"mt-6 flex gap-4",children:[b.jsx("button",{onClick:()=>{Rt(!1),re(null),Le([]),O({})},className:"flex-1 py-3 text-purple-600 border border-purple-300 rounded-xl hover:bg-purple-50",children:"Abbrechen"}),b.jsx("button",{onClick:oa,disabled:le||Object.keys(Ue).length<me.length,className:"flex-1 py-3 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:opacity-50",children:le?"Generiere Strategie...":"Assessment abschlieen"})]})]})}),o==="documents"&&b.jsx("div",{className:"p-4 sm:p-6 md:p-8",children:b.jsxs("div",{className:"max-w-4xl mx-auto",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-amber-900",children:"Dokumente"}),b.jsxs("button",{onClick:()=>{zs(null),ws(""),_t("")},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 flex items-center gap-2",children:[b.jsx(fx,{size:18})," Neu"]})]}),(Tn||In||Ss)&&b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow mb-6",children:[b.jsx("input",{value:In,onChange:I=>ws(I.target.value),placeholder:"Titel...",className:"w-full text-lg font-bold mb-3 p-2 border-b border-amber-200 focus:outline-none focus:border-amber-400"}),b.jsx("textarea",{value:Ss,onChange:I=>_t(I.target.value),placeholder:"Inhalt...",rows:10,className:"w-full p-2 border border-amber-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-400 resize-none"}),b.jsxs("div",{className:"flex gap-2 mt-3",children:[b.jsxs("button",{onClick:As,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[b.jsx(gx,{size:16})," Speichern"]}),b.jsx("button",{onClick:()=>{zs(null),ws(""),_t("")},className:"px-4 py-2 text-amber-600 hover:text-amber-800",children:"Abbrechen"})]})]}),b.jsxs("div",{className:"space-y-3",children:[[...vt,...Hn].sort((I,Z)=>Z.updatedAt-I.updatedAt).map(I=>b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow flex items-center justify-between",children:[b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${I.type==="strategy"?"bg-purple-100 text-purple-700":I.type==="summary"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:I.type==="strategy"?"Strategie":I.type==="summary"?"Zusammenfassung":"Notiz"}),b.jsx("h3",{className:"font-medium text-amber-900 truncate",children:I.title})]}),b.jsx("p",{className:"text-xs text-amber-600 mt-1",children:new Date(I.updatedAt).toLocaleDateString("de-DE")})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>{zs(I),ws(I.title),_t(I.content)},className:"p-2 text-amber-600 hover:bg-amber-100 rounded-lg",children:b.jsx(cx,{size:16})}),b.jsx("button",{onClick:()=>Ya(I.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg",children:b.jsx(Tx,{size:16})})]})]},I.id)),vt.length===0&&Hn.length===0&&b.jsx("p",{className:"text-center text-amber-600 py-8",children:"Noch keine Dokumente vorhanden"})]})]})}),o==="history"&&b.jsx("div",{className:"p-4 sm:p-6 md:p-8",children:b.jsxs("div",{className:"max-w-4xl mx-auto",children:[b.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-amber-900 mb-6",children:"Sitzungsverlauf"}),b.jsxs("div",{className:"space-y-3",children:[mi.sort((I,Z)=>Z.startTime-I.startTime).map(I=>b.jsx("div",{className:"bg-white rounded-xl p-4 shadow",children:b.jsxs("div",{className:"flex justify-between items-start",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"font-medium text-amber-900",children:I.room==="paar"?"Paar-Raum":I.room==="tom"?$.user1Name:$.user2Name}),b.jsx("p",{className:"text-xs text-amber-600",children:new Date(I.startTime).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),I.goal&&b.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:["Ziel: ",I.goal]})]}),b.jsxs("div",{className:"text-right",children:[b.jsxs("span",{className:"text-sm text-amber-600",children:[I.messageCount," Nachrichten"]}),b.jsx("p",{className:"text-xs text-amber-500",children:tr(I.duration)})]})]})},I.id)),mi.length===0&&b.jsx("p",{className:"text-center text-amber-600 py-8",children:"Noch keine Sitzungen"})]})]})}),o==="messages"&&b.jsx("div",{className:"p-4 sm:p-6 md:p-8",children:b.jsxs("div",{className:"max-w-4xl mx-auto",children:[b.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-amber-900 mb-6",children:"Nachrichten"}),b.jsxs("div",{className:"space-y-3",children:[as.sort((I,Z)=>Z.timestamp-I.timestamp).map(I=>b.jsxs("div",{className:`bg-white rounded-xl p-4 shadow ${I.isRead?"":"border-l-4 border-amber-500"}`,children:[b.jsxs("div",{className:"flex justify-between items-start",children:[b.jsxs("div",{children:[b.jsxs("p",{className:"text-xs text-amber-600",children:["Von: ",I.from==="paar"?"Paar-Raum":I.from==="tom"?$.user1Name:$.user2Name,"  ",I.to==="paar"?"Paar-Raum":I.to==="tom"?$.user1Name:$.user2Name]}),b.jsx("p",{className:"text-amber-900 mt-1",children:I.content})]}),b.jsx("span",{className:"text-xs text-amber-500",children:new Date(I.timestamp).toLocaleString("de-DE")})]}),!I.isRead&&b.jsx("button",{onClick:()=>{e(Z=>({...Z,roomMessages:Z.roomMessages.map(de=>de.id===I.id?{...de,isRead:!0}:de)}))},className:"mt-2 text-xs text-amber-600 hover:text-amber-800",children:"Als gelesen markieren"})]},I.id)),as.length===0&&b.jsx("p",{className:"text-center text-amber-600 py-8",children:"Keine Nachrichten"})]})]})}),o==="backup"&&b.jsx("div",{className:"p-4 sm:p-6 md:p-8",children:b.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[b.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-amber-900",children:"Backup & Sync"}),b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[b.jsx("h3",{className:"font-bold text-amber-900 mb-3",children:"Export"}),b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsxs("button",{onClick:$n,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[b.jsx(Hv,{size:16})," JSON-Datei"]}),b.jsxs("button",{onClick:Dt,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[b.jsx(Hv,{size:16})," Base64-Code"]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[b.jsx("h3",{className:"font-bold text-amber-900 mb-3",children:"Import"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("label",{className:"block",children:[b.jsx("span",{className:"text-sm text-amber-700",children:"JSON-Datei hochladen:"}),b.jsx("input",{type:"file",accept:".json",onChange:os,className:"mt-1 block w-full text-sm text-amber-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-amber-100 file:text-amber-700 hover:file:bg-amber-200"})]}),b.jsxs("div",{children:[b.jsx("span",{className:"text-sm text-amber-700",children:"Oder Base64-Code einfgen:"}),b.jsx("textarea",{value:Bt,onChange:I=>di(I.target.value),placeholder:"Base64-Code hier einfgen...",rows:4,className:"mt-1 w-full p-2 border border-amber-200 rounded-lg text-sm"}),b.jsxs("button",{onClick:Ht,disabled:!Bt.trim(),className:"mt-2 bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 disabled:opacity-50 flex items-center gap-2",children:[b.jsx(Sx,{size:16})," Importieren"]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[b.jsx("h3",{className:"font-bold text-amber-900 mb-3",children:"Cloud-Sync"}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsxs("p",{className:"text-sm text-amber-700",children:["Status: ",mt?" Verbunden":" Nicht verbunden"]}),mt&&b.jsxs("p",{className:"text-xs text-amber-500",children:["ID: ",mt.substring(0,8),"..."]})]}),b.jsxs("button",{onClick:er,disabled:!mt||Qa,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",children:[b.jsx(mx,{size:16,className:Qa?"animate-spin":""}),"Sync"]})]})]})]})}),o==="settings"&&b.jsx("div",{className:"p-4 sm:p-6 md:p-8",children:b.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[b.jsx("h2",{className:"font-serif text-2xl sm:text-3xl font-bold text-amber-900",children:"Einstellungen"}),b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[b.jsx("h3",{className:"font-bold text-amber-900 mb-3",children:"Partner"}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-amber-700",children:"Partner 1"}),b.jsx("input",{value:$.user1Name,onChange:I=>bt({user1Name:I.target.value}),className:"w-full mt-1 p-2 border border-amber-200 rounded-lg"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-amber-700",children:"Partner 2"}),b.jsx("input",{value:$.user2Name,onChange:I=>bt({user2Name:I.target.value}),className:"w-full mt-1 p-2 border border-amber-200 rounded-lg"})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[b.jsx("h3",{className:"font-bold text-amber-900 mb-3",children:"KI Provider"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>bt({aiProvider:"claude"}),className:`flex-1 py-2 rounded-lg ${$.aiProvider==="claude"?"bg-amber-600 text-white":"bg-amber-100 text-amber-700"}`,children:"Claude"}),b.jsx("button",{onClick:()=>bt({aiProvider:"gemini"}),className:`flex-1 py-2 rounded-lg ${$.aiProvider==="gemini"?"bg-amber-600 text-white":"bg-amber-100 text-amber-700"}`,children:"Gemini"})]}),$.aiProvider==="claude"&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-amber-700",children:"Claude API Key"}),b.jsx("input",{type:"password",value:$.claudeApiKey,onChange:I=>bt({claudeApiKey:I.target.value}),placeholder:"sk-ant-... oder agnes3001",className:"w-full mt-1 p-2 border border-amber-200 rounded-lg"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-amber-700",children:"Modell"}),b.jsxs("select",{value:$.claudeModel,onChange:I=>bt({claudeModel:I.target.value}),className:"w-full mt-1 p-2 border border-amber-200 rounded-lg",children:[b.jsx("option",{value:"claude-opus-4-5-20251101",children:"Claude Opus 4.5"}),b.jsx("option",{value:"claude-sonnet-4-5-20250929",children:"Claude Sonnet 4.5"})]})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-amber-700",children:"Gemini API Key (fr TTS)"}),b.jsx("input",{type:"password",value:$.geminiApiKey,onChange:I=>bt({geminiApiKey:I.target.value}),placeholder:"AIza...",className:"w-full mt-1 p-2 border border-amber-200 rounded-lg"})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[b.jsx("h3",{className:"font-bold text-amber-900 mb-3",children:"Sprachausgabe"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("button",{onClick:()=>bt({ttsEnabled:!$.ttsEnabled}),className:`w-full py-2 rounded-lg flex items-center justify-center gap-2 ${$.ttsEnabled?"bg-green-600 text-white":"bg-gray-200 text-gray-700"}`,children:[$.ttsEnabled?b.jsx(Nx,{size:18}):b.jsx(Ix,{size:18}),$.ttsEnabled?"Aktiviert":"Deaktiviert"]}),$.ttsEnabled&&KE&&b.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:b.jsxs("p",{className:"text-xs text-amber-800",children:[" ",b.jsx("strong",{children:"iOS:"})," Sprachausgabe nutzt vereinfachte Wiedergabe (HTMLAudioElement)."]})}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-amber-700",children:"Paar-Raum"}),b.jsxs("select",{value:$.voicePaar,onChange:I=>bt({voicePaar:I.target.value}),className:"w-full mt-1 p-2 border border-amber-200 rounded-lg text-sm",children:[b.jsx("option",{value:"Zephyr",children:"Zephyr (neutral)"}),b.jsx("option",{value:"Puck",children:"Puck (mnnlich)"}),b.jsx("option",{value:"Kore",children:"Kore (weiblich)"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-amber-700",children:$.user1Name}),b.jsxs("select",{value:$.voiceTom,onChange:I=>bt({voiceTom:I.target.value}),className:"w-full mt-1 p-2 border border-amber-200 rounded-lg text-sm",children:[b.jsx("option",{value:"Puck",children:"Puck"}),b.jsx("option",{value:"Zephyr",children:"Zephyr"}),b.jsx("option",{value:"Kore",children:"Kore"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-amber-700",children:$.user2Name}),b.jsxs("select",{value:$.voiceLisa,onChange:I=>bt({voiceLisa:I.target.value}),className:"w-full mt-1 p-2 border border-amber-200 rounded-lg text-sm",children:[b.jsx("option",{value:"Kore",children:"Kore"}),b.jsx("option",{value:"Zephyr",children:"Zephyr"}),b.jsx("option",{value:"Puck",children:"Puck"})]})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[b.jsx("h3",{className:"font-bold text-amber-900 mb-3",children:"Therapeutische Schule"}),b.jsxs("select",{value:$.therapySchool,onChange:I=>bt({therapySchool:I.target.value}),className:"w-full p-2 border border-amber-200 rounded-lg",children:[b.jsx("option",{value:"imago",children:"IMAGO Beziehungstherapie"}),b.jsx("option",{value:"systemisch",children:"Systemische Therapie"}),b.jsx("option",{value:"tantra-awareness",children:"Tantra-Awareness"}),b.jsx("option",{value:"gestalt",children:"Gestalttherapie"}),b.jsx("option",{value:"gottman",children:"Gottman-Methode"}),b.jsx("option",{value:"eft",children:"Emotionsfokussierte Therapie (EFT)"}),b.jsx("option",{value:"cbt",children:"Kognitive Verhaltenstherapie"}),b.jsx("option",{value:"psychodynamisch",children:"Psychodynamische Therapie"}),b.jsx("option",{value:"achtsamkeit",children:"Achtsamkeitsbasierte Therapie"}),b.jsx("option",{value:"loesungsorientiert",children:"Lsungsorientierte Kurzzeittherapie"})]})]}),b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[b.jsx("h3",{className:"font-bold text-amber-900 mb-3",children:"Kamera & Emotion-Tracking"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("span",{className:"text-amber-700",children:"Kamera aktivieren"}),b.jsx("button",{onClick:()=>bt({cameraEnabled:!$.cameraEnabled}),className:`w-12 h-6 rounded-full transition ${$.cameraEnabled?"bg-green-500":"bg-gray-300"}`,children:b.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transition transform ${$.cameraEnabled?"translate-x-6":"translate-x-0.5"}`})})]}),$.cameraEnabled&&b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("span",{className:"text-amber-700",children:"Emotion-Tracking (alle 0.5s)"}),b.jsx("button",{onClick:()=>bt({emotionTrackingEnabled:!$.emotionTrackingEnabled}),className:`w-12 h-6 rounded-full transition ${$.emotionTrackingEnabled?"bg-green-500":"bg-gray-300"}`,children:b.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transition transform ${$.emotionTrackingEnabled?"translate-x-6":"translate-x-0.5"}`})})]}),$.cameraEnabled&&$.emotionTrackingEnabled&&b.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:b.jsxs("p",{className:"text-xs text-purple-800 flex items-start gap-2",children:[b.jsx(Y2,{size:14,className:"mt-0.5 flex-shrink-0"}),"Bilder werden alle 0.5s analysiert fr Echtzeit-Emotionserkennung. Keine Speicherung - nur Live-Analyse."]})})]})]}),b.jsxs("div",{className:"bg-white rounded-xl p-4 shadow",children:[b.jsx("h3",{className:"font-bold text-amber-900 mb-3",children:"Sitzungs-Einstellungen"}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-amber-700",children:"Standard-Dauer (Minuten)"}),b.jsx("input",{type:"number",value:$.defaultSessionDuration,onChange:I=>bt({defaultSessionDuration:parseInt(I.target.value)||45}),min:5,max:120,className:"w-full mt-1 p-2 border border-amber-200 rounded-lg"})]})]}),b.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[b.jsx("h3",{className:"font-bold text-amber-900 mb-2",children:" Passwort-Info"}),b.jsxs("p",{className:"text-sm text-amber-700",children:[b.jsx("strong",{children:"Generalpasswort:"}),' "Dominikanergasse" funktioniert fr alle Rume.']}),b.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Persnliche Passwrter werden beim Assessment erstellt."})]})]})})]}),b.jsxs("div",{className:"md:hidden bg-white border-t border-amber-200 px-2 py-2 flex justify-around",children:[b.jsxs("button",{onClick:()=>{r(null),u("rooms")},className:`flex flex-col items-center p-2 rounded-lg ${o==="rooms"&&!n?"text-amber-600":"text-amber-400"}`,children:[b.jsx(Gv,{size:20}),b.jsx("span",{className:"text-[10px] mt-0.5",children:"Home"})]}),b.jsxs("button",{onClick:()=>u("documents"),className:`flex flex-col items-center p-2 rounded-lg ${o==="documents"?"text-amber-600":"text-amber-400"}`,children:[b.jsx(Fv,{size:20}),b.jsx("span",{className:"text-[10px] mt-0.5",children:"Docs"})]}),b.jsxs("button",{onClick:()=>u("messages"),className:`flex flex-col items-center p-2 rounded-lg relative ${o==="messages"?"text-amber-600":"text-amber-400"}`,children:[b.jsx(Kv,{size:20}),b.jsx("span",{className:"text-[10px] mt-0.5",children:"Chat"}),as.filter(I=>!I.isRead).length>0&&b.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-[8px] rounded-full w-4 h-4 flex items-center justify-center",children:as.filter(I=>!I.isRead).length})]}),b.jsxs("button",{onClick:()=>u("backup"),className:`flex flex-col items-center p-2 rounded-lg ${o==="backup"?"text-amber-600":"text-amber-400"}`,children:[b.jsx(qv,{size:20}),b.jsx("span",{className:"text-[10px] mt-0.5",children:"Sync"})]}),b.jsxs("button",{onClick:()=>u("settings"),className:`flex flex-col items-center p-2 rounded-lg ${o==="settings"?"text-amber-600":"text-amber-400"}`,children:[b.jsx($v,{size:20}),b.jsx("span",{className:"text-[10px] mt-0.5",children:"Setup"})]})]})]})]}),A&&P&&b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white rounded-2xl max-w-sm w-full p-6 shadow-2xl",children:[b.jsxs("div",{className:"text-center mb-4",children:[b.jsx(Dh,{className:"w-10 h-10 mx-auto text-amber-600 mb-2"}),b.jsxs("h3",{className:"text-lg font-bold text-amber-900",children:[P==="tom"?$.user1Name:$.user2Name,"'s Raum"]}),b.jsx("p",{className:"text-sm text-amber-600",children:"Passwort eingeben oder Nachricht hinterlassen"})]}),b.jsx("input",{type:"password",value:V,onChange:I=>D(I.target.value),onKeyDown:I=>I.key==="Enter"&&Fn(),placeholder:"Passwort oder Nachricht...",className:"w-full p-3 border border-amber-200 rounded-xl mb-4",autoFocus:!0}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>{C(!1),x(null)},className:"flex-1 py-2 text-amber-600 hover:bg-amber-50 rounded-xl",children:"Abbrechen"}),b.jsx("button",{onClick:Fn,className:"flex-1 py-2 bg-amber-600 text-white rounded-xl hover:bg-amber-700",children:"Besttigen"})]})]})}),Me&&K&&b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white rounded-2xl max-w-sm w-full p-6 shadow-2xl",children:[b.jsxs("div",{className:"text-center mb-4",children:[b.jsx("div",{className:"text-4xl mb-2",children:""}),b.jsx("h3",{className:"text-lg font-bold text-purple-900",children:"Einzelraum-Passwort erstellen"}),b.jsxs("p",{className:"text-sm text-purple-600",children:["Erstellen Sie ein ",b.jsx("strong",{children:"persnliches Passwort"})," fr"," ",b.jsx("strong",{children:K==="tom"?$.user1Name:$.user2Name}),"'s Einzelraum."]}),b.jsx("p",{className:"text-xs text-purple-500 mt-2",children:'Das Generalpasswort "Dominikanergasse" funktioniert weiterhin.'})]}),b.jsx("input",{type:"password",value:ft,onChange:I=>dt(I.target.value),onKeyDown:I=>I.key==="Enter"&&qs(),placeholder:"Mindestens 4 Zeichen...",className:"w-full p-3 border border-purple-200 rounded-xl mb-4",autoFocus:!0}),b.jsxs("button",{onClick:qs,disabled:ft.length<4,className:"w-full py-3 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[b.jsx(G2,{size:18})," Passwort festlegen"]})]})}),b.jsx("div",{id:"sessionModal",className:"hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white rounded-2xl max-w-sm w-full p-6 shadow-2xl",children:[b.jsx("h3",{className:"text-lg font-bold text-amber-900 mb-4",children:"Neue Sitzung starten"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-amber-700",children:"Dauer (Minuten)"}),b.jsx("input",{type:"number",value:je,onChange:I=>ct(parseInt(I.target.value)||45),min:5,max:120,className:"w-full mt-1 p-2 border border-amber-200 rounded-lg"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-amber-700",children:"Ziel dieser Sitzung"}),b.jsx("textarea",{value:ve,onChange:I=>ye(I.target.value),placeholder:"Was mchtet ihr heute erreichen?",rows:3,className:"w-full mt-1 p-2 border border-amber-200 rounded-lg resize-none"})]})]}),b.jsxs("div",{className:"flex gap-2 mt-4",children:[b.jsx("button",{onClick:()=>document.getElementById("sessionModal")?.classList.add("hidden"),className:"flex-1 py-2 text-amber-600 hover:bg-amber-50 rounded-xl",children:"Abbrechen"}),b.jsx("button",{onClick:()=>{Gn(),document.getElementById("sessionModal")?.classList.add("hidden")},className:"flex-1 py-2 bg-amber-600 text-white rounded-xl hover:bg-amber-700",children:"Starten"})]})]})})]})}KA.createRoot(document.getElementById("root")).render(b.jsx(ee.StrictMode,{children:b.jsx(rO,{})}));
